/* ========================================================================
 * @license The MIT License
 *
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * @author  Yoshiaki Sugimoto <neo.yoshiaki.sugimoto@gmail.com>
 * @copyright Neo,Inc <http://neo-navi.net/>
 * @version    ,v 0.7.1
 * 
 * ========================================================================
 */

/* ========================================================================
 * Animation easing functions
 * 
 * http://www.robertpenner.com/easing/
 * 
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * Copyright Â© 2001 Robert Penner All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * Neither the name of the author nor the names of contributors may be used to endorse or promote products derived from this software without specific prior written permission.
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * =========================================================================
 */


(typeof FL_CONFIG==='object')?(function(y,B,E,F,H){if(E.getInstance){return}var J={INITIAL_TIME:y,DOM_CREATE_TIME:0,WINDOW_LOADED_TIME:0,SSL_CONNECT:(F.protocol==='https:'),GLOBAL_EVAL:E.eval,CONTROLLER:null,CONTROLLER_NAME:'',EXEC_METHOD:null,METHOD_ARGUMENTS:{},WINDOW_LOADED:false,START_CONTROLLER:null,BENCH_MARKS:{},DOM_LOADED:false,CURRENT_ZINDEX:1,XHR_RESPONSES:{READY_STATE:{1:'LOADING',2:'LOADED',3:'INTERACTIVE',4:'COMPLETED'},STATUS:{403:'PERMISSION ERROR',404:'NOT FOUND',500:'SERVER ERROR',503:'INTERNAL SERVER ERROR',200:'OK',999:'UNDEFINED'}},POSITION_STATIC:1,POSITION_RELATIVE:2,POSITION_ABSOLUTE:3,POSITION_FIXED:4,POSITION:{'static':1,'relative':2,'absolute':3,'fixed':4}},STACK={LOADED_CORE_CLASSES:{},ELEMENTS:{},EVENT_HANDLERS:[],LOADED_FUNCS:[],DOM_LOADED_FUNCS:[],INSTANCED_API:{},CONFIG:{},GLOBAL_LAYER:null,CAMELED_PROP:{},DECAMELED_PROP:{},API_STACK:[],CSS_STACK:[],API_READY:{},MODULE_READY:{},API_READY_FUNC:{},MODULE_READY_FUNC:{},BENCH_MARKS:{},AJAX_EVENTS:[],AJAX_QUEUE:[],DEFFERD:{}},CORE_CONFIG={},I,EXID=0,ignoreID=0,DEFFERD_ID=0,head=B.head||B.getElementsByTagName('head')[0],body,html=B.documentElement||B.getElementsByTagName('html')[0],pi=E.parseInt,pf=E.parseFloat,mr=Math.round,abs=Math.abs,sin=Math.sin,cos=Math.cos,mp=Math.pow,enc=E.encodeURIComponent,dec=E.decodeURIComponent,delay=E.setTimeout,unDelay=E.clearTimeout,interval=E.setInterval,unInterval=E.clearInterval,defWinWidth=E.innerWidth||0,defWinHeight=E.innerHeight||0,SSLURI,SITEURI,indexReg=/index\.php\/?/,MODULES={},COMPUTED_STYLE=(B.defaultView&&B.defaultView.getComputedStyle)?B.defaultView.getComputedStyle:null,DOM,ua,ut,enables,Animation,Timer,connect,disConnect,Controller,Model,Base,IEFIX,CUSTOM_EVENT,DEFFERD_CONTROLLER,COLOR_REGEX={rgb:/^rgb\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3})\)$/,rgba:/^rgba\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),([0-9\.]+)\)$/,hex:/^#([0-9a-zA-Z]{3,6})$/,hsl:/^hsl\(([0-9]+),([0-9]+)%,([0-9]+)%\)$/,hsla:/^hsla\(([0-9]+),([0-9]+)%,([0-9]+)%,([0-9\.]+)\)$/},IE_MAP={'class':'className','for':'htmlFor','colspan':'colSpan','rowspan':'rowSpan','acesskey':'accessKey','tabindex':'tabIndex','frameborder':'frameBorder'},ClassMap,INLINE_ELEMENTS='span,em,strong,dfn,cide,abbr,acronym,q,sub,sup,br,a,img,input,select,textarea,label',BLOCK_ELEMENTS='div,h1,h2,h3,h4,h5,h6,address,blockquote,p,pre,ul,li,ol,dl,table,hr,form,fieldset',CSS_BG_REG=/^url\s?\(/,CoreTimer,INTERVAL_FPS,NUMERIC_CSS='opacity,zIndex',EXT='.js',HTML_DATA_PREFIX='data-fl-';for(I in FL_CONFIG){if(!I.isPrototypeOf(FL_CONFIG)){CORE_CONFIG[I]=FL_CONFIG[I]}}if(CORE_CONFIG.cookieDomain==='document.domain'){CORE_CONFIG.cookieDomain=B.domain}try{delete FL_CONFIG}catch(e){FL_CONFIG=undefined}if(!CORE_CONFIG.siteUrl){(function(){var a=head.getElementsByTagName('script'),i=-1,reg=/flint.*\.js$/,ap=CORE_CONFIG.scriptPath;while(a[++i]){if(reg.test(a[i].src)){CORE_CONFIG.siteUrl=a[i].src.substring(0,a[i].src.lastIndexOf(ap+'flint'));break}}})()}if(!CORE_CONFIG.ssl_siteUrl){(function(){var a=head.getElementsByTagName('script'),i=-1,reg=/flint.*\.js$/,ap=CORE_CONFIG.scriptPath;while(a[++i]){if(reg.test(a[i].src)){CORE_CONFIG.ssl_siteUrl=a[i].src.substring(0,a[i].src.lastIndexOf(ap+'flint'));break}}})()}if(E.Hook&&typeof Hook==='object'){CORE_CONFIG.__hooks=Hook;try{delete E.Hook}catch(e){E.Hook=undefined}}if(CORE_CONFIG.debugMode===true){if(!(function(){var a=[],g,N,gn=CORE_CONFIG.globalNames;for(N in gn){if(E[gn[N]]){a[a.length]=g}}return(a.length>0)?confirm('Namespace ['+a.join(',')+']'+'is confrict!\nThis script keep running?'):true})()){return}}if(CORE_CONFIG.disableEval===true){E.eval=function(){throw Error('Eval function has deleted by system.');}}SITEURI=CORE_CONFIG.siteUrl.replace(indexReg,'');SSLURI=(CORE_CONFIG.ssl_siteUrl)?CORE_CONFIG.ssl_siteUrl.replace(indexReg,''):SITEURI;CORE_CONFIG.BASE_URL=(J.SSL_CONNECT)?SSLURI:SITEURI;CORE_CONFIG.SITE_URL=CORE_CONFIG[(J.SSL_CONNECT)?'ssl_siteUrl':'siteUrl'];CORE_CONFIG.APPPATH=CORE_CONFIG.BASE_URL+CORE_CONFIG.scriptPath;if(!/.+\/$/.test(CORE_CONFIG.SITE_URL)){CORE_CONFIG.SITE_URL+='/'}ClassMap={UserAgent:UserAgent,Loader:Loader,Utility:Utility,Router:Router,Config:Config,Event:Event,AjaxInit:AjaxInit,FL_Image:FL_Image,BenchMark:BenchMark,CreateClass:CreateClass,Extends:Extends,Enables:Enables,Language:Language,Hook:Hook,URI:URI,Json:Json,Input:Input,CustomEvent:CustomEvent};ua=loadClass('UserAgent');enables=loadClass('Enables');!Array.prototype.forEach&&(Array.prototype.forEach=function(a,b){if(typeof a!=='function'){throw new TypeError('First argument must be function on Array#forEach.');}var i=0,len=this.length,ctx=b||null;for(;i<len;++i){if(i in this){a.call(ctx,this[i],i,this)}}});!Array.prototype.map&&(Array.prototype.map=function(a,b){if(typeof a!=='function'){throw new TypeError('First argument must be function on Array#map.');}var i=0,len=this.length,ctx=b||null,ret=new Array(len);for(;i<len;++i){if(i in this){ret[i]=a.call(ctx,this[i],i,this)}}});function ignite(){var c,CFG,RTR,URI,HOOK,H,BM,LANG,LOADER,INPUT,Class,Method,ael='addEventListener',ate='attachEvent',dte='detachEvent',rel='removeEventListener',dn,ss,G=CORE_CONFIG.globalNames;_registCustomEvent();if(enables.needFixBrowserIE){B.createElement('canvas');if(B.namespaces){dn=B.namespaces;if(!dn.v){dn.add('v','urn:schemas-microsoft-com:vml','#default#VML')}if(!dn.v_o){dn.add('v_o','urn:schemas-microsoft-com:office:office','#default#VML')}if(!B.styleSheets.fl_canvas){ss=B.createStyleSheet();ss.owningElement.id='fl_canvas';ss.cssText=['canvas{display:inline-block;overflow:hidden;','text-align:left;width:300px;height:150px;}','v\\:*{behavior:url(#default#VML)}','v_o\\:*{behavior:url(#default#VML)}'].join('')}}}ut=loadClass('Utility');BM=loadClass('BenchMark');HOOK=loadClass('Hook');HOOK._callHook('preSystem');CFG=loadClass('Config');URI=loadClass('URI');RTR=loadClass('Router');LANG=loadClass('Language');INPUT=loadClass('Input');LOADER=loadClass('Loader');Controller=Base=new _Controller();Model=new _Model();E.ClassExtend=function(a,b){new Extends(a,b)};E.getInstance=function(){return J.CONTROLLER||Controller};alias('FLClass',loadClass('CreateClass'));alias(G.DOM,DOM);alias(G.Animation,Animation);alias(G.Module,Module);if(G.Helper!==''){E[G.Helper]={}}Controller.load._fl_autoLoader();if(CORE_CONFIG.routingMode==='segment'||CORE_CONFIG.routingMode==='config'){Controller.__load(CFG.appPath()+'controllers/'+RTR.fetchDirectory()+RTR.fetchClass()+EXT)}else{E[G.Controller]=Controller}if(E[ael]){E[ael]('load',Base.event.__execLoad,false);E[ael]('unload',ut.cleanEvElm,false)}else if(E[ate]){E[ate]('onunload',ut.cleanEvElm);E[ate]('onload',Base.event.__execLoad)}else{E.onunload=ut.cleanEvElm}if(enables.canDOMReady){B[ael]('DOMContentLoaded',Base.event.__execDOM,false)}else if(ua.IE){function rsc(){if(B.readyState==='complete'){Base.event.__execDOM(E.event);B.detachEvent('onreadystatechange',rsc)}}B[ate]('onreadystatechange',rsc)}else if(B.readyState){(function(){(B.readyState=='loaded'||B.readyState=='complete')?Base.event.__execDOM():delay(arguments.callee,0)})()}}function union(a,b,c){var i,isP=c||false;for(i in b){if(!isP||!/^_/.test(i)){a[i]=b[i]}}return a}function alias(a,b,c){(c||E)[a]=b}function apiLoad(a,b,c){var d=(a==='css'),t=B.createElement((d)?'link':'script');t.type=(d)?'text/css':'text/javascript';t[(d)?'href':'src']=b;if(d){if(c){t.media=c}t.rel='stylesheet'}else{t.charset='UTF-8'}head.appendChild(t)}function returnFalse(){return false}function loadClass(a){var b=STACK.LOADED_CORE_CLASSES,cl;if(!ClassMap[a]){throw Error(a+' class is not defined');return}if(!b[a]){b[a]=new ClassMap[a]()}return b[a]}function ready(a,b){var d=STACK.API_READY,arf=STACK.API_READY_FUNC,fn;if(typeof a==='string'){if(d[a]===true||(typeof Controller[a]==='object'||(J.CONTROLLER&&typeof J.CONTROLLER[a]==='object'))){b.call(J.CONTROLLER||Controller)}else{function c(){b.call(J.CONTROLLER||Controller)}if(arf[a]){arf[a].push(c)}else{arf[a]=[c]}}}else if(typeof a==='function'){Base.event.set(B,'DOMReady',a)}}function DefferdInit(){return new FL_Defferd(arguments)}function _registCustomEvent(){CUSTOM_EVENT=loadClass('CustomEvent');CUSTOM_EVENT.regist('mouseenter','mouseover',function(a,b){var e=b.relatedTarget||b.fromElement||null,html=B.documentElement,flag=true;if(!e){return false}while(e&&e!==html){if(e===a){flag=false;break}e=e.parentNode}return flag});CUSTOM_EVENT.regist('mouseleave','mouseout',function(a,b){var e=b.relatedTarget||b.toElement||null,html=B.documentElement,flag=true;if(!e){return false}while(e&&e!==html){if(e===a){flag=false;break}e=e.parentNode}return flag})}function Enables(){this.xhr=!!E.XMLHttpRequest;this.fixIE=(ua.IE&&ua.IEV<9)?true:false;this.positionFixed=this.png=(!ua.IE6)?true:false;this.minmaxWH=(!ua.IE6)?true:false;this.hasAttBug=(ua.IE6||ua.IE7)?true:false;this.canASCall=(!ua.IE||ua.IEV>8)?true:false;this.canQSA=(B.querySelectorAll)?true:false;this.isQSAChild=(this.canQSA&&ua.IEV>=8)?true:false;this.isQSAContains=(this.canQSA&&!ua.IE)?true:false;this.needFixBrowserIE=(ua.IE&&ua.IEV<9)?true:false;this.canDOMReady=(ua.IE9||ua.IE10||ua.Firefox||ua.Opera||ua.GoogleChrome||(ua.Safari&&ua.SafariV>3.1))?true:false}Enables.prototype={};function UserAgent(){var u=H,sfV,__flashVer,map,i=-1,BS=[],c=B.documentElement.className,DM=B.documentMode,lteV=10;this.agent=H;function parse(a,n,m){return pf(a[n]+'.'+((!m)?0:a[m]))}function has(a){return(u.indexOf(a)!==-1)}function set(a){BS[++i]=a;return true}map={'I':'IE','I6':'IE6','I7':'IE7','I8':'IE8','I8S':'IE8S','F':'Firefox','S':'Safari','C':'GoogleCrome','O':'Opera','L':'Lunascape','SL':'Sleipnir','W':'Wii','GB':'GameBoy','DS':'NintentdoDS','PSP':'PSP','PS2':'PlayStation2','PS3':'PlayStation3','i':'iPod','ip':'iPhone','ip3':'iPhone3G'};this.Opera=!!E.opera&&set('o');this.IE=has('msie')&&!this.Opera&&set('ie');this.IEV=(this.IE)?parse(u.match(/(.*?)msie ([0-9]{1,2})\.([0-9])/),2,3):null;this.IE6=(this.IEV>=6&&this.IEV<7)&&set('ie6');this.IE7=(this.IEV>=7&&this.IEV<8)&&set('ie7');this.IE8=(this.IEV>=8&&this.IEV<9)&&set('ie8');this.IE9=(this.IEV>=9&&this.IEV<10)&&set('ie9');this.IE10=(this.IEV>=10&&this.IEV<11)&&set('ie10');this.IE8S=(this.IE8&&typeof DM!='undefined'&&DM===8);this.IE9S=(this.IE9&&typeof DM!='undefined'&&DM===9);this.IE10S=(this.IE10&&typeof DM!='undefined'&&DM===10);this.Firefox=this.gecko=has('gecko')&&has('fox')&&set('ff');this.webkit=has('webkit');this.Safari=has('safari')&&has('applewebkit')>0&&!has('chrome',u)&&set('s');this.GoogleChrome=has('chrome',u)&&set('gc');this.Lunascape=has('lunascape');this.Sleipnir=has('sleipnir');this.Windows=has('windows');this.Mac=has('mac');this.Linux=has('linux');if(this.IE){while(!this['IE'+lteV]){set('ie-lte-'+lteV--)}set('ie-lte-'+lteV--)}this.Standard=(B.compatMode==='CSS1Compat');this.FirefoxV=(this.Firefox)?pf(u.replace(/(.*?)firefox\/([0-9])\.([0-9])(.*?)/,'$2.$3')):null;this.OperaV=(this.Opera)?parse(u.match(/(.*?)opera[\/|\s]([0-9])\.([0-9])(.*?)/),2,3):null;this.GoogleChromeV=(this.GoogleChrome)?pf(u.replace(/(.*?)chrome\/([0-9])\.([0-9])(.*?)/,'$2.$3')):null;sfV=(this.Safari)?u.replace(/(.*?)applewebkit\/([0-9]*?)\.(.*?)/,'$2').substring(0,2):null;this.SafariV=(sfV!==null)?(pi(sfV,10)>52)?u.replace(/(.*?)version\/([0-9])\.([0-9]).*/,'$2.$3'):(sfV=='41')?'2.0':(sfV=='31')?'1.3':(sfV=='12')?'1.2':(sfV=='10')?'1.1':(sfV=='85')?'1.0':'0':null;if(CORE_CONFIG.useMobileAgent){this.Wii=has('nintendo wii');this.GameBoy=has('gameboy');this.NintentdoDS=has('nitro');this.PSP=has('psp');this.PlayStation2=has('ps2')&&has('bb navigator');this.PlayStation3=has('playstation 3');this.iPod=has('ipod');this.iPnone=has('iphone');this.iPhone3G=this.iPhone&&has('applewebkit/525');this.Android=has('android')}this.is=function(a){var b=a.split('|'),uaslen=b.length,i=0;for(;i<uaslen;i++){if(b[i]in map&&this[map[b[i]]]===true){return true}}return false};__flashVer=(function(){var v=[0,0,0],vn,m,n=navigator,pl,AX,mmt='application/x-shockwave-flash',AC7='ShockwaveFlash.ShockwaveFlash.7',AC6='ShockwaveFlash.ShockwaveFlash.6';if(n.plugins&&n.mimeTypes[mmt]){pl=n.mimeTypes[mmt].enabledPlugin;if(pl&&pl.description){m=pl.description.match(/([0-9]+)\.([0-9])\s?[a-zA-Z]([0-9]+)$/);v=[m[1],m[2],m[3]]}}else{try{AX=new ActiveXObject(AC7);vn=AX.GetVariable("$version")}catch(e){try{AX=new ActiveXObject(AC6);vn='WIN 6,0,21,0';AX.AllowScriptAccess='always';vn=AX.GetVariable("$version")}catch(e){vn=null}}if(vn){v=vn.replace(/^WIN /,'').split(',');v.splice(3,1)}}return v})();this.toString=function(){return'[ Class UserAgent ]'};this.flashVer=__flashVer.join('.');this.flashVerArray=__flashVer;B.documentElement.className=(c==='')?BS.join(' '):c+BS.join(' ')}UserAgent.prototype={};function CreateClass(){}CreateClass.prototype={create:function(a){var b=function(){};return this.__extend(b,a||undefined)},singleton:function(a){var b,fn=function(){if(b){return b}else{b=this}};return this.__extend(fn,a||undefined)},__extend:function(a,b){switch(typeof b){case'function':a.constructor=b;a.prototype=new b();break;case'object':a.constructor=b.constructor;a.ptototype=b;break;default:break}return a}};function Config(){this.C=CORE_CONFIG}Config.prototype={siteUrl:function(a){return this.C.SITE_URL+(a?a.replace('/^[\/]',''):'')},baseUrl:function(){return this.C.BASE_URL},appPath:function(){return this.C.APPPATH},item:function(a){return(a in this.C)?this.C[a]:false},isDebug:function(){return this.C.debugMode},setItem:function(a,b){this.C[a]=b},getGlobal:function(a){var G=this.C.globalNames;if(!a){return{Controller:(CORE_CONFIG.routingMode==='segment')?'':G.Controller,DOM:G.DOM,Animation:G.Animation,Helper:(G.helper==='')?E:G.Helper,Module:(G.Module==='')?E:G.Module}}else{if(G.hasOwnProperty(a)){return(a==='Helper')?(G[a]!='')?E[G[a]]:E:E[G[a]]}}},toString:function(){return'[ Class Config ]'}};function Json(){this.esc=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;this.meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};this.gap=null;this.ind=null;this.rep=null}Json.prototype={parse:function(a){return J.GLOBAL_EVAL('('+a+')')},stringify:function(a,b,c){var i=0;this.gap='';this.ind='';if(ut.isNumber(c)){for(;i<c;i++){this.ind+=' '}}else if(ut.isString(c)){this.ind=c}this.rep=b;if(b&&!ut.isFunction(b)&&(!ut.isObject(b)||!ut.isNumber(b.length))){throw new TypeError('Json.stringify');}return this.__strstr('',{'':a})},__q:function(b){var c=this.esc,m=this.meta;c.lastIndex=0;return c.test(b)?'"'+b.replace(c,function(s){return(ut.isString(m[s]))?m[s]:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'},__strstr:function(a,b){var i,k,v,len,m=this.gap,pat=[],val=b[a],rep=json.rep,isF=window.isFinite;if(ut.isFunction(rep)){val=rep.call(b,a,val)}if(ut.isString(val)){return this.__q(val)}else if(ut.isNumber(val)){return isF(val)?String(val):'nul'}else if(ut.isBool(val)||ut.isNull(val)){return String(val)}else if(ut.isArray(val)){if(!val){return'null'}this.gap+=this.ind;len=val.length;for(i=0;i<len;i++){pat[i]=this.__strstr(i,val)||'null'}v=(pat.length===0)?'[]':this.gap?'[\n'+this.gap+pat.join(',\n'+this.gap)+'\n'+m+']':'['+pat.join(',')+']';this.gap=m;return v}else{if(!val){return'null'}this.gap+=this.ind;if(rep&&ut.isObject(rep)){len=rep.length;for(i=0;i<len;i++){k=rep[i];if(ut.isString(k)){v=this.__strstr(k,val);if(v){pat.push(json.__q(k)+(json.gap?': ':':')+v)}}}}else{for(k in val){if(Object.hasOwnProperty.call(val,k)){v=this.__strstr(k,val);if(v){pat.push(json.__q(k)+(json.gap?': ':':')+v)}}}}v=(pat.lnegth===0)?'{}':this.gap?'{\n'+this.gap+pat.join(',\n'+this.gap)+'\n'+m+'}':'{'+pat.join(',')+'}';this.gap=m;return v}},toString:function(){return'[ Class Json ]'}};function BenchMark(){this.STB=STACK.BENCH_MARKS;this.SYB=J.BENCH_MARKS}BenchMark.prototype={mark:function(a){var n=a||'default';this.STB[n]=+new Date();this.SYB[n]='running...'},end:function(a,b){var n=a||'default',s=this.STB[n],e=+new Date(),r=e-s;this.SYB[n]=r+' ms';return b?r:alert('BenchMarks "'+n+'" runs '+r+' ms')},toString:function(){return'[ Class BenchMark ]'}};function URI(){this.hash;this.search;this.uri;this.__construct()}URI.prototype={__construct:function(){var a=F.href,hp=a.indexOf('#'),sp=a.indexOf('?'),acu,splitUri,segmentLen,ii=0,uriO={},uriA=[''];this.hash=(hp!==-1)?a.slice(hp):'#';this.search=(sp!==-1)?a.slice(sp+1):'';this.uri=a.replace(this.hash,'').replace('?'+this.search,'');this._uriString=this.uri.replace(CORE_CONFIG.SITE_URL);acu=this._uriString.replace(/index\.php\/?/,'');splitUri=acu.split('/');segmentLen=splitUri.length;for(;ii<segmentLen;ii++){uriO[ii+1]=uriA[uriA.length]=splitUri[ii]}this.uriObj=uriO;this.uriArray=uriA},getHash:function(a){return(a)?this.hash:this.hash.slice(1)},segmentArray:function(){var u=this.uriArray,len=u.length,i=0,ret=[''];while(u[++i]){ret[ret.length]=u[i]}return ret},segment:function(a,b){return this.uriArray[a]||b},lastSegment:function(a){return this.uriArray[this.uriArray.length-1]||a||undefined},slashSegment:function(a,b){var u=this.uriArray,sh=b||'',prefix=(sh==='leading'||sh==='both')?'/':'',suffix=(sh==='both')?'/':'';return u[a]?prefix+u[a]+suffix:false},uriString:function(){return this._uriString},assocToUri:function(a){return'/'+a.join('/')},toString:function(){return'[ Class URI ]'}};function Input(){this._GET={};this.__construct()}Input.prototype={__construct:function(){var s=(F.search!=='')?F.search.slice(1):'',sp=s.split('&'),spp,i=-1;while(sp[++i]){spp=sp[i].split('=');this._GET[dec(spp[0])]=dec(spp[1])}this._GET=this.__cleanInputData(this._GET)},__cleanInputData:function(a){if(ut.isObject(a)){var i,ret={},keyRegex=/^[a-zA-Z0-9:_\/\-]+$/;for(i in a){if(a.hasOwnProperty(i)){if(keyRegex.test(i)){ret[i]=this.__cleanInputData(a[i])}}}return ret}return a.replace(/[\r\n|\r]/g,'\n')},get:function(a){return(a&&this._GET.hasOwnProperty(a))?this._GET[a]:false}};function Hook(){this.__hooks=CORE_CONFIG._hooks||{}}Hook.prototype={_callHook:function(a){var h=this.__hooks;if(h[a]&&ut.isFunction(h[a])){h[a]()}}};function Utility(){}Utility.prototype={getAbsPosition:function(e){var t,l,p,sc,gCS,nowStyle;if(e.style.position==='fixed'){t=e.style.top;l=e.style.left;if(t=='auto'||t==''){t=e.offsetTop}else if(t.indexOf('%')>-1){t=mr(screen.availHeight*pi(t)/100)}else{t=pi(t)}if(l=='auto'||l==''){l=e.offsetLeft}else if(l.indexOf('%')>-1){l=mr(screen.availHeight*pi(l)/100)}else{l=pi(l)}return{x:l,y:t}}if(e.getBoundingClientRect){p=e.getBoundingClientRect();sc=this.getScrollPosition();return{x:mr(p.left+sc.x),y:mr(p.top+sc.y)}}p={x:0,y:0};var d=function(a,b,c){if(a.currentStyle){switch(a.currentStyle[camledProp]){case'thin':return 2;case'medium':return 4;case'thick':return 6;default:return a.currentStyle[b]}}else if(COMPUTED_STYLE){nowStyle=COMPUTED_STYLE(a,'');return nowStyle.getPropertyValue(c)}return 0};while(e){p.x+=e.offsetLeft;p.y+=e.offsetTop;e=e.offsetParent;if(e&&ua.IE){p.x+=(pi(d(e,'borderLeftWidth','border-left-width'),10)||0);p.y+=(pi(d(e,'borderTopWdth','border-top-width'),10)||0)}}if(ua.Firefox){p.x+=2*(pi(d(body,'borderLeftWidth','border-left-width'),10)||0);p.y+=2*(pi(d(body,'borderTopWidth','border-top-width'),10)||0)}return p},getScrollPosition:function(){var b=B.body,h=B.documentElement;return(E.IEFIX&&E.IEFIX.body)?{x:E.IEFIX.body.scrollLeft,y:E.IEFIX.body.scrollTop}:{x:b.scrollLeft||h.scrollLeft||0,y:b.scrollTop||h.scrollTop||0}},getPageSize:function(){var b=B.body,h=B.documentElement,max=Math.max;return{width:max(b.innerWidth||0,b.clientWidth||0,b.scrollWidth||0,h.clinetWidth||0,h.scrollWidth||0),height:max(b.innerHeight||0,b.clientHeight||0,b.scrollHeight||0,h.clinetHeight||0,h.scrollHeight||0)}},getContentSize:function(){var b=B.body,h=B.documentElement;return{width:(defWinWidth>0)?defWinWidth:(!!E.innerWidth)?E.innerWidth:(ua.Standard)?h.clientWidth:b.clientWidth,height:(defWinHeight>0)?defWinHeight:(!!E.innerHeight)?E.innerHeight:(ua.Standard)?h.clientHeight:b.clientHeight}},getCenterPosition:function(a){var b=this.getContentSize(),sc=this.getScrollPosition();return{x:b.width/2+(a?sc.x:0),y:b.height/2+(a?sc.y:0)}},getPixel:function(a){var d=B.createElement('div'),ret={},val=pf(a);if(isNaN(val)){return 0}d.style.visibility='hidden';d.style.position='absolute';d.style.top='0px';d.style.left='0px';B.body.appendChild(d);d.style.width='10pt';ret.pt=d.offsetWidth/10;d.style.width='10em';ret.em=d.offsetWidth/10;B.body.removeChild(d);d=null;return(a.indexOf('em')!==-1)?ret.em*val:(a.indexOf('pt')!==-1)?ret.pt*val:val},getTextSize:function(a,b){var d=B.createElement('span'),res={};d.style.fontSize=b||'inherit';d.style.width='auto';d.style.visibility='hidden';d.appendChild(B.createTextNode(a));B.body.appendChild(d);res.width=d.offsetWidth;res.height=d.ofsetHeight;B.body.removeChild(d);d=null;return res},inRect:function(a,b){var c=DOM(a).absDimension(),td=DOM(b).absDimension();return(c.top>td.top&&c.left>td.left&&c.bottom<td.bottom&&c.right<td.right)},inRectPiece:function(a,b){var c=DOM(a).absDimension(),td=DOM(b).absDimension();return!(c.bottom<td.top||c.top>td.bottom||c.right<td.left||c.left>td.right)},inRectHalfVertical:function(a,b){if(this.inRectPiece(a,b)===false){return false}var c=DOM(a).absDimension(),td=DOM(b).absDimension();if((c.bottom>=td.top&&c.bottom<=td.bottom-(td.height/2))&&((c.left>=td.left&&c.left<=td.right)||(c.right>=td.left&&c.right<=td.right))){return'T'}else if((c.top>=td.top+(td.height/2)&&c.top<=td.bottom)&&((c.left>=td.left&&c.left<=td.right)||(c.right>=td.left&&c.right<=td.right))){return'B'}return false},inRectHalfParallel:function(a,b){if(this.inRectPiece(a,b)===false){return false}var c=DOM(a).absDimension(),td=DOM(b).absDimension();if((c.left>=td.left+(td.width/2)&&c.left<=td.right)&&((c.top>=td.top&&c.top<=td.bottom)||(c.bottom>=td.top&&c.bottom<=td.bottom))){return'L'}else if((c.right>=td.left&&c.right<=td.left+(td.width/2))&&((c.top>=td.top&&c.top<=td.bottom)||(c.bottom>=td.top&&c.bottom<=td.bottom))){return'R'}return false},mouseInRect:function(a,b){var c=DOM(b).absDimension();return(a.x>=c.left&&a.x<=c.right&&a.y>=c.top&&a.y<=c.bottom)},mouseInRectHalfVertical:function(a,b){if(!this.mouseInRect(a,b)){return false}var c=DOM(b).absDimension();if((a.y>=c.top&&a.y<c.top+(c.height/2))&&(a.x>=c.left&&a.x<=c.right)){return'T'}else if((a.y>=c.top+(c.height/2)&&a.y<=c.bottom)&&(a.x>=c.left&&a.x<=c.right)){return'B'}return false},mouseInRectHalfParallel:function(a,b){if(!this.mouseInRect(a,b)){return false}var c=DOM(b).absDimension();if((a.x>=c.left&&a.x<c.left+(c.width/2))&&(a.y>=c.top&&a.y<=c.bottom)){return'L'}else if((a.x>=c.left+(c.width/2)&&a.x<=c.right)&&(a.y>=c.top&&a.y<=c.bottom)){return'R'}return false},__is:function(o){return(o===null||typeof o=='undefined')},isString:function(o){return(this.__is(o)===false&&typeof o=='string')},isNumber:function(o){return(this.__is(o)===false&&typeof o=='number')},isFunction:function(o){return(this.__is(o)===false&&typeof o=='function')},isArray:Array.isArray||function(o){return(this.__is(o)===false&&typeof o=='object'&&Object.prototype.toString.call(o)==='[object Array]')},isObject:function(o){return(this.__is(o)===false&&typeof o=='object'&&Object.prototype.toString.call(o)==='[object Object]')},isBool:function(o){return(this.__is(o)===false&&typeof o=='boolean')},isset:function(v){return(typeof v=='undefined')},isNull:function(v){return(v===null)},isXElement:function(e){return!!(e instanceof xElement)},isXNodeList:function(e){return!!(e instanceof xNodeList)},rgbToHex:function(a){var t=this.trim(a),m,i=1,h,ret=['#'];if(/^rgb/.test(t)===false){return a}m=a.match(COLOR_REGEX.rgb);if(pi(m[1],10)>255||pi(m[2],10)>255||pi(m[3],10)>255){throw Error('can\'t convert RGB to Hex on '+a);}for(i;i<4;i++){h=pi(m[i],10).toString(16);ret[ret.length]=(h.length===1)?'0'+h:h}return ret.join('')},hexToRgb:function(a){var t=this.trim(a),m,ret=a;if(/^#[0-9a-fA-F]{6}$/.test(t)){m=t.match(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/);ret='rgb('+pi(m[1],16).toString()+','+pi(m[2],16).toString()+','+pi(m[3],16).toString()+')'}else if(/^#[0-9a-fA-F]{3}/.test(t)){m=t.match(/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/);ret='rgb('+pi(m[1]+m[1],16).toString()+','+pi(m[2]+m[2],16).toString()+','+pi(m[3]+m[3],16).toString()+')'}else{throw Error('invalid hex foramt on '+a);}return ret},grep:function(a,b){if(!ut.isString(a)||!b){throw TypeError('invalid arguments of Utility.grep function parameter by '+a);}if(typeof b==='string'){return(a.indexOf(b)!==-1)}else if(b.constructor===RegExp){return b.test(a)}return false},serializeForm:function(a){if(!a.nodeType||a.tagName.toLowerCase()!=='form'){throw new Error('utility.serializeForm works <form> element only.');return}var b={},input,inputlen,iptName,iptArr={},select,selectlen,textarea,textarealen,chStack={},ch=false,chMulti={},e,chName,i,j,s,sl,k,m,ipt,c;input=a.getElementsByTagName('input');inputlen=input.length;for(i=0;i<inputlen;i++){e=input[i];switch(e.type){case'text':case'password':case'submit':case'hidden':if(ut.grep(e.name,'[]')){iptName=e.name.replace('[]','');if(iptName in iptArr){iptArr[iptName].push(e.value)}else{iptArr[iptName]=[e.value]}}else{b[e.name]=e.value}break;case'radio':if(e.checked===true){b[e.name]=e.value}break;case'checkbox':if(e.checked===true){ch=true;if(ut.grep(e.name,'[]')){chName=e.name.replace('[]','');chMulti[chName]=1}else{chName=e.name}if(chName in chStack){chStack[chName].push(e.value)}else{chStack[chName]=[e.value]}}break;default:break}}if(ch){for(c in chStack){if(!c.isPrototypeOf(chStack)){b[c]=(c in chMulti)?chStack[c]:chStack[c][0]}}}for(ipt in iptArr){if(!ipt.isPrototypeOf(iptArr)){b[ipt]=iptArr[ipt]}}select=a.getElementsByTagName('select');selectlen=select.length;for(j=0;j<selectlen;j++){s=select[j].options;sl=s.length;for(k=0;k<sl;k++){if(s[k].selected===true){if(select[j].multiple){if(b[select[j].name]){b[select[j].name].push(s[k].value)}else{b[select[j].name]=s[k].value}}else{b[select[j].name]=s[k].value;break}}}}textarea=a.getElementsByTagName('textarea');textarealen=textarea.length;for(m=0;m<textarealen;m++){b[textarea[m].name]=textarea[m].value}chStack=chMulti=null;return b},trim:function(a){return(String.prototype.trim)?a.trim():a.replace(/^\s+|\s+$/,'')},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},br2nl:function(a){return a.replace(/<br\s?\/?>/g,'\n')},nl2br:function(a){return a.replace(/\r\n/g,'<br />').replace(/\r|\n/g,'<br />')},clean:function(a,b){var c=b||true,i;if(typeof a=='object'){for(i in a){if(!i.isPrototypeOf(a)){a[i]=this.clean(a[i],c)}}return a}if(c){a=a.replace(/javascript:/ig,'[removedprotocol]')}return a.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/\'/g,'&#039;')},inArray:Array.inArray||function(v,a,b){var c=a.length,i=0,s=b||false;for(;i<c;i++){if(a[i]==v){if(s){if(a[i]===v){return true}}else{return true}}}return false},forEach:function(a,b){if(a.forEach){return a.forEach(b)}var i=-1;while(a[++i]){b.call(a[i],i)}},getDefaultWH:function(e){var a=DOM(e),dis=a.readStyle('display'),w=a.readStyle('width'),h=a.readStyle('height'),abs;a.addStyle({width:'auto',height:'auto',display:'block'});abs={width:e.offsetWidth,height:e.offsetHeight};a.addStyle({width:w,height:h,display:dis});return abs},toURIParams:function(a){if(!this.isObject(a)){throw TypeError('argument must be an Object.');return}var b=[],i;for(i in a){if(!i.isPrototypeOf(a)){b[enc(i)]=enc(a[i])}}return b.join('&=')},getExecuteNames:function(a){var b,n=this.getRealName(a),sc=B.getElementsByTagName('script'),len=sc.length,i=len-1,sp;if(!n||n===''){throw Error('extend class name is undefined.');return}for(;i>=0;i--){if(sc[i].src&&sc[i].src.indexOf(n)!==-1){b=sc[i].src;break}}if(!b||ut.grep(b,'?')){return{name:n,bindName:n}}sp=b.split('&');return{name:n,bindName:(sp[1]&&ut.grep(sp[1],'bind'))?sp[1].split('=')[1]:n}},getRealName:function(b){return b.name||(function(){var a=b.toString();return a.slice(9,a.indexOf('('))})()},cleanEvElm:function(){Base.event.deleteAllEvent();STACK.ELEMENTS=[];STACK.GLOBAL_LAYER=null;STACK.DEFFERD={}},camel:function(a){var b,p,i=0;if(a in STACK.CAMELED_PROP){return STACK.CAMELED_PROP[a]}if(!ut.grep(a,'-')){return a}b=a.split('-');p=[b[0]];while(b[++i]){p[i]=b[i].charAt(0).toUpperCase()+b[i].slice(1).toLowerCase()}STACK.CAMELED_PROP[a]=p.join('');return STACK.CAMELED_PROP[a]},deCamel:function(a){var b;if(a in STACK.DECAMELED_PROP){return STACK.DECAMELED_PROP[a]}b=a.replace(/([A-Z]{1})/g,'-$1').toLowerCase();STACK.DECAMELED_PROP[a]=b;return b},exists:function(a){var h=CORE_CONFIG.globalNames.Helper,obj=(h!='')?E[h]:E;return!!obj[a]},makeFilter:function(a,b,c){switch(a){case'op':return'alpha(opacity='+(b.indexOf('.')!==-1)?b*100:b+')';case'png':return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+b+', sizingMethod='+((c)?c:'scale')+')';default:return''}},toString:function(){return'[ Class Utility ]'}};if(ua.Firefox){E.Event.prototype.__defineGetter__('offsetX',function(){return this.layerX});E.Event.prototype.__defineGetter__('offsetY',function(){return this.layerY});E.Event.prototype.__defineGetter__('wheelData',function(){return this.detail})}function Event(){this.DRreg=/domready/i;this.ae=STACK.AJAX_EVENTS;this.df=STACK.DOM_LOADED_FUNCS;this.lf=STACK.LOADED_FUNCS;this._customEvents=[];this._AjaxEventNames={'AjaxEnd':1,'AjaxComplete':1,'AjaxError':1};this.EXPR_LIVE_LIST=[];this.LIVE_LIST=[];this.LIVE_EVENTS='mousemove|mouseout|mouseover|mousedown|mouseup|mousewheel|DOMMouseScroll|click|keydown|keypress|keyup'}Event.prototype={set:function(a,b,c,d,e,f){var g=d||false,target=(a instanceof xElement)?a.get():a,closure,once=e||false,capture=f||false,df=this.df,lf=this.lf;if(this._AjaxEventNames[b]){this.ae[this.ae.length]=[target,b,c,g,once];return}else if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.add(target,b,c,g,once);return}if(b==='mousewheel'&&(!('onmousewheel'in body)&&ua.Opera)){b='DOMMouseScroll'}closure=this.__createClosure(target,b,c,g,once,capture);if(this.DRreg.test(b)){df[df.length]=[closure,g]}else if(b==='load'&&target===E){lf[lf.length]=[closure,g]}else{this.__set(target,b,closure,c,capture)}},once:function(a,b,c,d){this.set(a,b,c,d,true)},custom:function(a,b,c,d){var e=d||false,elm=(a instanceof xElement)?a.get():a,closure=this.__createWrap(a,c,e,b,false),ael='addEventListener',ce=this._customEvents;if(a[ael]){a[ael](b,closure,false)}ce[ce.length]=[a,b,c,closure,e];return},removeCustom:function(a,b,d){var c=this._customEvents,len=c.length,i=0,elm=(a instanceof xElement)?a.get():a,del='removeEventListener',dt='detachEvent';for(;i<len;i++){if(c[i][0]===elm&&c[i][1]===b&&(!d||c[i][2]===d)){if(elm[del]){elm[del](b,c[i][3],false)}else if(elm[dt]){elm[dt]('on'+b,c[i][3])}c.splice(i,1)}}},fire:function(a,b,d,f){var e,elm=(a instanceof xElement)?a.get():a,dp='dispatchEvent',fe='fireEvent';if(B.createEventObject){e=B.createEventObject();e.type=b}else if(B.createEvent){e=B.createEvent('Events');e.initEvent(b,true,true)}else{throw new Error('don\'t supports custom Event on your Browser');return}e.dataType=f;e.data=d;if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.dispatch(a,e);return}if(elm[dp]){elm[dp](e)}else if(elm[fe]){var c=EV.CUSTOM_EVENTS,len=c.length,i=0;for(i;i<len;i++){if(c[i][1]===b){c[i][2].call(c[i][3],new Base.event.__margeDOM2Event(c[i][0],e,d,f))}}}},live:function(a,b,c,d){var e=DOM.__fallbackQuery(a);this.exprLive(e,b,c,d||undefined,a)},exprLive:function(a,b,c,d,e){if(b.indexOf(this.LIVE_LIST)===-1){return}var f=d||false,closure=this.__createLiveClosure(c,f,b,a),ELL=this.EXPR_LIVE_LIST;this.__set(e||B,b,closure,c);ELL[ELL.length]=[b,c,a,closure,e||B]},deLive:function(a,b,c){var d=DOM.__fallbackQuery(a);this.exprdeLive(d,b,c,bindObj||undefined,a)},exprdeLive:function(a,b,c,d){var e=this.EXPR_LIVE_LIST,len=e.length,i=0,base=d||B;for(;i<len;i++){if(e[i]&&e[i][0]===b&&e[i][2]===a&&e[i][4]===base&&(!c||e[i][1]===c)){this.__remove([e[i][4],e[i][0],e[i][3]],i,e)}}},remove:function(a,b,c){var d=STACK.EVENT_HANDLERS,fnslen=d.length,i=fnslen-1,ind=-1;if(ut.isArray(b)){while(b[++ind]){if(b[i]){this.remove(a,b[i],c||undefined)}}return}if(this._AjaxEventNames[b]){this.__removeAjaxEvents(a,b,c);return}else if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.remove(a,b,c);return}for(;i>=0;i--){if(d[i][0]===a&&d[i][1]===b&&(!c||d[i][3]===c)){this.__remove(d[i],i,d)}}},__remove:function(a,b,c){var d='removeEventListener',de='detachEvent';if(a[0][d]){a[0][d](a[1],a[2],a[4])}else if(a[0][de]){a[0][de]('on'+a[1],a[2])}else{a[0]['on'+a[1]]=null}c.splice(b,1)},__isAlready:function(a,b,c){var d=STACK.EVENT_HANDLERS,fnslen=d.length,i=fnslen-1;for(;i>=0;i--){if(d[i][0]===a&&d[i][1]===b&&d[i][3]===c){return true}}return false},__createClosure:function(c,d,e,f,g,h){var i=this;return function(a){var b=new Base.event.__margeDOM2Event(c,a||E.event);if(g===true){Base.event.remove(c,d,e)}if(h&&enables.fixIE){E.event.useCapture=true}if(e.call(f||c,b)===false){b.preventDefault()}}},__createLiveClosure:function(b,c,d,f){var g=this;return function(a){var e=a||E.event,elm=e.target||e.srcElement,list=DOM.getElementsBySelector(f),len=list.length,i=0,evt=new g.__margeDOM2Event(elm,e);if(elm.nodeType===3){elm=elm.parentNode}for(;i<len;i++){if(list[i]===elm){if(b.call(c||elm,evt)===false){evt.preventDefault()}return}}}},__set:function(a,b,c,d,e){var f='addEventListener',at='attachEvent',EH=STACK.EVENT_HANDLERS;if(a[f]){a[f](b,c,e)}else if(a[at]){a[at]('on'+b,c)}else{a['on'+b]=c}EH[EH.length]=[a,b,c,d,e]},deleteAllEvent:function(){var a=STACK.EVENT_HANDLERS,len=a.length,i=0,t,e,f,del='removeEventListener',dt='detachEvent';for(;i<len;i++){t=a[i][0];e=a[i][1];f=a[i][2];if(!t||!e||!f){continue}if(t[del]){t[del](e,f,a[4])}else if(t[dt]){t[dt]('on'+e,f)}else{t['on'+e]=null}}STACK.EVENT_HANDLERS=[]},__execDOM:function(){J.DOM_LOADED=true;J.DOM_CREATE_TIME=(new Date()).getTime()-J.INITIAL_TIME;STACK.BODY=STACK.HTML=body=B.body;var b=STACK.API_STACK,apilen=b.length,s,css=STACK.CSS_STACK,csslen=css.length,a=0,tmp,f=STACK.DOM_LOADED_FUNCS,len2=f.length;if(apilen>0){for(a=0;a<apilen;a++){apiLoad('script',b[a][0])}}for(a=0;a<csslen;a++){apiLoad('css',css[a][0],css[a][1]||null)}for(a=0;a<len2;a++){f[a][0]()}if(ut.isFunction(J.START_CONTROLLER)){J.START_CONTROLLER()}},__execLoad:function(e){J.WINDOW_LOADED=true;J.WINDOW_LOADED_TIME=(new Date()).getTime()-J.INITIAL_TIME;var f=STACK.LOADED_FUNCS,len=f.length,i=0;for(;i<len;i++){f[i][0]()}},__margeDOM2Event:function(a,c,d,e){if((!ua.IE&&!ua.Safari)||ua.IE9){return c}var f=ut.getScrollPosition(),b=c.button;this.__nativeEV=c;this.type=c.type;this.data=c.data||d||null;this.dataType=c.dataType||e||null;this.target=c.target||c.srcElement;if(this.target&&this.target.nodeType&&this.target.nodeType===3){this.target=this.target.parentNode}this.currentTarget=a;this.relatedTarget=c.relatedTarget||(c.type==='mouseover')?c.fromElement:c.toElement||undefined;this.keyCode=c.keyCode;this.shiftKey=c.shiftKey;this.ctrlKey=c.ctrlKey;this.propertyName=c.propertyName||undefined;this.pageX=c.pageX||(c.clientX+f.x);this.pageY=c.pageY||(c.clientY+f.y);this.clientX=c.clientX;this.clientY=c.clientY;this.detail=c.wheelData||c.detail;if(ua.IE){this.button=(b==4)?1:(b==1)?0:b;this.which=(b==4)?2:(b==2)?3:b;this.stopPropagation=function(){this.__nativeEV.cancelBubble=true};this.preventDefault=function(){this.__nativeEV.returnValue=false}}else{this.button=c.button;this.which=c.which;this.stopPropagation=function(){c.stopPropagation()};this.preventDefault=function(){c.preventDefault()}}},toString:function(){return'[ Class Event ]'}};function CustomEvent(){this._customs={};this._customsStack={}}CustomEvent.prototype={regist:function(a,b,c){if(!a||!b){throw Error('parameters not enough at CustomEvent.regist.');return}this._customs[a]={type:b,fn:c}},destroy:function(a){if(a in this._customs){delete this._customs[a]}},add:function(a,b,c,d,e){if(!this._customs[b]){return}var f=this._customs[b],CES=this._customsStack,ael='addEventListener',ate='attachEvent',closure=this.__createCustomClosure(a,b,c,f.fn,d,e),stack={target:a,type:b,closure:closure,listener:c,isOnce:e||false};if(a[ael]){a[ael](f.type,closure,false)}else if(a[ate]){a[ate]('on'+f.type,closure)}else{a['on'+f.type]=closure}if(CES[b]){CES[b][CES[b].length]=stack}else{CES[b]=[stack]}},remove:function(a,b,c){if(!this._customs[b]||(!this._customsStack[b]||this._customsStack[b].length===0)){return}var d=this._customsStack[b],CE=this._customs[b],i=d.length,rel='removeEventListener',dte='detachEvent',S;while(d[--i]){S=d[i];if(S.target===a&&(!c||(c&&S.listener===c))){if(a[rel]){a[rel](CE.type,S.closure,false)}else if(a[dte]){a[dte]('on'+CE.type,S.closure)}else{a['on'+CE.type]=null}d.splice(i,1)}}},dispatch:function(a,b){if(!this._customs[type]||(!this._customsStack[type]||this._customsStack[type].length===0)){return}var c=this._customsStack[type],CE=this._customs[type],i=c.length,S;while(c[--i]){S=c[i];if(S.target===a){S.closure(b)}}},__createCustomClosure:function(c,d,e,f,g,h){var i=this;return function(a){var b=a||E.event;if(f(c,b)===true){e.call(g,new Base.event.__margeDOM2Event(c,b));if(h){i.remove(c,d,e)}}}},toString:function(){return'[class CustomEvent]'}};function Loader(){this.ap={};this.apcs={};this.instanced=STACK.INSTANCED_API;this.appPath=CORE_CONFIG.APPPATH;this.swfDefaultOptions={scale:'noScale',salign:'lt',menu:false,wmode:'transparent'}}Loader.prototype={config:function(a){if(ut.isString(a)&&!(a in this.ap)){this.__loadAPI(this.appPath+'config/'+a+'js')}},helper:function(a){var i=0,len,hp=CORE_CONFIG.globalNames.Helper,loadName;if(ut.isArray(a)){for(len=a.length;i<len;i++){this.helper(a[i])}return}else if(typeof a==='string'){loadName=a.replace('_helper','')+'_helper';if(loadName in this.ap){return}if(hp!=''&&!E[hp]){E[hp]={}}if(!E.functionExists){E.functionExists=ut.exists}this.__loadAPI(this.appPath+'helpers/'+loadName+'.js',loadName,'h')}},library:function(a){this.__lbLoad(a,'libraries/','l')},model:function(a){this.__lbLoad(a,'models/','mo')},__lbLoad:function(a,b,c){var i,len;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.__lbLoad(a[i],b,c)}return}else if(typeof a==='string'){if(a in this.ap){if(this.instanced[a]){Controller[a]=this.instanced[a];return}}else{this.__loadAPI(this.appPath+b+a+'.js',a,c)}STACK.API_READY[a]=false}},module:function(a){var i,len,m;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.module(a[i])}return}else if(typeof a==='string'){m=CORE_CONFIG.globalNames.Module;if(!E[m]){E[m]=Module}if(a in this.ap){return}if(MODULES.hasOwnProperty(a)){if(!Module[a]){Module[a]=MODULES[a]}this.ap[a]=true}else{this.__loadAPI(this.appPath+'modules/'+a+'.js',a,'m')}}STACK.MODULE_READY[a]=false},css:function(a,b){if(a in this.apcs){return}this.__loadCSS(this.appPath+'fl_css/'+a+'.css',a,b||false)},ajax:function(){if(!Controller.ajax){Controller.ajax=new AjaxInit()}},view:function(b,c,d){if(!Controller.ajax){this.ajax()}Controller.ajax.get(b,{async:!!!d,success:function(a){DOM(c).append(a.responseText)}})},plugin:function(a){var i=-1,len;if(ut.isArray(a)){while(a[++i]){this.plugin(a[i])}}else if(typeof a==='string'){if(!(a in this.ap)){this.__loadAPI(this.appPath+'plugins/'+a+'.js',a,'p')}}},__loadAPI:function(a,b,c,d){var e=STACK.API_STACK;this.ap[b]=b;if(J.DOM_LOADED){apiLoad('script',a)}else if(/mo|h|p/.test(c)){B.write('<script type="text\/javascript" src="'+a+'" charset="UTF-8"><\/script>')}else{e[e.length]=[a,b,c,d||0]}},__loadCSS:function(a,b,c){var d,SCS=STACK.CSS_STACK;if(J.DOM_LOADED){apiLoad('css',a,c||null)}else if(ua.IE&&!ua.IE9){d=['<link rel="stylesheet" type="text/css" href="',a,'"'];if(c){d[d.length]=' media="',c,'"'}d[d.length]=' />';B.write(d.join(''))}else{SCS[SCS.length]=[b,c||null];this.apcs[b]=true}},language:function(a){var b=([this.appPath,'languages/',(CORE_CONFIG.language||'japanese'),'.js']).join('');if(J.DOM_LOADED){apiLoad('script',b)}else{B.write('<script type="text\/javascript" src="'+b+'" charset="UTF-8"><\/script>')}J.languages={}},__swfInit:function(){this.swfDefaultOption={scale:'noScale',salign:'lt',menu:false,wmode:'transparent'}},swf:function(a,b,c,d){this.__swfInit();if(arguments.length<1){throw TypeError('not enough arguments of Loader.swf');return}var e=B.createElement('object'),str=['<object '],op=c||{},opt=union(this.swfDefaultOption,op||{}),flvar=ut.toURIParams(op.param||op.flashVars||{}),p,i;if(!d){e.width=op.width||600;e.height=op.height||400;if(b){e.id=b}for(i in opt){p=B.createElement('param');p.name=i;p.value=opt[i];e.appendChild(p)}if(flvar!==''){p=B.createElement('param');p.name='FlashVars';p.value=flvar;e.appendChild(p)}if(ua.IE){p=B.createElement('param');p.name='movie';p.value=a;e.appendChild(p);e.setAttribute('classid','clsid:D27CDB6E-AE6D-11cf-96B8-444553540000')}else{e.type='application/x-shockwave-flash';e.data=a}e.style.visibility='visible';if(op.width){e.style.width=op.width+'px'}if(op.height){e.style.height=op.hjeight+'px'}return DOM(e)}else{str[str.length]='style="visibility:visible;width:'+(op.width||600)+'px;height:'+(op.height||400)+'px" ';if(b){str[str.length]='id="'+b+'" '}if(ua.IE){str[str.length]='classid="clsid:D26CD863-AE6D-11cf-9688-44453540000">'}else{str[str.length]='type="application/x-shockwave-flash" data="',a,'">'}for(i in opt){str[str.length]='<param name="',i,'" value="',opt[i],'" />'}if(flvar!==''){str[str.length]='<param name="FlashVars" value="',flvar,'" />'}str[str.length]='</object>';return str.join('')}},_fl_autoLoader:function(){var C=CORE_CONFIG,path=C.APPPATH,boost,pls=C.usePlugins;if(C.useProfiler===true){C.autoLoadModule[C.autoLoadModule.length]='flint_profiler';Controller.image.preLoad([path+'fl_images/fl_tree_marker_close.gif',path+'fl_images/fl_tree_marker.gif'])}if(C.useBuiltinClassExtend){pls[pls.length]='prototype_extend'}if(enables.needFixBrowserIE){for(boost in C.IEboost){if(!boost.isPrototypeOf(C.IEboost)&&C.IEboost[boost]===true){pls[pls.length]='ie-ignite';break}}}if(pls.length>0){this.plugin(pls)}if(C.autoLoadHelper.length>0){this.helper(C.autoLoadHelper)}if(C.autoLoadModule.length>0){this.module(C.autoLoadModule)}if(C.autoLoadModel.length>0){this.model(C.autoLoadModel)}if(C.autoLoadLibrary.length>0){this.library(C.autoLoadLibrary)}},toString:function(){return'[ Class Loader ]'}};function FL_Image(){}FL_Image.prototype={preLoad:function(a){var i,len,IMG;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.preLoad(a[i])}return}else if(typeof a==='string'){IMG=new Image();IMG.src=a}},getDefaultSize:function(a){var b,oldH,def;if(a.naturalWidth&&a.naturalHeight){return{width:a.naturalWidth,height:a.naturalHeight}}else if(a.runtimeStyle){b=a.runtimeStyle.width;oldH=a.runtimeStyle.height;a.runtimeStyle.width=a.runtimeStyle.height='auto';def={width:a.width,height:a.height};a.runtimeStyle.width=b;a.runtimeStyle.height=oldH;return def}else{return{width:a.width,height:a.height}}},toString:function(){return'[ Class FL_Image ]'}};function Language(){}Language.prototype={load:function(a){Controller.load.language(a)},line:function(a){return J.languages[a]||a},toString:function(){return'[ Class Language ]'}};function AjaxInit(){this.timeout=CORE_CONFIG.AjaxTimeout||30000;this.state={};this.maxConnection=CORE_CONFIG.AjaxMaxConnection;this.queue=STACK.AJAX_QUEUE}AjaxInit.prototype={__getDefaultOptions:function(m){return{method:null,param:'',success:null,error:null,async:true,start:null,abort:null,header:null,cache:false,bind:null,timeout:this.timeout}},__createXHR:function(){var x;if(E.XMLHttpRequest){return new XMLHttpRequest()}else if(E.ActiveXObject){try{x=new ActiveXObject('Msxml2.XMLHTTP')}catch(e){try{x=new ActiveXObject('Microsoft.XMLHTTP')}catch(e){}}if(!x){throw Error('XHR don\'t sucport on your browser.');return}return x}},setQueue:function(a,b,c){var d=+new Date(),M=this.maxConnection,q=this.queue,wait=(M===0||q.length>=M);q[q.length]={stable:wait,type:a,url:b,opt:c,qID:d};return!wait},__doNextQueue:function(){var a=this.queue,len=a.length,i=0,q,isEmpty=true;for(;i<len;i++){if(a[i].stable===true){a[i].stable=isEmpty=false;this.__connect(a[i].type,a[i].url,a[i].opt,a[i].opt.param);return}}if(isEmpty===true){this.queue=[]}},__getWrappedResponse:function(b){return{responseText:b.responseText,responseXML:b.responseXML,getResponseArray:function(a){return b.responseText.split(a)},getAllHeaders:function(){var a=b.getAllResponseHeaders().split(/\n/),hd={},len=a.length,i=0,h,p;for(;i<len;i++){if(a[i].length===0){continue}h=a[i];p=h.indexOf(':');hd[tr(h.slice(0,p))]=ut.trim(h.slice(p+1))}return hd}}},get:function(a,b){var p=[],i,j,len,ob,o=union(this.__getDefaultOptions(),b||{});if(ut.isObject(o.param)){ob=o.param;for(i in ob){if(ut.isArray(ob[i])){for(j=0,len=ob[i].length;j<len;j++){p[p.length]=enc(i)+'='+enc(ob[i][j])}}else{p[p.length]=enc(i)+'='+enc(ob[i])}}o.param=p.join('&')}a=this.__buildURL(a,o.param,'get');if(!this.setQueue('GET',a,o)){return}return this.__connect('GET',a,o,null)},post:function(a,b){var p=[],i,j,len,ob,o=union(this.__getDefaultOptions(),b||{});if(ut.isObject(o.param)){ob=o.param;for(i in ob){if(i.isPrototypeOf(ob)){continue}if(ut.isArray(ob[i])){for(j=0,len=ob[i].length;j<len;j++){p[p.length]=enc(i)+'[]='+enc(ob[i][j])}}else{p[p.length]=enc(i)+'='+enc(ob[i])}}o.param=(p.length>0)?p.join('&'):null}a=this.__buildURL(a,null,'post');if(!this.setQueue('POST',a,o)){return}return this.__connect('POST',a,o,o.param)},head:function(a,b){var c=this,xhr=this.__createXHR(),timer,o=union(this.__getDefaultOptions(),b||{});this.state.request='HEAD';a=this.__buildURL(a,null,'head');xhr.open('HEAD',a,true);this.state.text='LOADING';xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');o.url=a;timer=setTimeout(function(){c.stop(xhr,o)},this.timeout);xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(timer);if(ut.isFunction(o.success)){if(o.bind){o.success(xhr)}else{o.success.call(o.bind,xhr)}}xhr.onreadystatechange=null;xhr=null}};xhr.send(null);return DefferdState(this)},jsonp:function(b,c,d){if(!b||!c){throw new TypeError('not enough argument on JSONP.');}var f=this,s,bindObj=d||false,tmpSetJSONPTimeStamp=+new Date(),cfn=function(a){if(bindObj){c.call(bindObj,a)}else{c(a)}try{delete E['FlintJSONPCallBack'+tmpSetJSONPTimeStamp]}catch(e){E['FlintJSONPCallBack'+tmpSetJSONPTimeStamp]=undefined}finally{head.removeChild(B.getElementById('flintjsonpscript'+tmpSetJSONPTimeStamp))}};E['FlintJSONPCallBack'+tmpSetJSONPTimeStamp]=cfn;s=B.createElement('script');s.type='text/javascript';s.src=this.__buildURL(b,'FlintJSONPCallBack'+tmpSetJSONPTimeStamp,'jsonp');s.id='flintjsonpscript'+tmpSetJSONPTimeStamp;head.appendChild(s);return DefferdState(this)},request:function(a){var b=union(this.__getDefaultOptions(),a),m;if(!a.url||!a.method){throw Error('not enough parameter.');}switch(a.method.toLowerCase()){case'get':return this.get(a.url,a);break;case'post':return this.post(a.url,a);break;case'jsonp':return this.jsonp(a.url,a.success);break;case'head':return this.head(a.url,a);break;default:throw Error('undefined request method');}},__buildURL:function(a,b,c){if(!/^http|^file|^\.\.?\//.test(a)){a=CORE_CONFIG.SITE_URL+a}if(c==='get'&&b){a+=(!/segment|config|/.test(CORE_CONFIG.routingMode))?((/\?/.test(a))?'&'+b:'?'+b):((/\/$/.test(a))?b.replace(/[=&]/g,'/'):'/'+b.replace(/[=&]/g,'/'))}else if(c==='jsonp'){a+=(/\?$/.test(a))?'callback='+b:(/\?/.test(a))?'&callback='+b:'?callback='+b}return a},__connect:function(a,b,o,c){var d=this,xhr=this.__createXHR(),timer,h,j;this.state.request=a;xhr.open(a,b,o.async);if(ut.isFunction(o.start)){if(o.bind){o.start.call(o.bind)}else{o.start()}}this.state.text='LOADING';xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');if(a==='POST'){xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')}if(ut.isObject(o.header)){h=o.header;for(j in h){if(!j.isPrototypeOf(h)){xhr.setRequestHeader(j,h[j])}}}if(!o.cache){xhr.setRequestHeader('If-Modified-Since',"01 Jan 1970 00:00:00 GMT");xhr.setRequestHeader('Cache-Control','no-store, no-chache, must-revalidate, post-check=0, pre-check=0');xhr.setRequestHeader('Pragma','no-cache');xhr.setRequestHeader('Expires','Mon, 26, Jul, 1997, 05:00:00 GMT')}o.url=b;timer=E.setTimeout(function(){d.stop(xhr,o)},o.timeout);if(o.async){if(enables.xhr){xhr.onreadystatechange=function(){d.__loadedFunc(xhr,o,timer)}}else{E.setTimeout(function(){d.__loadedFunc(xhr,o,timer)},10)}}xhr.send(c);o._defferd=DefferdState(this);o._defferd.abort(function(){d.stop(xhr,o)});if(!o.async){this.__loadedFunc(xhr,o,timer)}return o._defferd},__loadedFunc:function(a,o,b){var c=this,RES=J.XHR_RESPONSES,resp=null;c.state.code=a.readyState;if(a.readyState==4){try{E.clearTimeout(b)}catch(e){}c.state.text='COMPLETED';if(a.status==200||(/^file/.test(o.url))){c.state.httpResponse='LOADED';resp=c.__getWrappedResponse(a);if(ut.isFunction(o.success)){if(o.bind){o.success.call(o.bind,resp)}else{o.success(resp)}}c.__doAjaxEvent('AjaxComplete',resp,o,a);o._defferd.success()}else{c.state.httpResponse=RES.STATUS[a.Status]||999;if(ut.isFunction(o.error)){if(o.bind){o.error.call(o.bind,c.__getWrappedResponse(a))}else{o.error(c.__getWrappedResponse(a))}}c.__doAjaxEvent('AjaxError',resp,o,a);o._defferd.failed()}c.__doAjaxEvent('AjaxEnd',resp,o,a);c.__doNextQueue();c.opt={};if(enables.xhr){a.onreadystatechange=null}a=null}else if(!enables.xhr){try{E.clearTimeout(b)}catch(e){}b=E.setTimeout(function(){c.__loadedFunc(a,o,b)},10)}},stop:function(a,o){a.abort();if(ut.isFunction(o.stop)){if(o.bind){o.stop.call(o.bind)}else{o.stop()}}this.__doAjaxEvent('AjaxError',null,o,a);this.__doAjaxEvent('AjaxEnd',null,o,a);o._defferd.abort()},__doAjaxEvent:function(a,b,o,c){var d=STACK.AJAX_EVENTS,len=d.length,i=0,callFn,e;for(;i<len;i++){if(d[i][1]===a){d[i][2].call(d[i][3],new this.__AjaxFakeEvent(a,d[i][0],c,b,o));if(d[i][4]===true){d.splice(i,1)}}}},__AjaxFakeEvent:function(a,b,c,d,p){this.type=a;this.data=d;this.target=c;this.params=p;this.currentTarget=b;this.relatedTarget=null;this.keyCode=null;this.shiftKey=false;this.ctrlKey=false;this.which=null;this.button=0;this.propertyName=undefined;this.pageX=0;this.pageY=0;this.clientX=0;this.clientY=0;this.stopPropagation=returnFalse;this.preventDefault=returnFalse},toString:function(){return'[ Class Ajax ]'}};function Extends(a,b){var c;if(typeof a!=='string'){throw Error('Extend Class must be string!');return}c=a.toLowerCase();if(this[c]){this[c](b,c)}else{throw new TypeError('undefined extend Class on ClassExtend.');}}Extends.prototype={config:function(a){var p;if(ut.isObject(a)){for(p in a){if(!p.isPrototypeOf(a)&&!CORE_CONFIG[p]){CORE_CONFIG[p]=a[p]}}}},element:function(a){this.__extend(a,xElement.prototype)},nodelist:function(a){this.__extend(a,xNodeList.prototype)},elementlist:function(a){this.__extend(a,xNodeList.prototype)},effect:function(a){this.__extend(a.Animation)},__extend:function(a,b){var p;if(ut.isFunction(a)){a=new a()}if(ut.isObject(a)){for(p in a){if(!p.isPrototypeOf(a)){b[p]=a[p]}}}},controller:function(a){var b,i,Method;a.prototype=Controller;b=new a();J.CONTROLLER=b;if(CORE_CONFIG.routingMode==='none'){E[J.CONTROLLER_NAME]=b}if(b.hasOwnProperty('__construct')){b.__construct()}Method=b.router.fetchMethod();J.EXEC_METHOD=(Method==='none')?'index':Method;function startup(){if(b.hasOwnProperty('_remap')){b._remap(Method)}else if(b.hasOwnProperty(Method)&&/^[_]/.test(Method)===false){b[Method].call(b,J.METHOD_ARGUMENTS)}else{if(CORE_CONFIG.debugMode){throw Error(Method+' is undefined or private');}}J.START_CONTROLLER=null}if(!J.DOM_LOADED){J.START_CONTROLLER=startup}else{startup()}},language:function(a){J.languages=a}};Extends.prototype.model=Extends.prototype.library=function(b,c){var d=ut.getExecuteNames(b),tmp,i,a=STACK.API_READY_FUNC[d.bindName],len,CON=J.CONTROLLER||Controller;if(c==='model'){b.prototype=Model}tmp=STACK.INSTANCED_API[d.name]=new b();if(tmp.__construct){tmp.__construct()}tmp.parent=CON;CON[d.name]=tmp;STACK.API_READY[d.name]=true;if(a){for(i=0,len=a.length;i<len;i++){a[i]()}a=null}};function Router(){this._controllerName='';this._directoryName='';this._methodName='';this._conf=CORE_CONFIG;this._uri=loadClass('URI');this.__setRouting()}Router.prototype={__setRouting:function(){switch(this._conf.routingMode){case'none':this._controllerName=this._conf.globalNames.Controller;this._methodName='none';break;case'segment':var l,arg,argC=2,uri=this._uri.uri,base=this._conf.SITE_URL,point;l=uri.replace(base,'');arg=(l==='')?[this._conf.defaultController,'index']:l.split('/');while(ut.inArray(arg[0],this._conf.directoryList)){arg[0]=arg[0]+'/'+(arg[1]||'');arg.splice(1,1)}if(!arg[1]){arg[1]='index'}point=arg[0].lastIndexOf('/');if(point===-1){this._controllerName=arg[0];this._directoryName=''}else{this._directoryName=arg[0].slice(0,point)+'/';this._controllerName=arg[0].slice(point+1)}this._methodName=arg[1];while(arg[argC]){J.METHOD_ARGUMENTS[arg[argC-2]]=arg[argC];argC++}break;case'config':this._controllerName=(this._conf.loadController)?this._conf.loadController:this._conf.defaultController;this._methodName=(this._conf.execMethod)?this._conf.execMethod:'index';break;default:break}},fetchDirectory:function(){return this._directoryName},fetchClass:function(){return this._controllerName},fetchMethod:function(){return this._methodName},toString:function(){return'[ Class Router ]'}};function FL_Base(){this.instance=this}FL_Base.prototype={getInstance:function(){return this.instance}};function _Controller(){this._flInitialize()}_Controller.prototype={_flInitialize:function(){var a={config:'Config',benchmark:'BenchMark',uri:'URI',lang:'Language',router:'Router',event:'Event',ut:'Utility',load:'Loader',image:'FL_Image',input:'Input',customEvent:'CustomEvent'},i;for(i in a){this[i]=loadClass(a[i])}this.ua=ua;this.ready=ready;this.union=union;this.alias=alias;this.connect=connect;this.disConnect=disConnect;this.DOM=DOM;this.Module=Module;this.system=J;this.Timer=Timer;this.json=E.JSON||loadClass('Json');this.Animation=Animation;this.defferd=DefferdInit},__load:function(a){var s;if(!J.DOM_LOADED){B.write('<script type="text\/javascript" src="'+a+'" charset="UTF-8"><\/script>')}else{apiLoad('script',a)}}};function _Model(){this.__construct()}_Model.prototype={__construct:function(){var a={config:'Config',benchmark:'BenchMark',uri:'URI',ajax:'AjaxInit',lang:'Language',router:'Router',event:'Event',ut:'Utility',load:'Loader',ua:'UserAgent'},i;for(i in a){this[i]=loadClass(a[i])}this.union=union;this.alias=alias;this.connect=connect;this.json=E.JSON||loadClass('Json');this.disConnect=disConnect}};function Module(a){var M=E[CORE_CONFIG.globalNames.Module],MM=M[a],ag=arguments,k=0,ind=-1,m=[];if(!MM){return}while(ag[++k]){m[++ind]=ag[k]}return MM.apply(MM,m)}Module.ready=function(a,b){var c=STACK.MODULE_READY,mrf=STACK.MODULE_READY_FUNC;if(c[a]&&c[a]===true){b()}else{if(!mrf[a]){mrf[a]=[b]}else{mrf[a].push(b)}}};Module.attach=function(a){var i;if(typeof a==='function'){Module[ut.getRealName(a)]=a}else if(typeof a==='object'){for(i in a){if(!i.isPrototypeOf(a)){Module[i]=a[i]}}}};Module.onReady=function(a){var b=STACK.MODULE_READY,mrf=STACK.MODULE_READY_FUNC,ind=-1;if(!b[a]||b[a]===false){b[a]=true}if(mrf[a]){if(ut.isArray(mrf[a])){while(mrf[a][++ind]){mrf[a][ind]()}mrf[a]=[]}else{mrf[a]()}}};function FL_Color(a,b){this.R=0;this.G=0;this.B=0;this.A=null;this.regex=COLOR_REGEX;this.__construct(a,b)}FL_Color.prototype={__construct:function(a,b){c=a.replace(/\s/g,'');if(b){this['__parse'+b.toUpperCase()](c);return}if(this.regex.hex.test(c)){this.__parseHEX(c)}else if(this.regex.rgb.test(c)){this.__parseRGB(c)}else if(this.regex.rgba.test(c)){this.__parseRGBA(c)}else if(this.regex.hsl.test(c)){this.__parseHSL(c)}else if(this.regex.hsla.test(c)){this.__psrseHSLA(c)}else{throw TypeError('invalid color format on Fl_Color. color is '+c);}},getAlpha:function(){return this.A},setAlpha:function(a){this.A=pf(a)},hasAlpha:function(a){return this.A!==null},toHex:function(){return['#',this.R.toString(16),this.G.toString(16),this.B.toString(16)].join('')},toRGB:function(){return['rgb(',this.R,',',this.G,',',this.B,')'].join('')},toRGBA:function(){return['rgba(',this.R,',',this.G,',',this.B,',',this.A.toFixed(1),')'].join('')},toHSL:function(){var h=0,s=0,l=0,r=this.R/255,g=this.G/255,b=this.B/255,max=Math.max(r,g,b),min=Math.min(r,g,b),mm=max+min,c=max-min,mr=Math.round;if(r===g&&r===b){h=0;s=0;l=r}else{l=mm/2;s=(l<=0.5)?c/mm:c/(2-mm);h=((r===max)?(g-b)/c:(g===max)?2+(b-r)/c:(b===max)?4+(r-g)/c:0)*60;h/=6;if(h<0){++h}h=(h<0)?0:(h>1)?1:h;s=(s<0)?0:(s>1)?1:s;l=(l<0)?0:(l>1)?1:l}return['hsl(',mr(h*360),',',mr(s*100),'%,',mr(l*100),'%',')'].join('')},toHSLA:function(){return this.toHSL().replace(')',','+this.A.toFixed(1)+')')},__parseHEX:function(a){var b=b,c=a.slice(1);r1,r2,r3;if(c.length===3){r1=c.slice(0,1);r2=c.slice(1,2);r3=c.slice(2)}else{r1=c.slice(0,2);r2=c.slice(2,4);r2=c.slice(4)}this.R=b(r1,16);this.G=b(r2,16);this.B=b(r3,16)},__parseRGB:function(a){var m=a.match(this.regex.rgb);this.R=m[1];this.G=m[2];this.B=m[3]},__parseRGBA:function(a){var m=a.match(this.regex.rgba);this.R=m[1];this.G=m[2];this.B=m[3];this.A=pf(m[4])},__parseHSL:function(a){var m=a.match(this.regex.hsl),h=pi(m[1],10)/360,s=pf(m[2]/100),l=pf(m[3]/100),r1,g1,b1,s1,s2,r,g,b,c;if(s===0){r=g=b=1}else{s2=(l<0.5)?l*(1+s):(l+s)-(l*s);s1=2*l-s2;r1=h+1/3;if(r1>1){--r1}g1=h;b1=h-1/3;if(b1<0){++b1}c=s1+(s2-s1)*6;r=(r1<1/6)?c*r1:(r1<0.5)?s2:(r1<2/3)?c*((2/3)-r1):s1;g=(g1<1/6)?c*g1:(g1<0.5)?s2:(g1<2/3)?c*((2/3)-g1):s1;b=(b1<1/6)?c*b1:(b1<0.5)?s2:(b1<2/3)?c*((2/3)-b1):s1}this.R=r*255;this.G=g*255;this.B=b*255},__parseHSLA:function(a){var m=a.match(this.regex.hsla),h=pi(m[1],10)/360,s=pf(m[2]/100),l=pf(m[3]/100),r1,g1,b1,s1,s2,r,g,b,c;if(s===0){r=g=b=1}else{s2=(l<0.5)?l*(1+s):(l+s)-(l*s);s1=2*l-s2;r1=h+1/3;if(r1>1){--r1}g1=h;b1=h-1/3;if(b1<0){++b1}c=s1+(s2-s1)*6;r=(r1<1/6)?c*r1:(r1<0.5)?s2:(r1<2/3)?c*((2/3)-r1):s1;g=(g1<1/6)?c*g1:(g1<0.5)?s2:(g1<2/3)?c*((2/3)-g1):s1;b=(b1<1/6)?c*b1:(b1<0.5)?s2:(b1<2/3)?c*((2/3)-b1):s1}this.R=r*255;this.G=g*255;this.B=b*255;this.A=m[4]}};function DefferdState(a,b){if(a instanceof _Defferd){a._appoint=b;return a}var c=(a instanceof AjaxInit||a instanceof Animation),state={success:!c,failed:!c,abort:!c};return new _Defferd(a,state,b||0)}DefferdState.prototype={};function _Defferd(a,b,c){this._state=b;this._instance=a;this.__isLocked=false;this._appoint=c;this._callbacks={success:[],failed:[],abort:[]}}_Defferd.prototype={success:function(a){return this.__registOrFire('success',a)},failed:function(a){return this.__registOrFire('failed',a)},abort:function(a){return this.__registOrFire('abort',a)},__registOrFire:function(a,b){var i=-1,c=this._callbacks[a];if(typeof b==='undefined'){this.__updateState(a)}else if(ut.isFunction(b)){c[c.length]=b}else if(ut.isArray(b)){while(b[++i]){c[c.length]=b[i]}}return this},isSuccess:function(){return this._state.success},isFailed:function(){return this._state.failed},isAbort:function(){return this._state.abort},__updateState:function(a){if(this.__isLocked){return}this.__isLocked=true;this._state[a]=true;var i=-1,c=this._callbacks[a];while(c[++i]){c[i]()}if(this._appoint>0){FL_Defferd.meet(this._appoint,a)}},toString:function(){return'[class DefferdState]'}};function FL_Defferd(a){var i=-1,ary=[],q=++DEFFERD_ID;while(a[++i]){ary[ary.length]=DefferdState(a[i],q)}this._callbacks={success:null,failed:null,abort:null};this.__locked=false;this._ary=ary;STACK.DEFFERD[q]=this;return this}FL_Defferd.meet=function(a,b){if(!(a in STACK.DEFFERD)||this.__locked===true){return}var D,flag,i=-1,SD=STACK.DEFFERD[a],st=SD._ary,cb=SD._callbacks;switch(b){case'success':flag=true;while(st[++i]){D=st[i]._state;if(D.success!==true){flag=false}}break;default:flag=false;while(st[++i]){D=st[i]._state;if(D[b]===true){flag=true;break}}break}if(flag===true&&ut.isFunction(cb[b])){cb[b]();this.__locked=true}};FL_Defferd.prototype={success:function(a){this._callbacks.success=a},failed:function(a){this._callbacks.failed=a},abort:function(a){this._callbacks.abort=a},toString:function(){return'[class FL_Defferd]'}};DOM=function(a,p){var e,i=-1,ret=[],SE=STACK.ELEMENTS;if(!a){body?STACK.ELEMENTS[body.__exid]||new xElement(body,null):null}else if(a===B||a===window||a instanceof xElement||a instanceof xNodeList){return a}else if(a.nodeType&&a.nodeType===1){a.__exid=a.__exid||++EXID;if(a.__exid&&SE[a.__exid]){return SE[a.__exid]}else{e=new xElement(a,p||null);SE[a.__exid]=e;return e}}else if(a.length&&a.item&&!a.slice){while(a[++i]){ret[i]=a[i]}return new xNodeList(ret,p||null)}else if(ut.isArray(a)){while(a[++i]){if(a[i].nodeType&&a[i].nodeType===1){ret[ret.length]=a[i]}}return new xNodeList(ret,p||null)}else if(typeof a==='string'){return new xNodeList(DOM.getElementsBySelector(a,p||null))}else{throw TypeError('invalid argument type called DOM.');}};DOM.id=function(a){var b;if(typeof a!=='string'){return null}b=B.getElementById(a);return b&&!b.__ignore?STACK.ELEMENTS[b.__exid]||new xElement(b):null};DOM.className=function(v,a){var b=B.getElementsByClassName(v),r=[],ind=-1,i=0;while(b[i]){if(b[i]&&!b[i].__ignore){r[++ind]=b[i]}++i}return new xNodeList(r)};if(!B.getElementsByClassName){DOM.className=function(v,a){var b=B.getElementsByTagName(a||'*'),r=[],ind=-1,i=0;if(enables.canASCall){r=Array.prototype.slice.call(b)}else{while(b[i]){if(b[i]&&b[i].nodeType&&b[i].nodeType===1&&!b[i].__ignore){r[++ind]=b[i]}++i}}return new xNodeList(DOM.hasClass(r,v))};DOM.hasClass=function(a,b){var c=[],len=a.length,cName=' '+b+' ',e,cl,ind=-1,i=0;for(;i<len;i++){e=a[i];cl=' '+e.className+' ';if(cl.indexOf(cName)!==-1){c[++ind]=e}}return c}}DOM.tag=function(a,b){var n=b||B,nl=n.getElementsByTagName(a||'*'),i=0,e,r=[],ind=-1;while(nl[i]){e=nl[i];if(e&&e.nodeType&&e.nodeType===1&&!e.__ignore){r[++ind]=e}++i}return new xNodeList(r)};DOM.byName=function(a){var b=B.getElementsByName(a),i=0,r=[],ind=-1,e;if(enables.canASCall){r=Array.prototype.slice.call(b)}else{while(b[i]){e=b[i];if(e&&e.nodeType&&e.nodeType===1&&!e.__ignore){r[++ind]=e}++i}}return new xNodeList(r)};DOM.css=function(a,b){var c=this.getElementsBySelector(a,B,!!b);return new xNodeList(c)};DOM.origCSS=function(a){var b=this.getElementsBySelector(a,B,true);return new xNodeList(b)};DOM.create=function(a,b){var e=new xElement(B.createElement(a)),i;if(b&&typeof b==='object'){for(i in b){e.attr(i,b[i])}}return e};DOM.fallbackQuery=function(e){if(e===B||e===E){return''}var a,id,q,ind=-1,resQ=[];do{q=[e.tagName.toLowerCase()];if(e.id){q[q.length]='#'+e.id}if(e.className){q[q.length]='.'+e.className.replace(' ','.')}resQ[++ind]=q.join('');e=e.parentNode}while(e!==B);return resQ.reverse().join(' > ')};(function(){var g=enables,tReg=/^\s+|\s+$/,SE=[[/^[\*]$/,'universal'],[/^\w*\[.+\]$/,'attribute'],[/^\w*\.[\w\-_\$]+$/,'class'],[/^\w*\#[\w\-_\$]+$/,'id']],SF=[[/^root$/,_root],[/^nth-child\(.+\)$/,_nthChild],[/nth-last-child\(.+\)$/,_nthLastChild],[/nth-of-type\(.+\)$/,_nthOfType],[/nth-last-of-type\(.+\)$/,_nthLastOfType],[/first-child$/,_firstChild],[/last-child$/,_lastChild],[/first-of-type$/,_firstOfType],[/last-of-type$/,_lastOfType],[/only-child$/,_onlyChild],[/only-of-type$/,_onlyOfType],[/contains\(.+\)$/,_contains],[/empty$/,_empty],[/not\(.+\)$/,_not],[/^checked$/,_checked],[/^disabled$/,_disabled]],cid=0,did=0,cache={},CPP_REG=/([\+>|~[^=],])/g,CPP_IREG=/^\+>~$/,IE_QSA_REG=/[\(|\)]|only\-child|last\-child|!/,QSA_REG=/!|:contains/,GROUP_QUERY=/^[0-9a-zA-Z\s,]+$/,SIMPLE_QUERY=/^[0-9a-zA-Z\s]+$/,ATTR_MODE=/[\$!\^~\*\|]?=/,ATTR_REG=/\[([^\[\]]+[\^~\$\*!\|]?=?[^\[\]]+)\]/g,ATTR_REG_MODE=/[0-9a-zA-Z]+=[0-9a-zA-Z]+/,QUOTES=/['"]/g,NTH_STEPS=/[0-9]*[\\n][\+\-][0-9]*$/;function trim(a){return a.replace(tReg,'')}function npElement(e,a){e=a?e.nextSibling:e.previousSibling;while(e){if(e.nodeType===1){break}e=a?e.nextSibling:e.previousSibling}return e}function getParseRule(a){var i=-1;while(SE[++i]){if(SE[i][0].test(a)){return SE[i][1]}}return false}function getFilterPseudo(a){var i=-1;while(SF[++i]){if(SF[i][0].test(a)){return SF[i][1]}}return false}function _hasAttr(e,b){var a=(b in IE_MAP)?IE_MAP[b]:b;return(enables.hasAttBug)?(e[a]&&e[a]!='')?true:false:e.hasAttribute(b)}function _getAttr(e,a){return(enables.hasAttBug)?e[(a in IE_MAP)?IE_MAP[a]:a]||null:e.getAttribute(a)}function attrMatch(e,b){var c=b.length,i=-1,a,p,n,nn,v,r,ret=true,av,at;while(b[++i]){a=b[i];if(!a){continue}if(ATTR_MODE.test(a)===false){if(!_hasAttr(e,a)){ret=false}}else{p=a.indexOf('=');nn=a.slice(0,p);v=a.slice(p+1);if(ATTR_REG_MODE.test(a)){if(_getAttr(e,nn)!==v){ret=false}}else{n=nn.slice(0,nn.length-1);r=nn.slice(nn.length-1);av=_getAttr(e,n);ret=(av===null)?false:(r==='^')?(new RegExp('^'+v).test(av)):(r==='~')?(av.indexOf(v)!==-1):(r==='$')?(new RegExp(v+'$').test(av)):(r==='*')?(av.indexOf(v)!==-1):(r==='!')?(av.indexOf(v)===-1):(r==='|')?(av.indexOf(v)!==-1):ret}}if(ret===false){return false}}return true}function groupQuery(a){var b={},i,ret=[],ind=-1,query=a.split(','),qlen=query.length,qcn=0,q,nl,len,e;for(;qcn<qlen;++qcn){q=trim(query[qcn]);if(q.indexOf(' ')!==-1){nl=simpleQuery(q)}else{nl=B.getElementsByTagName(q)}len=nl.length;for(i=0;i<len;++i){e=nl[i];e.__cid=e.__cid||++cid;if(b[e.__cid]){continue}else{ret[++ind]=e;b[e.__cid]=1}}}return ret}function simpleQuery(a){var b=[B],r=1,cache={},i,tmp=[],ind=-1,query=a.split(/\s+/),qlen=query.length,qcn=0,q,nl,len,j,e;for(;qcn<qlen;++qcn){q=trim(query[qcn]);for(i=0;i<r;i++){nl=b[i].getElementsByTagName(q);len=nl.length;for(j=0;j<len;++j){e=nl[j];e.__cid=e.__cid||++cid;if(cache[e.__cid]){continue}else{tmp[++ind]=e;cache[e.__cid]=1}}}if(ind===-1){return[]}b=tmp;r=tmp.length;tmp=[];ind=-1}return b}function getElementsBySelector(a,b,c){var d=(!b||b===B)?[B]:[b],v=trim(a.replace(CPP_REG,' $1 ')),i=0,j,k,p,t,res,len,vlen,ret=[],ind=-1,tmp=[],mode=false;if(g.canQSA&&c!==true){if(g.isQSAChild&&IE_QSA_REG.test(v)===false){tmp=d[0].querySelectorAll(v);len=tmp.length;for(;i<len;i++){if(!tmp[i].__ignore){ret[++ind]=tmp[i]}}return ret}else if(g.isQSAContains&&QSA_REG.test(v)===false){tmp=d[0].querySelectorAll(v);len=tmp.length;for(;i<len;i++){if(!tmp[i].__ignore){ret[++ind]=tmp[i]}}return ret}}if(b&&b===B){if(GROUP_QUERY.test(v)){return groupQuery(v)}else if(SIMPLE_QUERY.test(v)){return simpleQuery(v)}}cache={};v=v.split(',');for(k=0,vlen=v.length;k<vlen;++k){t=v[k];if(t===''){continue}p=trim(t).split(/\s+/);res=_loop(p,d);len=res.length;if(len>0){for(i=0;i<len;++i){ret[++ind]=res[i]}}}return ret}function _loop(a,b){var c=[],mode=false,qcn=0,len,arrlen=a.length,r=b.length,root,len2,v,rule,next,done,ret=[],cache={},nl,cl='',id,tpp,tag,ind=-1,sind=-1,atts,filter,sp,e,f,t,i=0,j,k=0,p;for(;qcn<arrlen;++qcn){v=trim(a[qcn]);if(CPP_IREG.test(v)){continue}if(v.indexOf(':')!==-1){sp=v.split(':');t=sp[0];f=sp.slice(1)}else{t=v;f=[]}rule=getParseRule(t);if(rule==='universal'){for(i=0;i<r;++i){root=b[i];nl=root.getElementsByTagName('*');len=nl.length;for(j=0;j<len;++j){c[++ind]=nl[j]}}}else if(rule==='class'){p=t.indexOf('.');tag=t.slice(0,p)||'*';cl=t.slice(p+1).replace('.',' ');for(i=0;i<r;++i){root=b[i];if(B.getElementsByClassName){nl=root.getElementsByClassName(cl);len=nl.length;for(j=0;j<len;++j){if(!tag||nl[j].tagName.toLowerCase()===tag){c[++ind]=nl[j]}}}else{nl=root.getElementsByTagName(tag);len=nl.length;for(j=0;j<len;j++){if((' '+(nl[j].className||'')+' ').indexOf(' '+cl+' ')!==-1){c[++ind]=nl[j]}}}}}else if(rule==='id'){p=t.indexOf('#');tag=(p===0)?'':t.slice(0,p);tpp=t.slice(p+1);p=tpp.indexOf('.');if(p!==-1){id=tpp.slice(0,p);cl=' '+tpp.slice(p+1).replace('.',' ')+' '}else{id=tpp;cl=null}nl=B.getElementById(id);if(nl&&(!tag||nl.tagName.toLowerCase()===tag)&&(!cl||(' '+nl.className+' ').indexOf(cl)!==-1)){c[++ind]=nl}}else if(rule==='attribute'){t=t.replace(QUOTES,'');p=t.indexOf('[');tag=t.slice(0,p);t=t.slice(p+1);t=t.slice(0,t.length-1).split('][');for(i=0;i<r;++i){root=b[i];nl=root.getElementsByTagName(tag||'*');len=nl.length;for(j=0;j<len;j++){e=nl[j];if(attrMatch(e,t)===true){e.__cid=e.__cid||++cid;if(!cache[e.__cid]){c[++ind]=e}}}}}else{tag=t;if(mode==='preceded'){for(i=0;i<r;++i){root=b[i];e=npElement(root,1);if(e&&e.tagName&&e.tagName.toLowerCase()===tag){c[++ind]=e}}}else if(mode==='sibling'){done=++did;for(i=0;i<r;++i){root=b[i];p=root.parentNode;if(p&&(!p.__done||p.__done!==done)){for(e=root.nextSibling;e;e=e.nextSibling){if(e&&e.nodeType===1&&e.tagName.toLowerCase()===tag){c[++ind]=e}}p.__done=done}}}else if(mode==='child'){for(i=0;i<r;++i){root=b[i];nl=root.getElementsByTagName(tag);len=nl.length;for(j=0;j<len;++j){if(nl[j].parentNode===root){c[++ind]=nl[j]}}}}else{for(i=0;i<r;++i){root=b[i];nl=root.getElementsByTagName(tag);len=nl.length;for(j=0;j<len;++j){c[++ind]=nl[j]}}}}if(f.length>0){for(k=0,len2=f.length;k<len2;++k){filter=getFilterPseudo(f[k]);if(filter){c=filter(c,f[k])}}}len=c.length;for(k=0;k<len;k++){e=c[k];e.__cid=e.__cid||(e.__cid=++cid);if(cache[e.__cid]||e.__ignored){continue}else{ret[++sind]=e;cache[e.__cid]=1}}if(ret.length===0){return[]}next=a[qcn+1];if(!next){return ret}else if(next==='+'){mode='preceded';if(!a[qcn+2]){throw SyntaxError('invalid selector query.');return[]}++qcn}else if(next==='~'){mode='sibling';if(!a[qcn+2]){throw SyntaxError('invalid selector query.');return[]}++qcn}else if(next==='>'){mode='child';if(!a[qcn+2]){throw SyntaxError('invalid selector query.');return[]}++qcn}else{mode=false}r=ret.length;b=ret;ind=-1;sind=-1;ret=[];c=[]}};function selectElementsByFilter(a,b){if(!b||b.length===0){throw Error('invalid argument. filter string must be applied');return a}var c,nlen=a.length,flen=b.length,filter,rule,i=0,j=0,done,e,p,sp;for(i=0;i<flen;++i){filter=b[i];rule=getFilterPseudo(filter);if(rule===false){return a}else{c=rule(a,filter)}}return c}function __detectNthSteps(a){var b=b;if(a==='n'){return[1,0]}else if(a==='odd'){return[2,1]}else if(a==='even'){return[2,0]}else if(NTH_STEPS.test(a)){return a.split('n')}else if(a.indexOf('n')!==-1){return[(a.indexOf('n')!==0)?a.slice(0,a.indexOf('n')):1,0]}else if(!isNaN(b(a,10))){return[0,b(a,10)]}else{throw new SyntaxError('invalid nth-step argument of'+a+'.');}}function _nthChild(b,c){var d=c.replace(/nth-child\((.*?)\).*$/,'$1'),done=++did,tmp=[],ind=-1,fo,eo,len=b.length,i=0,e,p,a,cnt=0,first,offset;if(d==='n'){return b}fo=__detectNthSteps(d);for(i=0;i<len;++i){e=b[i];p=e.parentNode;if(p&&(!p.__done||p.__done!==done)){cnt=0;for(a=p.firstChild;a;a=a.nextSibling){if(a.nodeType===1){a.__aid=++cnt}}p.__done=done}eo=e.__aid-fo[1];if(fo[0]===0&&eo===0){tmp[++ind]=e}else if(eo%fo[0]===0&&(eo/fo[0]>=0)){tmp[++ind]=e}}return tmp}function _nthLastChild(b,d){var f=d.replace(/nth-last-child\((.*?)\).*$/,'$1'),done=++did,tmp=[],ind=-1,fo,eo,len=b.length,i=0,e,p,a,cnt=0,first,offset;if(f==='n'){return b}fo=__detectNthSteps(f);for(i=0;i<len;++i){e=b[c];p=e.parentNode;if(p&&(!p.__done||p.__done!==done)){cnt=0;for(a=parent.lastChild;a;a=a.previousSibling){if(a.nodeType===1){a.__aid=++cnt}}p.__done=done}eo=e.__aid-fo[1];if(fo[0]===0&&eo===0){tmp[++ind]=e}else if(eo%fo[0]===0&&(eo/fo[0]>=0)){tmp[++ind]=e}}return tmp}function _nthOfType(b,d){var f=d.replace(/nth-of-type\((.*?)\).*$/,'$1'),done=++did,tmp=[],ind=-1,fo,eo,len=b.length,i=0,e,p,a,cnt=0,first,offset;fo=__detectNthSteps(f);for(i=0;i<len;++i){e=b[c];p=e.parentNode;if(p&&(!p.__done||p.__done!==done)){cnt=0;for(a=parent.firstChild;a;a=a.nextSibling){if(a.nodeType===1){a.__aid=++cnt}}p.__done=done}eo=e.__aid-fo[1];if(fo[0]===0&&eo===0){tmp[++ind]=e}else if(eo%fo[0]===0&&(eo/fo[0]>=0)){tmp[++ind]=e}}return tmp}function _nthLastOfType(b,d){var f=d.replace(/nth-last-of-type\((.*?)\).*$/,'$1'),done=++did,tmp=[],ind=-1,fo,eo,len=b.length,i=0,e,p,a,cnt=0,first,offset;fo=__detectNthSteps(f);for(i=0;i<len;++i){e=b[c];p=e.parentNode;if(p&&(!p.__done||p.__done!==done)){cnt=0;for(a=parent.lastChild;a;a=a.previousSibling){if(a.nodeType===1){a.__aid=++cnt}}p.__done=done}eo=e.__aid-fo[1];if(fo[0]===0&&eo===0){tmp[++ind]=e}else if(eo%fo[0]===0&&(eo/fo[0]>=0)){tmp[++ind]=e}}return tmp}function _firstChild(a,b){var c=++did,tmp=[],ind=-1,e,p,f,i=0,len=a.length;for(;i<len;++i){e=a[i];p=e.parentNode;if(p.__done&&p.__done===c){continue}f=p.firstChild;while(f){if(f.nodeType===1){if(f===e){tmp[++ind]=f}break}f=f.nextSibling}p.__done=c}return tmp}function _lastChild(a,b){var c=++did,tmp=[],ind=-1,e,p,l,i=0,len=a.length;for(;i<len;++i){e=a[i];p=e.parentNode;if(!p||(p.__done&&p.__done===c)){continue}l=p.lastChild;while(l){if(l.nodeType===1){if(l===e){tmp[++ind]=l}break}l=l.previousSibling}}return tmp}function _firstOfType(a,b){var d=++did,tmp=[],ind=-1,e,p,c,i=0,place,len=a.length;for(;i<len;++i){e=a[i];p=e.parentNode;if(!p||(p.__done&&p__done===d)){continue}place=false;for(c=p.firstChild;c;c=c.nextSibling){if(c.nodeType===1){if(place===true&&c!==e&&c.tagName===e.tagName){tmp[++ind]=c;break}if(c===e){place=true}}}p.__done=d}return tmp}function _lastOfType(a,b){var d=++did,tmp=[],ind=-1,e,p,c,i=0,place,len=a.length;for(;i<len;++i){e=a[i];p=e.parentNode;if(!p||(p.__done&&p__done===d)){continue}place=false;for(c=p.lastChild;c;c=c.previousSibling){if(c.nodeType===1){if(place===true&&c!==e&&c.tagName===e.tagName){tmp[++ind]=c;break}if(c===e){place=true}}}p.__done=d}return tmp}function _onlyChild(a,b){var c=++did,tmp=[],ind=-1,p,f,l,i=0,len=a.length;for(;i<len;++i){p=a[i].parentNode;if(!p||(p.__done&&p.__done===c)){continue}f=p.firstChild;l=p.lastChild;while(f&&f.nodeType!==1){f=f.nextSibling}while(l&&l.nodeType!==1){l=l.previousSibling}if(f&&l&&f===l){tmp[++ind]=f}p.__done=c}return tmp}function _onlyOfType(a,b){a=_firstOfType(a);return _lastOfType(a)}function _empty(a,b){var c=[],ind=-1,e,i=0,len=a.length;for(;i<len;++i){e=a[i];if(e.firstChild===null&&e.lastChild===null){c[++ind]=e}}return c}function _contains(a,b){var c=[],txt=b.replace(/contains\(['"]?(.*?)['"]?\)$/,'$1'),ind=-1,e,t,i=0,len=a.length;for(;i<len;++i){e=a[i];t=e.textContent||e.innerText||'';if(t.indexOf(txt)>=0){c[++ind]=e}}return c}function _not(a,b){var c=[],txt=b.replace(/not\(['"]?(.*?)['"]?\)$/,'$1'),ind=-1,e,i=0,j,flag=true;len=a.length,ts=getElementsBySelector(txt),tslen=ts.length;for(;i<len;++i){e=a[i];j=-1;flag=true;while(ts[++j]){if(ts[j]===e){flag=false;break}}if(flag){c[++ind]=e}}return c}function _checked(a,b){var c=[],ind=-1,e,i=0,j,len=a.length;for(;i<len;++i){e=a[i];if(e.checked&&e.checked===true){c[++ind]=e}}return c}function _disabled(a,b){var c=[],ind=-1,e,i=0,j,len=a.length;for(;i<len;++i){e=a[i];if(e.disabled&&e.disabled===true){c[++ind]=e}}return c}function _root(){return B.documentElement||B.getElementsByTagName('html')[0]}DOM.getElementsBySelector=getElementsBySelector;DOM.selectElementsByFilter=selectElementsByFilter})();function xElement(e,a){if(e instanceof xElement){return e}this.element=e;this.tag=e.tagName?e.tagName.toLowerCase():'';this.__dataset=e.dataset||{};this.__parent=a||null;e.normalize()}xElement.prototype={get:function(){return this.element},__getCID:function(){return this.element.__exid},rollBack:function(a){var n=0,t=a||1,e=this;while(n++<t){e=e.__parent;if(e===null){return null}}return e},ignore:function(){this.element.__ignore=++ignoreID;return this},recognize:function(){this.element.__ignore&&(this.element.__ignore=undefined);return this},absDimension:function(){var a=ut.getAbsPosition(this.element),w=this.readStyle('width',true),h=this.readStyle('height',true);w=(!w||w==='auto'||w===0)?this.element.offsetWidth:w;h=(!h||h==='auto'||h===0)?this.element.offsetHeight:h;return{top:a.y,left:a.x,right:a.x+w,bottom:a.y+h,width:w,height:h}},defaultSize:function(){return ut.getDefaultWH(this.element)},attr:function(a,b){var i,res;if(typeof a==='object'){for(i in a){this.attr(i,a[i])}}else if(typeof a==='string'){if(typeof this['__extendAttr'+a]==='function'){if(this['__extendAttr'+a](b)===true){return this}}this.element.setAttribute(a,b)}return this},readAttr:function(a){var i=-1,len,ret;if(typeof a==='string'){return this.element.getAttribute(a)}else if(ut.isArray(a)){ret={};while(a[++i]){ret[a[i]]=this.readAttr(a[++i])}return ret}},removeAttr:function(a){var i=-1,len;if(typeof a==='string'){this.element.removeAttribute(a)}else if(ut.isArray(a)){while(a[++i]){this.element.removeAttribute(a[i])}}return this},addClass:function(v){var c;if(!v||v===''){return this}c=this.element.className;if((' '+c+' ').indexOf(' '+v+' ')===-1){this.element.className=(c==='')?v:(c+' '+v)}return this},hasClass:function(v){return(' '+this.element.className+' ').indexOf(' '+v+' ')!==-1},removeClass:function(v){var a=this.element.className.split(' '),len=a.length,st=[],ind=-1,i=-1;while(a[++i]){if(a!==''&&a[i]!==v){st[++ind]=a[i]}}this.element.className=(st.length>0)?st.join(' '):'';return this},replaceClass:function(a,b){if(this.hasClass(a)){this.removeClass(a).addClass(b)}return this},toggleClass:function(c){return this[this.hasClass(c)?'removeClass':'addClass'](c)},event:function(a,b,c){Base.event.set(this.element,a,b,c||false);return this},hover:function(a,c,d){var b=d||false;if(a){Base.event.set('mouseover',a,b)}if(c){Base.event.set('mouseout',c,b)}return this},once:function(a,b,c){Base.event.once(this.element,a,b,c||false);return this},Cevent:function(a,b){Base.event.set(this.element,a,b,J.CONTROLLER);return this},unevent:function(a,b){var i=-1;if(ut.isArray(a)){while(a[++i]){this.unevent(a[i],b||undefined)}}else{if(a.indexOf(',')!==-1){a=a.replace(' ','').split(',');while(a[++i]){Base.event.remove(this.element,a[i])}}else{Base.event.remove(this.element,a,b||undefined)}}return this},customEvent:function(a,b,c){Base.event.custom(this.element,a,b,c||false);return this},unCustomEvent:function(a,b,c){Base.event.removeCustom(this.element,a,b,c||false);return this},fire:function(a,b,c){Base.event.fire(this.element,a,b||null,c||'null');return this},live:function(a,b,c){Base.event.live(this.element,a,b,c||false);return this},inText:function(a,b){if(b){if(this.element.innerText){this.element.innerText=a}else if(this.element.textContent){this.element.textContent=a}}else{this.element.appendChild(B.createTextNode(a))}this.element.normalize();return this},getText:function(){return this.element.textContent||this.element.innerText},html:function(a){this.element.innerHTML=a;return this},getHTML:function(){return this.element.innerHTML},outerHTML:function(){return('outerHTML'in this.element)?this.element.outerHTML:B.createElement('div').appendChild(this.element).parentNode.innerHTML},appendTo:function(a,b){var p=b||'default',t=(!a)?body:(a instanceof xElement)?a.get():a;if(p==='before'){t.parentNode.insertBefore(this.element,t)}else if(p==='after'){if(t.parentNode.lastChild===t){t.parentNode.appendChild(this.element)}else{t.parentNode.insertBefore(this.element,t.nextSibling)}}else{t.appendChild(this.element)}return this},append:function(a){var d;if(a instanceof xElement){this.element.appendChild(a.get())}else if(a.nodeType&&(a.nodeType===1||a.nodeType===3)){this.element.appendChild(a)}else if(typeof a==='string'){d=B.createElement('div');d.innerHTML=a;while(d.childNodes.length>0){this.element.appendChild(d.firstChild)}d=null}return this},prependTo:function(a){var t=(!a)?body:(a instanceof xElement)?a.get():a;(t.firstChild)?t.insertBefore(this.element,t.firstChild):t.appendChild(this.element);return this},prepend:function(a){var d;if(a instanceof xElement){this.element.insertBefore(a.get(),this.element.firstChild)}else if(a.nodeType&&(a.nodeType===1||a.nodeType===3)){this.element.insertBefore(a,this.element.firstChild)}else if(typeof a==='string'){d=B.createElement('div');d.innerHTML=a;while(d.childNodes.length>0){this.element.insertBefore(d.lastChild,this.element,firstChild)}d=null}return this},wrap:function(a){var e=B.createElement(a),r;if(this.element.applyElement){this.element.applyElement(e,'outside')}else if(B.createRange){r=B.createRange();r.selectNode(this.element);r.surroundContents(e);r.detach()}else{throw Error('wrap method is not supported on your Browser.');return}return STACK.ELEMENTS[e.__exid]||new xElement(e,this)},unwrap:function(){var a=B.createDocumentFragment(),p=this.element.parentNode,c,len,i=-1;if(!p||p===B.body){throw Error('document.body cannnot remove!');return this}while(p.firstChild){a.appendChild(p.firstChild)}p.parentNode.removeChild(p);p.parentNode.appendChild(a);return this},copy:function(a){var b=a||false,e=this.element,c=e.cloneNode(b);if(e.id){c.id=e.id+'_clone'}e.__exID=++EXID;e.__ignore=undefined;return new xElement(c)},remove:function(){if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}return this},empty:function(){this.element.innerHTML='';return this},isEmpty:function(){return!this.element.hasChildNodes()},replace:function(a){var t=(a instanceof xElement)?a.get():a;this.element.parentNode.replaceChild(t,this.element);return this},replaceTo:function(a){var t=(a instanceof xElement)?a.get():a;t.parentNode.replaceChild(this.element,t);return this},hide:function(){this.element.style.display='none';return this},isHidden:function(){return this.readStyle('display')==='none'},isAnimate:function(){return!!this.element.__animate},show:function(a){var v=(a==='i')?'inline':(a==='ib')?'inline-block':'block';this.element.style.display=v;return this},toggleShow:function(){this[this.isHidden()?'show':'hide']();return this},visible:function(){this.element.style.visibility='visible';return this},invisible:function(){this.element.style.visibility='hidden';return this},isVisible:function(){return this.readStyle('visibility')!=='hidden'},toggeleV:function(){this[this.isVisible()?'invisible':'visible']();return this},getValue:function(){return('value'in this.element)?this.element.value:null},setValue:function(a){if('value'in this.element){this.element.value=a}return this},prop:function(a,b){if(typeof b==='undefined'){return this.element[a]}else{this.element[a]=b;return this}},getData:function(a){a=ut.camel(a);if(!this.__dataset[a]){this.__dataset[a]=this.element.getAttribute(HTML_DATA_PREFIX+ut.deCamel(a))}return this.__dataset[a]},getDataSet:function(){var a=this.element.attributes,i=-1,ret={},point,attr;while(a[++i]){attr=a[i];point=attr.name.indexOf(HTML_DATA_PREFIX);if(point===0){ret[ut.camel(attr.name.slice(HTML_DATA_PREFIX.length))]=attr.value}}a=attr=null;this.__dataset=ret;return ret},setData:function(a,b){if(ut.isObject(a)){for(var i in a){if(a.hasOwnProperty(i)){this.setData(i,a[i])}}return}a=ut.camel(a);this.__dataset[a]=b;this.element.setAttribute(HTML_DATA_PREFIX+ut.deCamel(a),b);return this},getScroll:function(){return{x:this.element.scrollLeft,y:this.element.scrollTop}},method:function(a){if(a&&a in this.element){this.element[a]()}else{throw TypeError(a+' method is not defined.');}return this},getParentForm:function(){if(this.tag==='form'){return this}else if(this.element.form!==undefined){return new xElement(this.element.form,this)}var e=this.element.parentNode,reg=/form/i;while(e&&e!==B.body){if(reg.test(e.tagName)){return STACK.ELEMENTS[e.__exid]||new xElement(e,this)}e=e.parentNode}return null},parent:function(a){var l=a||1,p=this.element,i=0;while(p&&++i<=l){p=p.parentNode}return p?STACK.ELEMENTS[p.__exid]||new xElement(p,this):null},children:function(a){var c=this.element.childNodes,ind=-1,ret=[],i=-1;while(c[++i]){if(c[i].nodeType===1){ret[++ind]=c[i]}}return(typeof a!=='undefined')?(ret[a])?STACK.ELEMENTS[ret[a].__exid]||new xElement(ret[a],this):null:new xNodeList(ret,this)},first:function(){var e=this.element.firstChild;while(e){if(e.nodeType===1){break}e=e.nextSibling}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},last:function(){var e=this.element.lastChild;while(e){if(e.nodeType===1){break}e=e.previousSibling}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},next:function(a){var e=this.element,s=a||1,i=0;while(e&&i<s){e=e.nextSibling;if(e&&e.nodeType===1){++i}}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},nexts:function(){var e=this.element,p=this.element.parentNode,ret=[],ch,flag=false;ind=-1;if(!p){return null}ch=p.childNodes;while(ch[++ind]){if(ch[ind].nodeType!==1){continue}else if(ch[ind]===e){flag=true;continue}if(flag){ret[ret.length]=ch[ind]}}return new xNodeList(ret,this)},prev:function(a){var e=this.element,s=a||1,i=0;while(e&&i<s){e=e.previousSibling;if(e&&e.nodeType===1){++i}}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},prevs:function(){var e=this.element,p=this.element.parentNode,ret=[],ch,ind=-1;if(!p){return null}ch=p.childNodes;while(ch[++ind]){if(ch[ind].nodeType!==1){continue}else if(ch[ind]===e){break}ret[ret.length]=ch[ind]}return new xNodeList(ret,this)},detect:function(a,b){var c=DOM.getElementsBySelector(a,this.element,!!b);return new xNodeList(c,this)},detectC:function(a){var b=DOM.getElementsBySelector(a,this.element,true);return new xNodeList(b,this)},getOne:function(a,b){var i=b||0,nl=DOM.getElementsBySelector(a,this.element);return nl[i]?STACK.ELEMENTS[nl[i].__exid]||new xElement(nl[i],this):null},isExpr:function(a){var b=DOM.getElementsBySelector(a),i=-1;while(b[++i]){if(this.element===b[i]){return true}}return false},isFirst:function(){return this.parent().first().get()===this.element},isLast:function(){return this.parent().last().get()===this.element},serialize:function(){return(this.tag==='form')?ut.serializeForm(this.element):false},getContext:function(a){var d=a||'2D';if(this.element.geContext){return this.element.getContext(d)}throw TypeError('Not support CanvasRenderingContext2D on this element or Browser.');},addStyle:function(a,b){var i,p;if(typeof a==='object'){for(i in a){this.addStyle(i,a[i])}}else{p=ut.camel(a);if(typeof this['_extendStyle'+p]==='function'){if(this['_extendStyle'+p](this.element,b)){return this}}switch(p){case'opacity':return this.setOpacity(b);case'filter':if(ua.IE){this.element.style.filter[p]=b}return this;case'float':p=(ua.IE6||ua.IE7)?'styleFloat':'cssFloat';break;case'backgroundImage':b=(!CSS_BG_REG.test(b))?'url('+b+')':b;break;default:break}this.element.style[p]=b}return this},readStyle:function(a,b){var c,e=this.element,i=-1,isP=b||false,val,now,ret,pr;if(ut.isArray(a)){ret={};while(a[++i]){ret[ut.camel(a[i])]=this.readStyle(a[i],isP)}return ret}c=ut.camel(a);if(c==='float'){c=p='cssFloat'}else if(c==='opacity'){return this.getOpacity()}if(e.style[c]){val=e.style[c]}else{if(!COMPUTED_STYLE){return null}now=COMPUTED_STYLE(e,'');val=now.getPropertyValue(ut.deCamel(a))}if(isP){if(c==='backgroundImage'){return val.replace(/url\(["']?(.+?)["']?\)/,'$1')}pr=pf(val);return(isNaN(pr))?val:pr}else{return val}},removeStyle:function(a){var i=-1,st,sp=[],pp;if(ut.isArray(a)){while(a[++i]){this.removeStyle(a[i])}}else{st=(this.element.style.cssText)?this.element.style.cssText.toLowerCase():(this.element.getAttribute('style'))?this.element.getAttribute('style').cssText.toLowerCase():undefined;if(!st){return this}pp=ut.deCamel(a);if(st.indexOf(pp)!==-1){sp=st.split(';');while(sp[++i]){if(sp[i].indexOf(pp)!==-1){sp.splice(i,1);break}}}if(this.element.style.cssText){this.element.style.cssText=sp.join(';')}else if(this.element.getAttribute('style')){this.element.getAttribute('style').cssText=sp.join(';')}}return this},setOpacity:function(a){this.element.style.opacity=a;return this},getOpacity:function(){var a,v;if(this.element.style.opacity){return pf(this.element.style.opacity)}if(!COMPUTED_STYLE){return null}a=COMPUTED_STYLE(this.element,'');return pf(a.getPropertyValue('opacity'))},animate:function(a,b){if(typeof a==='string'&&Animation[a]){Animation[a](this.element,b)}else if(typeof a==='object'){new Animation(this.element,a,b)}return this},isSame:function(a){return this.element===DOM(a).get()},toString:function(){return'[ Class xElement ]'}};if(enables.fixIE){xElement.prototype.setOpacity=function(a){if(this.element.runtimeStyle.hasLayout!==true){this.element.style.zoom=1}this.element.style.filter='alpha(opacity='+mr(a*100)+')';return this};xElement.prototype.getOpacity=function(){var a=this.element.currentStyle;return(/^alpha\(/.test(a.filter))?pi(a.filter.replace(/^alpha\(opacity=([0-9]+)\)?/,'$1'),10)/100:1};xElement.prototype.attr=function(a,b){var i,res;if(typeof a==='object'){for(i in a){this.attr(i,a[i])}}else if(typeof a==='string'){if(typeof this['__extendAttr'+a]==='function'){if(this['__extendAttr'+a](b)===true){return this}}if(IE_MAP[a]){this.element[IE_MAP[a]]=b}else{this.element.setAttribute(a,b)}}return this};xElement.prototype.readAttr=function(a){var i=-1,len,ret;if(typeof a==='string'){return(IE_MAP[a])?this.element[IE_MAP[a]]:this.element.getAttribute(a)}else if(ut.isArray(a)){ret={};while(a[++i]){ret[a[i]]=this.readAttr(a[++i])}return ret}};xElement.prototype.readStyle=function(a,b){var c,e=this.element,i=-1,isP=b||false,val,cs,ret,pr;if(ut.isArray(a)){ret={};while(a[++i]){ret[ut.camel(a[i])]=this.readStyle(a[i],isP)}return res}c=ut.camel(a);if(c==='float'){c=p='styleFloat'}if(c==='opacity'){val=this.getOpacity()}else if(e.style[c]){val=e.style[c]}else{val=e.currentStyle[c]}if(isP){if(c==='backgroundImage'){return val.replace(/url\(["']?(.+?)["']?\)/,'$1')}pr=pf(val);return(isNaN(pr))?val:pr}else{return val}}}if(ua.IE6&&CORE_CONFIG.IEboost.positionFix){ua.__positionKey=true;xElement.prototype.appendTo=function(a,b){var c=b||'default',S=J,t,v;if(!a){if(!this.element.parentNode){v=this.element.__isFixed||S.POSITION[this.readStyle('position')];t=(e===S.POSITION_FIXED)?body:E.IEFIX.body||body}else{t=E.IEFIX.body}}else{t=(a instanceof xElement)?a.get():a}if(c==='before'){t.parentNode.insertBefore(this.element,t)}else if(c==='after'){if(t.parentNode.lastChild===t){t.parentNode.appendChild(this.element)}else{t.parentNode.insertBefore(this.element,t.nextSibling)}}else{t.appendChild(this.element)}return this};xElement.prototype.addStyle=function(a,b){var i,p,v,cv,cp,parent,b;if(typeof a==='object'){for(i in a){this.addStyle(i,a[i])}}else{p=ut.camel(a);if(typeof this['_extendStyle'+p]==='function'){if(this['_extendStyle'+p](this.element,b)){return this}}switch(p){case'opacity':return this.setOpacity(b);case'filter':this.element.style[p]=b;case'float':p='float';break;case'position':parent=this.element.parentNode;if(parent){cp=this.readStyle('position');v=J.POSITION[b];if(v===J.POSITION_FIXED){this.appendTo(B.body);b='absolute'}else if(parent===B.body){this.appendTo(E.IEFIX.body)}}this.element.__isFixed=v;this.element.style.position=b;break;case'backgroundImage':b=(!CSS_BG_REG.test(b))?'url('+b+')':b;break;default:break}this.element.style[p]=b}return this};xElement.prototype.readStyle=function(a,b){var c,e=this.element,i=-1,isP=b||false,val,cs,ret,pr;if(ut.isArray(a)){ret={};while(a[++i]){ret[ut.camel(a[i])]=this.readStyle(a[i],isP)}return res}c=ut.camel(a);if(c==='float'){c=p='styleFloat'}if(c==='opacity'){val=this.getOpacity()}else if(e.style[c]){val=e.style[c]}else{val=e.currentStyle[c]}if(val==='position'&&this.element.__isFixed){return J.POSITION[val]||'static'}if(isP){if(c==='backgroundImage'){return val.replace(/url\(["']?(.+?)["']?\)/,'$1')}pr=pf(val);return(isNaN(pr))?val:pr}else{return val}}}function xNodeList(a,b){var c=a.length;this.nodeList=a;this.length=c;this.__first=a[0]||null;this.__last=a[c-1]||null;this.__parent=b||null;this.__with=false}xNodeList.prototype={is:function(){return this.length>0},foreach:function(a){var n=this.nodeList,len=this.length,i=-1;while(n[++i]){if(a.call(n[i],i)===false){break}}return this},each:function(a){var n=this.nodeList,len=this.length,i=-1;while(n[++i]){if(a(n[i],i)===false){break}}return this},get:function(a){return this.nodeList[a]?STACK.ELEMENTS[this.nodeList[a].__exid]||new xElement(this.nodeList[a],this):null},slice:function(a,b){return new xNodeList(this.nodeList.slice(a||0,b),this);var n=this.nodeList,len=this.length,i=a,ind=-1,res=[];if(!n[i]){return null}while(n[i]){res[++ind]=n[i];++i;if(b&&b===i){break}}return new xNodeList(res,this)},first:function(){return(this.__first!==null)?STACK.ELEMENTS[this.__first.__exid]||new xElement(this.__first):null},last:function(){return(this.__last!==null)?STACK.ELEMENTS[this.__last.__exid]||new xElement(this.__last):null},add:function(a){var p=DOM(a),n=this.nodeList;pn,len,len2,i=-1;if(p instanceof xNodeList){pn=p.nodeList;len=this.length;this.__length=len;len2=p.length;while(pn[++i]){n[len++]=pn[i];++this.length}}else if(p instanceof xElement){this.length=n.push(this.__parent.get())}return this},'with':function(){var p=this.__parent,n=this.nodeList;pn,len,len2,i=-1;if(p&&!this.__with){if(p instanceof xNodeList){pn=p.nodeList;len=this.length;this.__length=len;len2=p.length;while(pn[++i]){n[len++]=pn[i];++this.length}}else if(p instanceof xElement){this.length=n.push(this.__parent.get())}this.__with=true}return this},withOut:function(){if(this.__with){if(this.__length){this.nodeList=this.nodeList.slice(0,this.__length);this.length=this.__length}else{this.nodeList.pop();--this.length}this.__with=false}return this},filter:function(a){if(/^:/.test(a)){a=a.slice(1)}var b=DOM.selectElementsByFilter(this.nodeList,[a]);return new xNodeList(b,this)},nth:function(a){return this.filter(':nth-child('+a+')')},notHasClass:function(a){var i=-1,nodeList=this.nodeList,ret=[],kv=' '+a+' ',elm;while(nodeList[++i]){elm=nodeList[i];if((' '+elm.className+' ').indexOf(kv)===-1){ret[ret.length]=elm}}return new xNodeList(ret,this)},rollBack:function(){return this.__parent},toString:function(){return'[ Class xNodeList ]'}};xNodeList.prototype.getRange=xNodeList.prototype.slice;(function(){var f=('click,mouseover,mouseout,dblclick,'+'mousedown,mouseup,submit,change,'+'blur,focus,keydown,keypress,keyup,select').split(','),xepProps=('ignore,attr,removeAttr,addClass,removeClass,'+'toggleClass,replaceClass,event,hover,once,'+'Cevent,unevent,inText,html,remove,empty,'+'hide,show,toggleShow,visible,invisible,'+'setValue,prop,addStyle').split(','),i=-1,j=-1,p,e,xep=xElement.prototype,xnp=xNodeList.prototype;while(xepProps[++j]){p=xepProps[j];if(typeof xep[p]==='function'&&typeof xnp[p]==='undefined'){(function(m){xnp[m]=function(a,b,c){var d=this.nodeList,i=-1;while(d[++i]){(STACK.ELEMENTS[d[i].__exid]||new xElement(d[i]))[m](a,b,c)}return this}})(p)}}while(f[++i]){e=f[i];(function(e){xep[e]=function(a,b){Base.event.set(this.element,e,a,b||false);return this};xep['un'+e]=function(a){Base.event.remove(this.element,e,a);return this};xnp[e]=function(a,b){var i=-1,n=this.nodeList;while(n[++i]){Base.event.set(n[i],e,a,b||n[i])}return this};xnp['un'+e]=function(a,b){var i=-1,n=this.nodeList;while(n[++i]){Base.event.remove(n[i],e,a)}return this}})(e)}})();INTERVAL_FPS=ua.IE&&ua.IEV<9?5:10;function Timer(a){this.fn=this.__makeFunction(a);this.timerID=CoreTimer.pushStack(this);return this}Timer.prototype={stop:function(){CoreTimer.stop(this.timerID)},start:function(a){this.begin=a||0;CoreTimer.start()},exec:function(){this.fn()},__makeFunction:function(a){a.prototype.stop=this.stop;return a},isPlaying:function(){return CoreTimer.isPlaying}};CoreTimer={count:0,stack:[],play:false,globalTimerID:0,pushStack:function(a){var b=this.count;this.stack[b]=[a,b,false];++this.count;return b},isPlaying:function(){return this.play},start:function(){if(this.play===true){return}this.play=true;this.globalTimerID=interval(function(){var a=CoreTimer.stack,i=-1;while(a[++i]){if(a[i]&&a[i][2]===false){a[i][0].exec()}}},INTERVAL_FPS)},stop:function(a){if(!this.stack[a]){return}this.stack[a][2]=true;var b=this.stack,i=-1,f=true;while(b[++i]){if(b[i]&&b[i][2]===true){continue}else{f=false}}if(f===true){this.clear()}},clear:function(){unInterval(this.globalTimerID);this.play=false;this.stack=[];this.stackLength=0;this.count=0}};function KeyMapper(a){this.code=a.keyCode||a.charCode||a.which;this.SHIFT=!!a.shiftKey;this.CTRL=!!a.ctrlKey;this.TenKeys={};if(a.type==='keypress'){this.__setUpKeyMap(KEY_MAP.PRESS)}else{this.__setUpKeyMap(KEY_MAP.DOWN_UP)}}KeyMapper.prototype={__setUpKeyMap:function(a){var k=pi(this.code,10),basic=a.BASIC,shift=a.SHIFT,tenkey=a.TEN_KEY,i;for(i in basic){this[i]=(basic[i]===k)}for(i in shift){this[i]=(this.SHIFT&&shift[i]===k)}for(i in tenkey){this.TenKeys[i]=(tenkey[i]===k)}}};MODULES.keymapper=KeyMapper;function Layer(a){var b;if(STACK.GLOBAL_LAYER){if(a===true){STACK.GLOBAL_LAYER.show()}b=union({},STACK.GLOBAL_LAYER);b.opacity=0.6;b.showFlag=!!a;if(b.showFlag===true){b.show()}return b}else{this.opacity=0.6;this.showFlag=!!a;STACK.GLOBAL_LAYER=this;this.__construct();if(this.showFlag===true){this.show()}return this}}Layer.prototype={__construct:function(){var z=J.CURRENT_ZINDEX;this.layer=DOM.create('div').attr('id','fl_layer').appendTo().addStyle({position:'fixed',width:'100%',height:'100%',backgroundColor:'#000',display:'none',margin:'0',top:'0px',left:'0px',zIndex:z>1000?z+1:1000});this.__lock=false},isHidden:function(){return!this.showFlag},setOpacity:function(a){this.layer.setOpacity(a);return this},lock:function(){this.__lock=true},unlock:function(){this.__lock=false},show:function(a,b){var c=this;if(a){Animation.appear(this.layer,{from:0,to:this.opacity,speed:0.1,easing:100,callback:function(){c.__show(b)}})}else{this.__show(b)}this.showFlag=true;return this},__show:function(a){this.layer.setOpacity(this.opacity);this.layer.show();if(typeof a==='function'){a()}},hide:function(a,b){var c=this;if(this.__lock===true){return this}if(a){Animation.fade(this.layer,{from:this.opacity,to:0,speed:0.1,easing:0,callback:function(){c.__hide(b)}})}else{this.__hide(b)}return this},__hide:function(a){this.layer.hide();if(typeof a==='function'){a()}},getLayerObject:function(){return this.layer},showLoading:function(a){if(a){this.layer.addClass(a)}else{this.layer.addStyle({backgroundImage:'url('+CORE_CONFIG.APPPATH+')',backgroundPosition:'center center',backgroundRepeat:'no-repeat'})}},hideLoading:function(a){if(a){this.layer.removeClass(a)}else{this.layer.removeStyle(['backgroundImage','backgroundPosition','backgroundRepeat'])}return this},toString:function(){return'[ Module Layer ]'}};if(ua.IE6){Layer.prototype.__construct=function(){var a=ut.getScrollPosition(),z=(J.CURRENT_ZINDEX>1000)?J.CURRENT_ZINDEX+1:1000;this.layer=DOM.create('div').attr('id','fl_layer').addStyle({position:'absolute',width:'100%',height:body.clientHeight+'px',overflow:'',opacity:0.6,backgroundColor:'#000',display:'none',top:0+'px',left:0+'px',zIndex:z}).appendTo(CORE_CONFIG.IEboost.positionFix?E.IEFIX.body:B.body).addStyle('position','fixed');if(CORE_CONFIG.IEboost.positionFix){this.__coveredBody=DOM(B.getElementById('fl_cover_body'))}this.__lock=false};Layer.prototype.__isOverlay=function(e){var z=DOM(e).readStyle('zIndex');return!(z==='auto'||z>1000)};Layer.prototype.show=function(a,b){var c=this,isFix=CORE_CONFIG.IEboost.positionFix;if(!isFix){body.style.height='100%';body.style.width='100%';B.documentElement.style.overflow='hidden'}this.layer.addStyle('height',body.clientHeight+'px');this.selectElements=(isFix)?this.__coveredBody.detect('select'):DOM('select');this.selectElements.foreach(function(){if(c.__isOverlay(this)){this.style.visibility='hidden'}});if(a){Animation.appear(this.layer,{from:0,to:this.opacity,speed:0.1,easing:100,callback:function(){c.__show(b)}})}else{this.__show(b)}this.showFlag=true};Layer.prototype.hide=function(a,b){var c=this,isFix=CORE_CONFIG.IEboost.positionFix;if(this.__lock===true){return this}if(!a&&this.selectElements&&this.selectElements.length>0){this.selectElements.foreach(function(){this.style.visibility='visible'})}if(!isFix){body.style.height='auto';body.style.width='auto';B.documentElement.style.overflow='auto'}if(a){Animation.fade(this.layer,{from:this.opacity,to:0,speed:0.1,easing:0,callback:function(){c.selectElements.foreach(function(){this.style.visibility='visible'});c.__hide(b)}})}else{c.__hide(b)}this.showFlag=false;return this}}MODULES.layer=Layer;function Animation(e,d,f){var g=(e instanceof xElement)?e.get():e,ee=DOM(e),opt=union({speed:30,easing:0,callback:null,delay:0},f||{}),obj={width:g.style.pixelWidth||g.offsetWidth,height:g.style.pixelHeight||g.offsetHeight,top:g.style.pixelTop||g.offsetTop,left:g.style.pixelLeft||g.offsetLeft,marginTop:Animation.__getStyle(ee,'marginTop'),marginLeft:Animation.__getStyle(ee,'marginLeft'),visibility:ee.readStyle('visibility'),display:ee.readStyle('display'),position:ee.readStyle('position'),opacity:ee.getOpacity()},cProp={},defs={},c=0,cEnd=opt.speed-1,o,step,k=0.8,deg,KE=k*opt.easing,A=100/k,p,i,t,tcp,tcpv,tcpvi,D;if(obj.position==='static'){g.style.position='relative'}if(obj.display==='none'){g.style.display=''}if(obj.visibility==='hidden'){g.style.visibility='visible'}g.__animate=true;for(p in d){tcp=ut.camel(p);tcpv=(tcp in obj)?obj[tcp]:ee.readStyle(tcp,true);tcpvi=pf(tcpv,10);if(NUMERIC_CSS.indexOf(tcp)!==-1){cProp[tcp]=[d[p],(d[p]>tcpv),true];defs[tcp]=tcpv}else if(!isNaN(tcpvi)){cProp[tcp]=[d[p],(d[p]>tcpvi),false];defs[tcp]=tcpvi}}D=new DefferdState(this);var a=[],b=[];for(var i in defs){a.push(i,defs[i])}for(var i in cProp){b.push(i,cProp[i])}t=new Timer(function(){if(c++<=cEnd){step=c/cEnd;deg=(100+KE)*step/(2*KE*step+100-KE);for(i in cProp){o=defs[i]+(cProp[i][0]-defs[i])*deg;if((cProp[i][1]&&cProp[i][0]<o)||(!cProp[i][1]&&cProp[i][0]>o)){o=cProp[i][0]}ee.addStyle(i,o+(cProp[i][2]===true?'':'px'))}}else{this.stop();D.success();g.__animate=false;if(typeof opt.callback==='function'){opt.callback.call(g)}if(opt.afterHide===true){e.hide()}}});(opt.delay>0)?delay(t.start,opt.delay):t.start();D.abort(function(){t.stop();g.__animate=false});return D}Animation.smoothly=function(e,b,c){var d=(e instanceof xElement)?e.get():e,ee=DOM(e),opt=union({duration:1,easing:'liner',callback:null,delay:0},c||{}),obj={width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight,top:d.style.pixelTop||d.offsetTop,left:d.style.pixelLeft||d.offsetLeft,marginTop:Animation.__getStyle(ee,'marginTop'),marginLeft:Animation.__getStyle(ee,'marginLeft'),visibility:ee.readStyle('visibility'),display:ee.readStyle('display'),position:ee.readStyle('position'),opacity:ee.getOpacity()},cProp={},defs={},p,i,t,tcp,tcpv,tcpvi,D,duration=opt.duration*1000,easing=opt.easing;if(obj.position==='static'){d.style.position='relative'}if(obj.display==='none'){d.style.display=''}if(obj.visibility==='hidden'){d.style.visibility='visible'}d.__animate=true;for(p in b){tcp=ut.camel(p);tcpv=(tcp in obj)?obj[tcp]:ee.readStyle(tcp,true);tcpvi=pf(tcpv,10);if(NUMERIC_CSS.indexOf(tcp)!==-1){cProp[tcp]=[b[p],(b[p]>tcpv),true];defs[tcp]=tcpv}else if(!isNaN(tcpvi)){cProp[tcp]=[b[p],(b[p]>tcpvi),false];defs[tcp]=tcpvi}}D=new DefferdState(this);t=new Timer(function(){var a=+new Date,time=a-this.begin,point;if(time<duration){for(i in cProp){point=Animation.easings[easing](time,defs[i],cProp[i][0],duration);ee.addStyle(i,point+(cProp[i][2]===true?'':'px'))}}else{for(i in cProp){ee.addStyle(i,cProp[i][0]+defs[i]+(cProp[i][2]===true?'':'px'))}this.stop();D.success();d.__animate=false;if(typeof opt.callback==='function'){opt.callback.call(d)}if(opt.afterHide===true){ee.hide()}}});(opt.delay>0)?delay(function(){t.start(+new Date)},opt.delay):t.start(+new Date);D.abort(function(){t.stop();d.__animate=false});return D};Animation.easings={liner:function(t,b,c,d){return c*t/d+b},easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(t,b,c,d){return((t/=d/2)<1)?c/2*t*t+b:-c/2*((--t)*(t-2)-1)+b},easeInCubic:function(t,b,c,d){return(t/d)*t*t+b},easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(t,b,c,d){return((t/=d/2)<1)?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeOutBack:function(t,b,c,d){var s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeOutBounce:function(t,b,c,d){return((t/=d)<(1/2.75))?c*(7.5625*t*t)+b:(t<(2/2.75))?c*(7.5625*(t-=(1.5/2.75))*t+.75)+b:(t<(2.5/2.75))?c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b:c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b}};Animation.__getStyle=function(e,a){var v=e.readStyle(a);return(v!=='auto')?pi(v,10):0};Animation.appear=function(a,b){var e=DOM(a),opt=union({speed:40,easing:0,callback:null},b||{});if(e.isHidden()){e.show()}if(!e.isVisible()){e.visible()}return new Animation(e.setOpacity(opt.from||0),{opacity:opt.to||1},opt)};Animation.fade=function(a,b){var e=DOM(a),opt=union({speed:40,easing:0,callback:null,afterHide:true},b||{});if(e.isHidden()){e.show()}if(!e.isVisible()){e.visible()}return new Animation(e,{opacity:opt.to||0},opt)};Animation.expand=function(a,b){var e=DOM(a),el=e.get(),w=el.offsetWidth,h=el.offsetHeight,opt=union({speed:40,mode:'wh',dest:'center',width:w,height:h,easing:0,callback:null},b||{}),defml=e.readStyle('marginLeft',true),defmt=e.readStyle('marginTop',true),ml,mt,prop;if(defml==='auto'){defml=el.offsetLeft}if(defmt==='auto'){defmt=el.offsetTop}ml=(opt.mode.indexOf('w')!==-1)?(opt.dest==='center')?-(opt.width/2-w/2):(opt.dest==='left')?-(opt.width-w):0:0;mt=(opt.mode.indexOf('h')!==-1)?(opt.dest==='center')?-(opt.height/2-h/2):(opt.dest==='left')?-(opt.height-h):0:0;prop=(opt.mode==='w')?{width:opt.width,marginLeft:ml-defml}:(opt.mode==='h')?{height:opt.height,marginTop:mt-defmt}:{width:opt.width,marginLeft:ml-defml,height:opt.height,marginTop:mt-defmt};return new Animation(e,prop,opt)};Animation.move=function(a,b){var e=DOM(a),ee=e.get(),defml=e.readStyle('marginLeft',true),defmt=e.readStyle('marginTop',true),opt=union({left:0,top:0,speed:40,easing:0,callback:null},b||{}),prop={};if(defml==='auto'){defml=ee.offsetLeft}if(defmt==='auto'){defmt=ee.offsetTop}prop.marginLeft=defml+opt.left;prop.marginTop=defmt+opt.top;return new Animation(e,prop,opt)};Animation.blindDown=function(a,b){var e=DOM(a),ee=e.get(),dim=e.defaultSize(),prop={},opt=union({mode:'y',speed:40,easing:0,from:0,callback:null},b||{});if(opt.mode.indexOf('x')!==-1){prop.width=opt.width||dim.width}if(opt.mode.indexOf('y')!==-1){prop.height=opt.height||dim.height}ee.style.overflow='hidden';ee.style.height=opt.from+'px';return new Animation(e,prop,opt)};Animation.blindUp=function(a,b){var e=DOM(a),ee=e.get(),prop={},opt=union({mode:'y',to:1,speed:40,easing:0,callback:null},b||{});if(opt.mode.indexOf('x')!==-1){prop.width=opt.to}if(opt.mode.indexOf('y')!==-1){prop.height=opt.to}ee.style.overflow='hidden';return new Animation(e,prop,opt)};Animation.centerize=function(a,b){var e=DOM(a),ee=e.get(),dim=e.absDimension(),prop={},opt=union({speed:40,easing:0,offsetX:0,offsetY:0,callback:null},b||{}),pos=e.readStyle('position'),p=ut.getCenterPosition((pos==='fixed')?false:true);if(opt.targetWidth){prop.width=opt.targetWidth;prop.marginLeft=mr(p.x-opt.targetWidth/2)-dim.left+e.readStyle('marginLeft',true)-(opt.offsetX||0)}else{}if(opt.targetHeight){prop.height=opt.targetHeight;prop.marginTop=mr(p.y-opt.targetHeight/2)-dim.top+e.readStyle('marginTop',true)-(opt.offsetY||0)}else{}return new Animation(e,prop,opt)};Animation.toString=function(){return'[ Module Animation ]'};(function(){var a,_tmpDocumentl,_tmpBody,_tmpHead;function __connect(w){a=E;_tmpDocument=B;_tmpHead=head;_tmpBody=body;E=w;B=w.document;head=B.head||B.getElementsByTagName('head')[0];body=B.body}function __disConnect(){E=a;B=_tmpDocument;head=_tmpHead;body=_tmpBody}connect=__connect;disConnect=__disConnect})();ignite()})((new Date()).getTime(),document,this,location,navigator.userAgent.toLowerCase()):(function(){throw new Error('Undefined Configure Object!');})();