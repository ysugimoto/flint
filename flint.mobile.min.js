/* ========================================================================
 * @license The MIT License
 *    http://www.opensource.org/licenses/mit-license.php
 * @author  Yoshiaki Sugimoto <neo.yoshiaki.sugimoto@gmail.com>
 * @copyright Neo,Inc <http://neo-navi.net/>
 * @version    ,v 0.7.1
 * ========================================================================
 */

// this script works Mobile Device Only!
// written for Webkit JavaScript engine.

(typeof FL_CONFIG==='object')?(function(x,y,B,E,F){if(B.getInstance){return}var H={INITIAL_TIME:x,DOM_CREATE_TIME:0,WINDOW_LOADED_TIME:0,SSL_CONNECT:(E.protocol==='https:'),GLOBAL_EVAL:B.eval,CONTROLLER:null,CONTROLLER_NAME:'',EXEC_METHOD:null,METHOD_ARGUMENTS:{},WINDOW_LOADED:false,START_CONTROLLER:null,BENCH_MARKS:{},DOM_LOADED:false,CURRENT_ZINDEX:1,XHR_RESPONSES:{READY_STATE:{1:'LOADING',2:'LOADED',3:'INTERACTIVE',4:'COMPLETED'},STATUS:{403:'PERMISSION ERROR',404:'NOT FOUND',500:'SERVER ERROR',503:'INTERNAL SERVER ERROR',200:'OK',999:'UNDEFINED'}}},STACK={LOADED_CORE_CLASSES:{},ELEMENTS:{},EVENT_HANDLERS:[],LOADED_FUNCS:[],DOM_LOADED_FUNCS:[],INSTANCED_API:{},CONFIG:{},GLOBAL_LAYER:null,CAMELED_PROP:{},DECAMELED_PROP:{},API_STACK:[],CSS_STACK:[],API_READY:{},MODULE_READY:{},API_READY_FUNC:{},MODULE_READY_FUNC:{},BENCH_MARKS:{},AJAX_EVENTS:[],AJAX_QUEUE:[],DEFFERD:{}},CORE_CONFIG={},I,EXID=0,ignoreID=0,DEFFERD_ID=0,head=y.head||y.getElementsByTagName('head')[0],body,html=y.documentElement||y.getElementsByTagName('html')[0],pi=B.parseInt,pf=B.parseFloat,mr=Math.round,abs=Math.abs,sin=Math.sin,cos=Math.cos,mp=Math.pow,enc=B.encodeURIComponent,dec=B.decodeURIComponent,delay=B.setTimeout,interval=B.setInterval,unInterval=B.clearInterval,SSLURI,SITEURI,indexReg=/index\.php\/?/,MODULES={},COMPUTED_STYLE=(y.defaultView&&y.defaultView.getComputedStyle)?y.defaultView.getComputedStyle:null,DOM,ua,ut,enables,Animation,Timer,connect,disConnect,Controller,Model,Base,IEFIX,CUSTOM_EVENT,DEFFERD_CONTROLLER,ClassMap,INLINE_ELEMENTS='span,em,strong,dfn,cide,abbr,acronym,q,sub,sup,br,a,img,input,select,textarea,label',BLOCK_ELEMENTS='div,h1,h2,h3,h4,h5,h6,address,blockquote,p,pre,ul,li,ol,dl,table,hr,form,fieldset',CSS_BG_REG=/^url\s?\(/,CoreTimer,INTERVAL_FPS,NUMERIC_CSS='opacity,zIndex',EXT='.js',SP_EVENTS={click:'touchend',mousedown:'touchstart',mousemove:'touchmove',mouseup:'touchend',rotate:'orientationchange',gs:'gesturestart',ge:'gestureend',gc:'gesturechange'};for(I in FL_CONFIG){if(!I.isPrototypeOf(FL_CONFIG)){CORE_CONFIG[I]=FL_CONFIG[I]}}if(CORE_CONFIG.cookieDomain==='document.domain'){CORE_CONFIG.cookieDomain=y.domain}try{delete FL_CONFIG}catch(e){FL_CONFIG=undefined}if(!CORE_CONFIG.siteUrl){(function(){var a=head.getElementsByTagName('script'),i=-1,reg=/flint.*\.js$/,ap=CORE_CONFIG.scriptPath;while(a[++i]){if(reg.test(a[i].src)){CORE_CONFIG.siteUrl=a[i].src.substring(0,a[i].src.lastIndexOf(ap+'flint'));break}}})()}if(!CORE_CONFIG.ssl_siteUrl){(function(){var a=head.getElementsByTagName('script'),i=-1,reg=/flint.*\.js$/,ap=CORE_CONFIG.scriptPath;while(a[++i]){if(reg.test(a[i].src)){CORE_CONFIG.ssl_siteUrl=a[i].src.substring(0,a[i].src.lastIndexOf(ap+'flint'));break}}})()}if(B.Hook&&typeof Hook==='object'){CORE_CONFIG.__hooks=Hook;try{delete B.Hook}catch(e){B.Hook=undefined}}if(CORE_CONFIG.debugMode===true){if(!(function(){var a=[],g,N,gn=CORE_CONFIG.globalNames;for(N in gn){if(B[gn[N]]){a[a.length]=g}}return(a.length>0)?confirm('Namespace ['+a.join(',')+']'+'is confrict!\nThis script keep running?'):true})()){return}}if(CORE_CONFIG.disableEval===true){B.eval=function(){throw Error('Eval function has deleted by system.');}}SITEURI=CORE_CONFIG.siteUrl.replace(indexReg,'');SSLURI=(CORE_CONFIG.ssl_siteUrl)?CORE_CONFIG.ssl_siteUrl.replace(indexReg,''):SITEURI;CORE_CONFIG.BASE_URL=(H.SSL_CONNECT)?SSLURI:SITEURI;CORE_CONFIG.SITE_URL=CORE_CONFIG[(H.SSL_CONNECT)?'ssl_siteUrl':'siteUrl'];CORE_CONFIG.APPPATH=CORE_CONFIG.BASE_URL+CORE_CONFIG.scriptPath;if(!/.+\/$/.test(CORE_CONFIG.SITE_URL)){CORE_CONFIG.SITE_URL+='/'}ClassMap={UserAgent:UserAgent,Loader:Loader,Utility:Utility,Router:Router,Config:Config,Event:Event,AjaxInit:AjaxInit,FL_Image:FL_Image,BenchMark:BenchMark,CreateClass:CreateClass,Extends:Extends,Enables:Enables,Language:Language,Hook:Hook,URI:URI,Input:Input,CustomEvent:CustomEvent};ua=loadClass('UserAgent');enables=loadClass('Enables');function ignite(){var c,CFG,RTR,URI,HOOK,F,BM,LANG,LOADER,INPUT,Class,Method,ael='addEventListener',rel='removeEventListener',dn,ss,G=CORE_CONFIG.globalNames;_registCustomEvent();ut=loadClass('Utility');BM=loadClass('BenchMark');HOOK=loadClass('Hook');HOOK._callHook('preSystem');CFG=loadClass('Config');URI=loadClass('URI');RTR=loadClass('Router');LANG=loadClass('Language');INPUT=loadClass('Input');LOADER=loadClass('Loader');Controller=Base=new _Controller();Model=new _Model();B.ClassExtend=function(a,b){new Extends(a,b)};B.getInstance=function(){return H.CONTROLLER||Controller};alias('Class',loadClass('CreateClass'));alias(G.DOM,DOM);alias(G.Animation,Animation);alias(G.Module,Module);if(G.Helper!==''){B[G.Helper]={}}Controller.load._fl_autoLoader();if(CORE_CONFIG.routingMode==='segment'||CORE_CONFIG.routingMode==='config'){Controller.__load(CFG.appPath()+'controllers/'+RTR.fetchDirectory()+RTR.fetchClass()+EXT)}else{B[G.Controller]=Controller}B[ael]('load',Base.event.__execLoad,false);B[ael]('unload',ut.cleanEvElm,false);y[ael]('DOMContentLoaded',Base.event.__execDOM,false)}function union(a,b,c){var i,isP=c||false;for(i in b){if(!isP||!/^_/.test(i)){a[i]=b[i]}}return a}function alias(a,b,c){(c||B)[a]=b}function apiLoad(a,b,c){var d=(a==='css'),t=y.createElement((d)?'link':'script');t.type=(d)?'text/css':'text/javascript';t[(d)?'href':'src']=b;if(d){if(c){t.media=c}t.rel='stylesheet'}else{t.charset='UTF-8'}head.appendChild(t)}function returnFalse(){return false}function loadClass(a){var b=STACK.LOADED_CORE_CLASSES,cl;if(!ClassMap[a]){throw Error(a+' class is not defined');return}if(!b[a]){b[a]=new ClassMap[a]()}return b[a]}function ready(a,b){var d=STACK.API_READY,arf=STACK.API_READY_FUNC,fn;if(typeof a==='string'){if(d[a]===true||typeof Controller[a]==='object'){b.call(H.CONTROLLER||Controller)}else{function c(){b.call(H.CONTROLLER||Controller)}if(arf[a]){arf[a].push(c)}else{arf[a]=[c]}}}else if(typeof a==='function'){Base.event.set(y,'DOMReady',a)}}function DefferdInit(){return new FL_Defferd(arguments)}function _registCustomEvent(){CUSTOM_EVENT=loadClass('CustomEvent');CUSTOM_EVENT.regist('mouseenter','mouseover',function(a,b){var e=b.relatedTarget||b.fromElement||null,html=y.documentElement,flag=true;if(!e){return false}while(e&&e!==html){if(e===a){flag=false;break}e=e.parentNode}return flag});CUSTOM_EVENT.regist('mouseleave','mouseout',function(a,b){var e=b.relatedTarget||b.toElement||null,html=y.documentElement,flag=true;if(!e){return false}while(e&&e!==html){if(e===a){flag=false;break}e=e.parentNode}return flag})}function Enables(){this.xhr=!!B.XMLHttpRequest;this.fixIE=(ua.IE&&ua.IEV<9)?true:false;this.positionFixed=this.png=(!ua.IE6)?true:false;this.minmaxWH=(!ua.IE6)?true:false;this.hasAttBug=(ua.IE6||ua.IE7)?true:false;this.canASCall=(!ua.IE||ua.IEV>8)?true:false;this.canQSA=(y.querySelectorAll)?true:false;this.isQSAChild=(this.canQSA&&ua.IEV>=8)?true:false;this.isQSAContains=(this.canQSA&&!ua.IE)?true:false;this.needFixBrowserIE=(ua.IE&&ua.IEV<9)?true:false;this.canDOMReady=(ua.IE9||ua.IE10||ua.Firefox||ua.Opera||ua.GoogleChrome||(ua.Safari&&ua.SafariV>3.1))?true:false}Enables.prototype={};function UserAgent(){var u=F,sfV,__flashVer,map,i=-1,BS=[],c=y.documentElement.className,DM=y.documentMode,lteV=10;this.agent=F;function parse(a,n,m){return pf(a[n]+'.'+((!m)?0:a[m]))}function has(a){return(u.indexOf(a)!==-1)}function set(a){BS[++i]=a;return true}this.Opera=!!B.opera&&set('o');this.Firefox=this.gecko=has('gecko')&&has('fox')&&set('ff');this.webkit=has('webkit');this.Safari=has('safari')&&has('applewebkit')>0&&!has('chrome',u)&&set('s');this.Standard=(y.compatMode==='CSS1Compat');this.FirefoxV=(this.Firefox)?pf(u.replace(/(.*?)firefox\/([0-9])\.([0-9])(.*?)/,'$2.$3')):null;this.OperaV=(this.Opera)?parse(u.match(/(.*?)opera[\/|\s]([0-9])\.([0-9])(.*?)/),2,3):null;sfV=(this.Safari)?u.replace(/(.*?)applewebkit\/([0-9]*?)\.(.*?)/,'$2').substring(0,2):null;this.SafariV=(sfV!==null)?(pi(sfV,10)>52)?u.replace(/(.*?)version\/([0-9])\.([0-9]).*/,'$2.$3'):(sfV=='41')?'2.0':(sfV=='31')?'1.3':(sfV=='12')?'1.2':(sfV=='10')?'1.1':(sfV=='85')?'1.0':'0':null;this.iPod=has('ipod');this.iPnone=has('iphone');this.iPhone3G=this.iPhone&&has('applewebkit/525');this.iPad=has('ipad');this.Android=has('android');__flashVer=(function(){var v=[0,0,0],vn,m,n=navigator,pl,mmt='application/x-shockwave-flash';if(n.plugins&&n.mimeTypes[mmt]){pl=n.mimeTypes[mmt].enabledPlugin;if(pl&&pl.description){m=pl.description.match(/([0-9]+)\.([0-9])\s?[a-zA-Z]([0-9]+)$/);v=[m[1],m[2],m[3]]}}return v})();this.toString=function(){return'[ Class UserAgent ]'};this.flashVer=__flashVer.join('.');this.flashVerArray=__flashVer;y.documentElement.className=(c==='')?BS.join(' '):c+BS.join(' ')}UserAgent.prototype={};function CreateClass(){}CreateClass.prototype={create:function(a){var b=function(){};return this.__extend(b,a||undefined)},singleton:function(a){var b,fn=function(){if(b){return b}else{b=this}};return this.__extend(fn,a||undefined)},__extend:function(a,b){switch(typeof b){case'function':a.constructor=b;a.prototype=new b();break;case'object':a.constructor=b.constructor;a.ptototype=b;break;default:break}return a}};function Config(){this.C=CORE_CONFIG}Config.prototype={siteUrl:function(a){return this.C.SITE_URL+(a?a.replace('/^[\/]',''):'')},baseUrl:function(){return this.C.BASE_URL},appPath:function(){return this.C.APPPATH},item:function(a){return(a in this.C)?this.C[a]:false},isDebug:function(){return this.C.debugMode},setItem:function(a,b){this.C[a]=b},getGlobal:function(a){var G=this.C.globalNames;if(!a){return{Controller:(CORE_CONFIG.routingMode==='segment')?'':G.Controller,DOM:G.DOM,Animation:G.Animation,Helper:(G.helper==='')?B:G.Helper,Module:(G.Module==='')?B:G.Module}}else{if(G.hasOwnProperty(a)){return(a==='Helper')?(G[a]!='')?B[G[a]]:B:B[G[a]]}}},toString:function(){return'[ Class Config ]'}};function BenchMark(){this.STB=STACK.BENCH_MARKS;this.SYB=H.BENCH_MARKS}BenchMark.prototype={mark:function(a){var n=a||'default';this.STB[n]=+new Date();this.SYB[n]='running...'},end:function(a,b){var n=a||'default',s=this.STB[n],e=+new Date(),r=e-s;this.SYB[n]=r+' ms';return b?r:alert('BenchMarks "'+n+'" runs '+r+' ms')},toString:function(){return'[ Class BenchMark ]'}};function URI(){this.hash;this.search;this.uri;this.__construct()}URI.prototype={__construct:function(){var a=E.href,hp=a.indexOf('#'),sp=a.indexOf('?'),acu,splitUri,segmentLen,ii=0,uriO={},uriA=[''];this.hash=(hp!==-1)?a.slice(hp):'#';this.search=(sp!==-1)?a.slice(sp+1):'';this.uri=a.replace(this.hash,'').replace('?'+this.search,'');this._uriString=this.uri.replace(CORE_CONFIG.SITE_URL);acu=this._uriString.replace(/index\.php\/?/,'');splitUri=acu.split('/');segmentLen=splitUri.length;for(;ii<segmentLen;ii++){uriO[ii+1]=uriA[uriA.length]=splitUri[ii]}this.uriObj=uriO;this.uriArray=uriA},getHash:function(a){return(a)?this.hash:this.hash.slice(1)},segmentArray:function(){var u=this.uriArray,len=u.length,i=0,ret=[''];while(u[++i]){ret[ret.length]=u[i]}return ret},segment:function(a,b){return this.uriArray[a]||b},lastSegment:function(a){return this.uriArray[this.uriArray.length-1]||a||undefined},slashSegment:function(a,b){var u=this.uriArray,sh=b||'',prefix=(sh==='leading'||sh==='both')?'/':'',suffix=(sh==='both')?'/':'';return u[a]?prefix+u[a]+suffix:false},uriString:function(){return this._uriString},assocToUri:function(a){return'/'+a.join('/')},toString:function(){return'[ Class URI ]'}};function Input(){this._GET={};this.__construct()}Input.prototype={__construct:function(){var s=(E.search!=='')?E.search.slice(1):'',sp=s.split('&'),spp,i=-1;while(sp[++i]){spp=sp[i].split('=');this._GET[dec(spp[0])]=dec(spp[1])}this._GET=this.__cleanInputData(this._GET)},__cleanInputData:function(a){if(ut.isObject(a)){var i,ret={},keyRegex=/^[a-zA-Z0-9:_\/\-]+$/;for(i in a){if(a.hasOwnProperty(i)){if(keyRegex.test(i)){ret[i]=this.__cleanInputData(a[i])}}}return ret}return a.replace(/[\r\n|\r]/g,'\n')},get:function(a){return(a&&this._GET.hasOwnProperty(a))?this._GET[a]:false}};function Hook(){this.__hooks=CORE_CONFIG._hooks||{}}Hook.prototype={_callHook:function(a){var h=this.__hooks;if(h[a]&&ut.isFunction(h[a])){h[a]()}}};function Utility(){}Utility.prototype={getAbsPosition:function(e){var t,l,p,sc,gCS,nowStyle;if(e.style.position==='fixed'){t=e.style.top;l=e.style.left;if(t=='auto'||t==''){t=e.offsetTop}else if(t.indexOf('%')>-1){t=mr(screen.availHeight*pi(t)/100)}else{t=pi(t)}if(l=='auto'||l==''){l=e.offsetLeft}else if(l.indexOf('%')>-1){l=mr(screen.availHeight*pi(l)/100)}else{l=pi(l)}return{x:l,y:t}}if(e.getBoundingClientRect){p=e.getBoundingClientRect();sc=this.getScrollPosition();return{x:mr(p.left+sc.x),y:mr(p.top+sc.y)}}p={x:0,y:0};var d=function(a,b,c){if(COMPUTED_STYLE){nowStyle=COMPUTED_STYLE(a,'');return nowStyle.getPropertyValue(c)}return 0};while(e){p.x+=e.offsetLeft;p.y+=e.offsetTop;e=e.offsetParent}if(ua.Firefox){p.x+=2*(pi(d(body,'borderLeftWidth','border-left-width'),10)||0);p.y+=2*(pi(d(body,'borderTopWidth','border-top-width'),10)||0)}return p},getScrollPosition:function(){var b=body,h=html;return{x:b.scrollLeft||h.scrollLeft||0,y:b.scrollTop||h.scrollTop||0}},getPageSize:function(){var b=y.body,h=y.documentElement,max=Math.max;return{width:max(b.innerWidth||0,b.clientWidth||0,b.scrollWidth||0,h.clinetWidth||0,h.scrollWidth||0),height:max(b.innerHeight||0,b.clientHeight||0,b.scrollHeight||0,h.clinetHeight||0,h.scrollHeight||0)}},getContentSize:function(){var b=y.body;return{width:B.innerWidth,height:B.innerHeight}},getCenterPosition:function(a){var b=this.getContentSize(),sc=this.getScrollPosition();return{x:b.width/2+(a?sc.x:0),y:b.height/2+(a?sc.y:0)}},getPixel:function(a){var d=y.createElement('div'),ret={},val=pf(a);if(isNaN(val)){return 0}d.style.visibility='hidden';d.style.position='absolute';d.style.top='0px';d.style.left='0px';y.body.appendChild(d);d.style.width='10pt';ret.pt=d.offsetWidth/10;d.style.width='10em';ret.em=d.offsetWidth/10;y.body.removeChild(d);d=null;return(a.indexOf('em')!==-1)?ret.em*val:(a.indexOf('pt')!==-1)?ret.pt*val:val},getTextSize:function(a,b){var d=y.createElement('span'),res={};d.style.fontSize=b||'inherit';d.style.width='auto';d.style.visibility='hidden';d.appendChild(y.createTextNode(a));y.body.appendChild(d);res.width=d.offsetWidth;res.height=d.ofsetHeight;y.body.removeChild(d);d=null;return res},inRect:function(a,b){var c=DOM(a).absDimension(),td=DOM(b).absDimension();return(c.top>td.top&&c.left>td.left&&c.bottom<td.bottom&&c.right<td.right)},inRectPiece:function(a,b){var c=DOM(a).absDimension(),td=DOM(b).absDimension();return!(c.bottom<td.top||c.top>td.bottom||c.right<td.left||c.left>td.right)},inRectHalfVertical:function(a,b){if(this.inRectPiece(a,b)===false){return false}var c=DOM(a).absDimension(),td=DOM(b).absDimension();if((c.bottom>=td.top&&c.bottom<=td.bottom-(td.height/2))&&((c.left>=td.left&&c.left<=td.right)||(c.right>=td.left&&c.right<=td.right))){return'T'}else if((c.top>=td.top+(td.height/2)&&c.top<=td.bottom)&&((c.left>=td.left&&c.left<=td.right)||(c.right>=td.left&&c.right<=td.right))){return'B'}return false},inRectHalfParallel:function(a,b){if(this.inRectPiece(a,b)===false){return false}var c=DOM(a).absDimension(),td=DOM(b).absDimension();if((c.left>=td.left+(td.width/2)&&c.left<=td.right)&&((c.top>=td.top&&c.top<=td.bottom)||(c.bottom>=td.top&&c.bottom<=td.bottom))){return'L'}else if((c.right>=td.left&&c.right<=td.left+(td.width/2))&&((c.top>=td.top&&c.top<=td.bottom)||(c.bottom>=td.top&&c.bottom<=td.bottom))){return'R'}return false},mouseInRect:function(a,b){var c=DOM(b).absDimension();return(a.x>=c.left&&a.x<=c.right&&a.y>=c.top&&a.y<=c.bottom)},mouseInRectHalfVertical:function(a,b){if(!this.mouseInRect(a,b)){return false}var c=DOM(b).absDimension();if((a.y>=c.top&&a.y<c.top+(c.height/2))&&(a.x>=c.left&&a.x<=c.right)){return'T'}else if((a.y>=c.top+(c.height/2)&&a.y<=c.bottom)&&(a.x>=c.left&&a.x<=c.right)){return'B'}return false},mouseInRectHalfParallel:function(a,b){if(!this.mouseInRect(a,b)){return false}var c=DOM(b).absDimension();if((a.x>=c.left&&a.x<c.left+(c.width/2))&&(a.y>=c.top&&a.y<=c.bottom)){return'L'}else if((a.x>=c.left+(c.width/2)&&a.x<=c.right)&&(a.y>=c.top&&a.y<=c.bottom)){return'R'}return false},__is:function(o){return(o===null||typeof o=='undefined')},isString:function(o){return(this.__is(o)===false&&typeof o=='string')},isNumber:function(o){return(this.__is(o)===false&&typeof o=='number')},isFunction:function(o){return(this.__is(o)===false&&typeof o=='function')},isArray:Array.isArray||function(o){return(this.__is(o)===false&&typeof o=='object'&&o.constructor===Array)},isObject:function(o){return(this.__is(o)===false&&typeof o=='object'&&o.constructor===Object)},isBool:function(o){return(this.__is(o)===false&&typeof o=='boolean')},isset:function(v){return(typeof v=='undefined')},isNull:function(v){return(v===null)},isXElement:function(e){return!!(e instanceof xElement)},isXNodeList:function(e){return!!(e instanceof xNodeList)},rgbToHex:function(a){var t=this.trim(a),m,i=1,h,ret=['#'];if(/^rgb/.test(t)===false){return a}m=a.match(COLOR_REGEX.rgb);if(pi(m[1],10)>255||pi(m[2],10)>255||pi(m[3],10)>255){throw Error('can\'t convert RGB to Hex on '+a);}for(i;i<4;i++){h=pi(m[i],10).toString(16);ret[ret.length]=(h.length===1)?'0'+h:h}return ret.join('')},hexToRgb:function(a){var t=this.trim(a),m,ret=a;if(/^#[0-9a-fA-F]{6}$/.test(t)){m=t.match(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/);ret='rgb('+pi(m[1],16).toString()+','+pi(m[2],16).toString()+','+pi(m[3],16).toString()+')'}else if(/^#[0-9a-fA-F]{3}/.test(t)){m=t.match(/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/);ret='rgb('+pi(m[1]+m[1],16).toString()+','+pi(m[2]+m[2],16).toString()+','+pi(m[3]+m[3],16).toString()+')'}else{throw Error('invalid hex foramt on '+a);}return ret},grep:function(a,b){if(!ut.isString(a)||!b){throw TypeError('invalid arguments of Utility.grep function parameter by '+a);}if(typeof b==='string'){return(a.indexOf(b)!==-1)}else if(b.constructor===RegExp){return b.test(a)}return false},serializeForm:function(a){if(!a.nodeType||a.tagName.toLowerCase()!=='form'){throw new Error('utility.serializeForm works <form> element only.');return}var b={},input,inputlen,iptName,iptArr={},select,selectlen,textarea,textarealen,chStack={},ch=false,e,chName,i,j,s,sl,k,m,ipt,c;input=a.getElementsByTagName('input');inputlen=input.length;for(i=0;i<inputlen;i++){e=input[i];switch(e.type){case'text':case'password':case'submit':case'hidden':if(ut.grep(e.name,'[]')){iptName=e.name.replace('[]','');if(iptName in iptArr){iptArr[iptName].push(e.value)}else{iptArr[iptName]=[e.value]}}else{b[e.name]=e.value}break;case'radio':if(e.checked===true){b[e.name]=e.value}break;case'checkbox':if(e.checked===true){ch=true;chName=ut.grep(e.name,'[]')?e.name.replace('[]',''):e.name;if(chName in chStack){chStack[chName].push(e.value)}else{chStack[chName]=[e.value]}}break;default:break}}if(ch){for(c in chStack){if(!c.isPrototypeOf(chStack)){b[c]=chStack[c]}}}for(ipt in iptArr){if(!ipt.isPrototypeOf(iptArr)){b[ipt]=iptArr[ipt]}}select=a.getElementsByTagName('select');selectlen=select.length;for(j=0;j<selectlen;j++){s=select[j].options;sl=s.length;for(k=0;k<sl;k++){if(s[k].selected===true){if(select[j].multiple){if(b[select[j].name]){b[select[j].name].push(s[k].value)}else{b[select[j].name]=s[k].value}}else{b[select[j].name]=s[k].value;break}}}}textarea=a.getElementsByTagName('textarea');textarealen=textarea.length;for(m=0;m<textarealen;m++){b[textarea[m].name]=textarea[m].value}return b},trim:String.trim||function(a){return a.replace(/^\s|\s$/g,'')},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},br2nl:function(a){return a.replace(/<br\s?\/?>/g,'\n')},nl2br:function(a){return a.replace(/\r\n/g,'<br />').replace(/\r|\n/g,'<br />')},clean:function(a,b){var c=b||true,i;if(typeof a=='object'){for(i in a){if(!i.isPrototypeOf(a)){a[i]=this.clean(a[i],c)}}return a}if(c){a=a.replace(/javascript:/ig,'[removedprotocol]')}return a.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/\'/g,'&#039;')},inArray:Array.inArray||function(v,a,b){var c=a.length,i=0,s=b||false;for(;i<c;i++){if(a[i]==v){if(s){if(a[i]===v){return true}}else{return true}}}return false},forEach:function(a,b){if(a.forEach){return a.forEach(b)}var i=-1;while(a[++i]){b.call(a[i],i)}},getDefaultWH:function(e){var a=DOM(e),dis=a.readStyle('display'),w=a.readStyle('width'),h=a.readStyle('height'),abs;a.addStyle({width:'auto',height:'auto',display:'block'});abs={width:e.offsetWidth,height:e.offsetHeight};a.addStyle({width:w,height:h,display:dis});return abs},toURIParams:function(a){if(!this.isObject(a)){throw TypeError('argument must be an Object.');return}var b=[],i;for(i in a){if(!i.isPrototypeOf(a)){b[enc(i)]=enc(a[i])}}return b.join('&=')},getExecuteNames:function(a){var b,n=this.getRealName(a),sc=y.getElementsByTagName('script'),len=sc.length,i=len-1,sp;if(!n||n===''){throw Error('extend class name is undefined.');return}for(;i>=0;i--){if(sc[i].src&&sc[i].src.indexOf(n)!==-1){b=sc[i].src;break}}if(!b||ut.grep(b,'?')){return{name:n,bindName:n}}sp=b.split('&');return{name:n,bindName:(sp[1]&&ut.grep(sp[1],'bind'))?sp[1].split('=')[1]:n}},getRealName:function(b){return b.name||(function(){var a=b.toString();return a.slice(9,a.indexOf('('))})()},cleanEvElm:function(){Base.event.deleteAllEvent();STACK.ELEMENTS=[];STACK.GLOBAL_LAYER=null;STACK.DEFFERD={}},camel:function(a){var b,p,i=0;if(a in STACK.CAMELED_PROP){return STACK.CAMELED_PROP[a]}if(!ut.grep(a,'-')){return a}b=a.split('-');p=[b[0]];while(b[++i]){p[i]=b[i].charAt(0).toUpperCase()+b[i].slice(1).toLowerCase()}STACK.CAMELED_PROP[a]=p.join('');return STACK.CAMELED_PROP[a]},deCamel:function(a){var b;if(a in STACK.DECAMELED_PROP){return STACK.DECAMELED_PROP[a]}b=a.replace(/([A-Z]{1})/g,'-$1').toLowerCase();STACK.DECAMELED_PROP[a]=b;return b},exists:function(a){var h=CORE_CONFIG.globalNames.Helper,obj=(h!='')?B[h]:B;return!!obj[a]},toString:function(){return'[ Class Utility ]'}};if(ua.Firefox){B.Event.prototype.__defineGetter__('offsetX',function(){return this.layerX});B.Event.prototype.__defineGetter__('offsetY',function(){return this.layerY});B.Event.prototype.__defineGetter__('wheelData',function(){return this.detail})}function Event(){this.DRreg=/domready/i;this.ae=STACK.AJAX_EVENTS;this.df=STACK.DOM_LOADED_FUNCS;this.lf=STACK.LOADED_FUNCS;this._customEvents=[];this._AjaxEventNames={'AjaxEnd':1,'AjaxComplete':1,'AjaxError':1};this.EXPR_LIVE_LIST=[];this.LIVE_LIST=[];this.LIVE_EVENTS='mousemove|mouseout|mouseover|mousedown|mouseup|mousewheel|DOMMouseScroll|click|keydown|keypress|keyup'}Event.prototype={set:function(a,b,c,d,e,f){var g=d||false,target=(a instanceof xElement)?a.get():a,closure,once=e||false,capture=f||false,df=this.df,lf=this.lf;if(this._AjaxEventNames[b]){this.ae[this.ae.length]=[target,b,c,g,once];return}else if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.add(target,b,c,g,once);return}else if(b==='flick'){this.__setCustomFlickEvent(target,c,g,once);return}if(b==='mousewheel'&&(!('onmousewheel'in body)&&ua.Opera)){b='DOMMouseScroll'}closure=this.__createClosure(target,b,c,g,once,capture);if(this.DRreg.test(b)){df[df.length]=[closure,g]}else if(b==='load'&&target===B){lf[lf.length]=[closure,g]}else{this.__set(target,b,closure,c,capture)}},once:function(a,b,c,d){this.set(a,b,c,d,true)},custom:function(a,b,c,d){var e=d||false,elm=(a instanceof xElement)?a.get():a,closure=this.__createWrap(a,c,e,b,false),ael='addEventListener',ce=this._customEvents;if(a[ael]){a[ael](b,closure,false)}ce[ce.length]=[a,b,c,closure,e];return},removeCustom:function(a,b,d){var c=this._customEvents,len=c.length,i=0,elm=(a instanceof xElement)?a.get():a,del='removeEventListener';for(;i<len;i++){if(c[i][0]===elm&&c[i][1]===b&&(!d||c[i][2]===d)){if(elm[del]){elm[del](b,c[i][3],false)}c.splice(i,1)}}},fire:function(a,b,c,d){var e,elm=(a instanceof xElement)?a.get():a,dp='dispatchEvent';if(y.createEvent){e=y.createEvent('Events');e.initEvent(b,true,true)}else{throw new Error('don\'t supports custom Event on your Browser');return}e.dataType=d;e.data=c;if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.dispatch(a,e);return}if(elm[dp]){elm[dp](e)}},live:function(a,b,c,d){var e=DOM.__fallbackQuery(a);this.exprLive(e,b,c,d||undefined,a)},exprLive:function(a,b,c,d,e){if(b.indexOf(this.LIVE_LIST)===-1){return}var f=d||false,closure=this.__createLiveClosure(c,f,b,a),ELL=this.EXPR_LIVE_LIST;this.__set(e||y,b,closure,c);ELL[ELL.length]=[b,c,a,closure,e||y]},deLive:function(a,b,c){var d=DOM.__fallbackQuery(a);this.exprdeLive(d,b,c,bindObj||undefined,a)},exprdeLive:function(a,b,c,d){var e=this.EXPR_LIVE_LIST,len=e.length,i=0,base=d||y;for(;i<len;i++){if(e[i]&&e[i][0]===b&&e[i][2]===a&&e[i][4]===base&&(!c||e[i][1]===c)){this.__remove([e[i][4],e[i][0],e[i][3]],i,e)}}},remove:function(a,b,c){var d=STACK.EVENT_HANDLERS,fnslen=d.length,i=fnslen-1,ind=-1;if(ut.isArray(b)){while(b[++ind]){if(b[i]){this.remove(a,b[i],c||undefined)}}return}if(this._AjaxEventNames[b]){this.__removeAjaxEvents(a,b,c);return}else if(b in CUSTOM_EVENT._customs){CUSTOM_EVENT.remove(a,b,c);return}for(;i>=0;i--){if(d[i][0]===a&&d[i][1]===b&&(!c||d[i][3]===c)){this.__remove(d[i],i,d)}}},__remove:function(a,b,c){var d='removeEventListener';if(a[0][d]){a[0][d](a[1],a[2],a[4])}c.splice(b,1)},__isAlready:function(a,b,c){var d=STACK.EVENT_HANDLERS,fnslen=d.length,i=fnslen-1;for(;i>=0;i--){if(d[i][0]===a&&d[i][1]===b&&d[i][3]===c){return true}}return false},__createClosure:function(b,c,d,e,f,g){var h=this;return function(a){if(f===true){Base.event.remove(b,c,d)}if(d.call(e||b,a)===false){a.preventDefault()}}},__createLiveClosure:function(b,c,d,f){var g=this;return function(a){var e=a||B.event,elm=e.target||e.srcElement,list=DOM.getElementsBySelector(f),len=list.length,i=0;if(elm.nodeType===3){elm=elm.parentNode}for(;i<len;i++){if(list[i]===elm){if(b.call(c||elm,a)===false){a.preventDefault()}return}}}},__set:function(a,b,c,d,e){var f='addEventListener',EH=STACK.EVENT_HANDLERS;if(a[f]){a[f](b,c,e)}EH[EH.length]=[a,b,c,d,e]},deleteAllEvent:function(){var a=STACK.EVENT_HANDLERS,len=a.length,i=0,t,e,f,del='removeEventListener';for(;i<len;i++){t=a[i][0];e=a[i][1];f=a[i][2];if(!t||!e||!f){continue}if(t[del]){t[del](e,f,a[4])}}STACK.EVENT_HANDLERS=[]},__execDOM:function(){H.DOM_LOADED=true;H.DOM_CREATE_TIME=(new Date()).getTime()-H.INITIAL_TIME;STACK.BODY=STACK.HTML=body=y.body;var b=STACK.API_STACK,apilen=b.length,s,css=STACK.CSS_STACK,csslen=css.length,a=0,tmp,f=STACK.DOM_LOADED_FUNCS,len2=f.length;if(apilen>0){for(a=0;a<apilen;a++){apiLoad('script',b[a][0])}}for(a=0;a<csslen;a++){apiLoad('css',css[a][0],css[a][1]||null)}for(a=0;a<len2;a++){f[a][0]()}if(ut.isFunction(H.START_CONTROLLER)){H.START_CONTROLLER()}},__execLoad:function(e){H.WINDOW_LOADED=true;H.WINDOW_LOADED_TIME=(new Date()).getTime()-H.INITIAL_TIME;var f=STACK.LOADED_FUNCS,len=f.length,i=0;for(;i<len;i++){f[i][0]()}},__setCustomFlickEvent:function(a,b,c,d){var e=this,control=new this.__flickEvent(a,b,d);this.set(a,'touchstart',control,false);this.set(a,'touchmove',control,false);this.set(a,'touchend',control,false)},__flickEvent:function(a,b,c,d){this.target=a;this.listener=b;this.bindObj=c;this.isOnce=d||false},toString:function(){return'[ Class Event ]'}};function CustomEvent(){this._customs={};this._customsStack={}}CustomEvent.prototype={regist:function(a,b,c){if(!a||!b){throw Error('parameters not enough at CustomEvent.regist.');return}this._customs[a]={type:b,fn:c}},destroy:function(a){if(a in this._customs){delete this._customs[a]}},add:function(a,b,c,d,e){if(!this._customs[b]){return}var f=this._customs[b],CES=this._customsStack,ael='addEventListener',closure=this.__createCustomClosure(a,b,c,f.fn,d,e),stack={target:a,type:b,closure:closure,listener:c,isOnce:e||false};if(a[ael]){a[ael](f.type,closure,false)}if(CES[b]){CES[b][CES[b].length]=stack}else{CES[b]=[stack]}},remove:function(a,b,c){if(!this._customs[b]||(!this._customsStack[b]||this._customsStack[b].length===0)){return}var d=this._customsStack[b],CE=this._customs[b],i=d.length,rel='removeEventListener',S;while(d[--i]){S=d[i];if(S.target===a&&(!c||(c&&S.listener===c))){if(a[rel]){a[rel](CE.type,S.closure,false)}d.splice(i,1)}}},dispatch:function(a,b){if(!this._customs[type]||(!this._customsStack[type]||this._customsStack[type].length===0)){return}var c=this._customsStack[type],CE=this._customs[type],i=c.length,S;while(c[--i]){S=c[i];if(S.target===a){S.closure(b)}}},__createCustomClosure:function(c,d,e,f,g,h){var i=this;return function(a){var b=a||B.event;if(f(c,b)===true){e.call(g,new Base.event.__margeDOM2Event(c,b));if(h){i.remove(c,d,e)}}}},toString:function(){return'[class CustomEvent]'}};function Loader(){this.ap={};this.apcs={};this.instanced=STACK.INSTANCED_API;this.appPath=CORE_CONFIG.APPPATH;this.swfDefaultOptions={scale:'noScale',salign:'lt',menu:false,wmode:'transparent'}}Loader.prototype={config:function(a){if(ut.isString(a)&&!(a in this.ap)){this.__loadAPI(this.appPath+'config/'+a+EXT)}},helper:function(a){var i=0,len,hp=CORE_CONFIG.globalNames.Helper,loadName;if(ut.isArray(a)){for(len=a.length;i<len;i++){this.helper(a[i])}return}else if(typeof a==='string'){loadName=a.replace('_helper','')+'_helper';if(loadName in this.ap){return}if(hp!=''&&!B[hp]){B[hp]={}}if(!B.functionExists){B.functionExists=ut.exists}this.__loadAPI(this.appPath+'helpers/'+loadName+EXT,loadName,'h')}},library:function(a){this.__lbLoad(a,'libraries/','l')},model:function(a){this.__lbLoad(a,'models/','mo')},__lbLoad:function(a,b,c){var i,len;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.__lbLoad(a[i],b,c)}return}else if(typeof a==='string'){if(a in this.ap){if(this.instanced[a]){Controller[a]=this.instanced[a];return}}else{this.__loadAPI(this.appPath+b+a+EXT,a,c)}STACK.API_READY[a]=false}},module:function(a){var i,len,m;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.module(a[i])}return}else if(typeof a==='string'){m=CORE_CONFIG.globalNames.Module;if(!B[m]){B[m]=Module}if(a in this.ap){return}if(MODULES.hasOwnProperty(a)){if(!Module[a]){Module[a]=MODULES[a]}this.ap[a]=true}else{this.__loadAPI(this.appPath+'modules/'+a+EXT,a,'m')}}STACK.MODULE_READY[a]=false},css:function(a,b){if(a in this.apcs){return}this.__loadCSS(this.appPath+'fl_css/'+a+'.css',a,b||false)},ajax:function(){if(!Controller.ajax){Controller.ajax=new AjaxInit()}},view:function(b,c,d){if(!Controller.ajax){this.ajax()}Controller.ajax.get(b,{async:!!!d,success:function(a){DOM(c).append(a.responseText)}})},plugin:function(a){var i=-1,len;if(ut.isArray(a)){while(a[++i]){this.plugin(a[i])}}else if(typeof a==='string'){if(!(a in this.ap)){this.__loadAPI(this.appPath+'plugins/'+a+EXT,a,'p')}}},__loadAPI:function(a,b,c,d){var e=STACK.API_STACK;this.ap[b]=b;if(H.DOM_LOADED){apiLoad('script',a)}else if(/mo|h|p/.test(c)){y.write('<script type="text\/javascript" src="'+a+'" charset="UTF-8"><\/script>')}else{e[e.length]=[a,b,c,d||0]}},__loadCSS:function(a,b,c){var d,SCS=STACK.CSS_STACK;if(H.DOM_LOADED){apiLoad('css',a,c||null)}else if(ua.IE&&!ua.IE9){d=['<link rel="stylesheet" type="text/css" href="',a,'"'];if(c){d[d.length]=' media="',c,'"'}d[d.length]=' />';y.write(d.join(''))}else{SCS[SCS.length]=[b,c||null];this.apcs[b]=true}},language:function(a){var b=([this.appPath,'languages/',(CORE_CONFIG.language||'japanese'),EXT]).join('');if(H.DOM_LOADED){apiLoad('script',b)}else{y.write('<script type="text\/javascript" src="'+b+'" charset="UTF-8"><\/script>')}H.languages={}},__swfInit:function(){this.swfDefaultOption={scale:'noScale',salign:'lt',menu:false,wmode:'transparent'}},swf:function(a,b,c,d){this.__swfInit();if(arguments.length<1){throw TypeError('not enough arguments of Loader.swf');return}var e=y.createElement('object'),str=['<object '],op=c||{},opt=union(this.swfDefaultOption,op||{}),flvar=ut.toURIParams(op.param||op.flashVars||{}),p,i;if(!d){e.width=op.width||600;e.height=op.height||400;if(b){e.id=b}for(i in opt){p=y.createElement('param');p.name=i;p.value=opt[i];e.appendChild(p)}if(flvar!==''){p=y.createElement('param');p.name='FlashVars';p.value=flvar;e.appendChild(p)}e.type='application/x-shockwave-flash';e.data=a;e.style.visibility='visible';if(op.width){e.style.width=op.width+'px'}if(op.height){e.style.height=op.hjeight+'px'}return DOM(e)}else{str[str.length]='style="visibility:visible;width:'+(op.width||600)+'px;height:'+(op.height||400)+'px" ';if(b){str[str.length]='id="'+b+'" '}str[str.length]='type="application/x-shockwave-flash" data="',a,'">';for(i in opt){str[str.length]='<param name="',i,'" value="',opt[i],'" />'}if(flvar!==''){str[str.length]='<param name="FlashVars" value="',flvar,'" />'}str[str.length]='</object>';return str.join('')}},_fl_autoLoader:function(){var C=CORE_CONFIG,path=C.APPPATH,boost,pls=C.usePlugins;if(C.useBuiltinClassExtend){pls[pls.length]='prototype_extend'}if(pls.length>0){this.plugin(pls)}if(C.autoLoadHelper.length>0){this.helper(C.autoLoadHelper)}if(C.autoLoadModule.length>0){this.module(C.autoLoadModule)}if(C.autoLoadModel.length>0){this.model(C.autoLoadModel)}if(C.autoLoadLibrary.length>0){this.library(C.autoLoadLibrary)}},toString:function(){return'[ Class Loader ]'}};function FL_Image(){}FL_Image.prototype={preLoad:function(a){var i,len,IMG;if(ut.isArray(a)){for(i=0,len=a.length;i<len;i++){this.preLoad(a[i])}return}else if(typeof a==='string'){IMG=new Image();IMG.src=a}},getDefaultSize:function(a){var b,oldH,def;if(a.naturalWidth&&a.naturalHeight){return{width:a.naturalWidth,height:a.naturalHeight}}else if(a.runtimeStyle){b=a.runtimeStyle.width;oldH=a.runtimeStyle.height;a.runtimeStyle.width=a.runtimeStyle.height='auto';def={width:a.width,height:a.height};a.runtimeStyle.width=b;a.runtimeStyle.height=oldH;return def}else{return{width:a.width,height:a.height}}},toString:function(){return'[ Class FL_Image ]'}};function Language(){}Language.prototype={load:function(a){Controller.load.language(a)},line:function(a){return H.languages[a]||a},toString:function(){return'[ Class Language ]'}};function AjaxInit(){this.timeout=CORE_CONFIG.AjaxTimeout||30000;this.state={};this.maxConnection=CORE_CONFIG.AjaxMaxConnection;this.queue=STACK.AJAX_QUEUE}AjaxInit.prototype={__getDefaultOptions:function(m){return{method:null,param:'',success:null,error:null,async:true,start:null,abort:null,header:null,cache:false,bind:null,timeout:this.timeout}},__createXHR:function(){return new B.XMLHttpRequest()},setQueue:function(a,b,c){var d=+new Date(),M=this.maxConnection,q=this.queue,wait=(M===0||q.length>=M);q[q.length]={stable:wait,type:a,url:b,opt:c,qID:d};return!wait},__doNextQueue:function(){var a=this.queue,len=a.length,i=0,q,isEmpty=true;for(;i<len;i++){if(a[i].stable===true){a[i].stable=isEmpty=false;this.__connect(a[i].type,a[i].url,a[i].opt,a[i].opt.param);return}}if(isEmpty===true){this.queue=[]}},__getWrappedResponse:function(b){return{responseText:b.responseText,responseXML:b.responseXML,getResponseArray:function(a){return b.responseText.split(a)},getAllHeaders:function(){var a=b.getAllResponseHeaders().split(/\n/),hd={},len=a.length,i=0,h,p;for(;i<len;i++){if(a[i].length===0){continue}h=a[i];p=h.indexOf(':');hd[tr(h.slice(0,p))]=ut.trim(h.slice(p+1))}return hd}}},get:function(a,b){var p=[],i,j,len,ob,o=union(this.__getDefaultOptions(),b||{});if(ut.isObject(o.param)){ob=o.param;for(i in ob){if(ut.isArray(ob[i])){for(j=0,len=ob[i].length;j<len;j++){p[p.length]=enc(i)+'='+enc(ob[i][j])}}else{p[p.length]=enc(i)+'='+enc(ob[i])}}o.param=p.join('&')}a=this.__buildURL(a,o.param,'get');if(!this.setQueue('GET',a,o)){return}return this.__connect('GET',a,o,null)},post:function(a,b){var p=[],i,j,len,ob,o=union(this.__getDefaultOptions(),b||{});if(ut.isObject(o.param)){ob=o.param;for(i in ob){if(i.isPrototypeOf(ob)){continue}if(ut.isArray(ob[i])){for(j=0,len=ob[i].length;j<len;j++){p[p.length]=enc(i)+'[]='+enc(ob[i][j])}}else{p[p.length]=enc(i)+'='+enc(ob[i])}}o.param=(p.length>0)?p.join('&'):null}a=this.__buildURL(a,null,'post');if(!this.setQueue('POST',a,o)){return}return this.__connect('POST',a,o,o.param)},head:function(a,b){var c=this,xhr=this.__createXHR(),timer,o=union(this.__getDefaultOptions(),b||{});this.state.request='HEAD';a=this.__buildURL(a,null,'head');xhr.open('HEAD',a,true);this.state.text='LOADING';xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');o.url=a;timer=setTimeout(function(){c.stop(xhr,o)},this.timeout);xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(timer);if(ut.isFunction(o.success)){if(o.bind){o.success(xhr)}else{o.success.call(o.bind,xhr)}}xhr.onreadystatechange=null;xhr=null}};xhr.send(null);return DefferdState(this)},jsonp:function(b,c,d){if(!b||!c){throw new TypeError('not enough argument on JSONP.');}var f=this,s,bindObj=d||false,tmpSetJSONPTimeStamp=+new Date(),FJCB='FlintJSONPCallBack'+tmpSetJSONPTimeStamp,cfn=function(a){if(bindObj){c.call(bindObj,a)}else{c(a)}try{delete B[FJCB]}catch(e){B[FJCB]=undefined}finally{head.removeChild(y.getElementById('flintjsonpscript'+tmpSetJSONPTimeStamp))}};B[FJCB]=cfn;s=y.createElement('script');s.type='text/javascript';s.src=this.__buildURL(b,FJCB,'jsonp');s.id='flintjsonpscript'+tmpSetJSONPTimeStamp;head.appendChild(s);return DefferdState(this)},request:function(a){var b=union(this.__getDefaultOptions(),a),m;if(!a.url||!a.method){throw Error('not enough parameter.');}switch(a.method.toLowerCase()){case'get':return this.get(a.url,a);break;case'post':return this.post(a.url,a);break;case'jsonp':return this.jsonp(a.url,a.success);break;case'head':return this.head(a.url,a);break;default:throw Error('undefined request method');}},__buildURL:function(a,b,c){if(!/^http|^file|^\.\.?\//.test(a)){a=CORE_CONFIG.SITE_URL+a}if(c==='get'&&b){a+=(!/segment|config|/.test(CORE_CONFIG.routingMode))?((/\?/.test(a))?'&'+b:'?'+b):((/\/$/.test(a))?b.replace(/[=&]/g,'/'):'/'+b.replace(/[=&]/g,'/'))}else if(c==='jsonp'){a+=(/\?$/.test(a))?'callback='+b:(/\?/.test(a))?'&callback='+b:'?callback='+b}return a},__connect:function(a,b,o,c){var d=this,xhr=this.__createXHR(),timer,h,j;this.state.request=a;xhr.open(a,b,o.async);if(ut.isFunction(o.start)){if(o.bind){o.start.call(o.bind)}else{o.start()}}this.state.text='LOADING';xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');if(a==='POST'){xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')}if(ut.isObject(o.header)){h=o.header;for(j in h){if(!j.isPrototypeOf(h)){xhr.setRequestHeader(j,h[j])}}}if(!o.cache){xhr.setRequestHeader('If-Modified-Since',"01 Jan 1970 00:00:00 GMT");xhr.setRequestHeader('Cache-Control','no-store, no-chache, must-revalidate, post-check=0, pre-check=0');xhr.setRequestHeader('Pragma','no-cache');xhr.setRequestHeader('Expires','Mon, 26, Jul, 1997, 05:00:00 GMT')}o.url=b;timer=B.setTimeout(function(){d.stop(xhr,o)},o.timeout);if(o.async){xhr.onreadystatechange=function(){d.__loadedFunc(xhr,o,timer)}}xhr.send(c);o._defferd=DefferdState(this);if(!o.async){this.__loadedFunc(xhr,o,timer)}return o._defferd},__loadedFunc:function(a,o,b){var c=this,RES=H.XHR_RESPONSES,resp=null;c.state.code=a.readyState;if(a.readyState==4){try{B.clearTimeout(b)}catch(e){}c.state.text='COMPLETED';if(a.status==200||(/^file/.test(o.url))){c.state.httpResponse='LOADED';resp=c.__getWrappedResponse(a);if(ut.isFunction(o.success)){if(o.bind){o.success.call(o.bind,resp)}else{o.success(resp)}}c.__doAjaxEvent('AjaxComplete',resp,o,a);o._defferd.success()}else{c.state.httpResponse=RES.STATUS[a.Status]||999;if(ut.isFunction(o.error)){if(o.bind){o.error.call(o.bind,{status:a.Status})}else{o.error({status:a.Status})}}c.__doAjaxEvent('AjaxError',resp,o,a);o._defferd.failed()}c.__doAjaxEvent('AjaxEnd',resp,o,a);c.__doNextQueue();c.opt={};if(enables.xhr){a.onreadystatechange=null}a=null}},stop:function(a,o){a.abort();if(ut.isFunction(o.stop)){if(o.bind){o.stop.call(o.bind)}else{o.stop()}}this.__doAjaxEvent('AjaxError',null,o,a);this.__doAjaxEvent('AjaxEnd',null,o,a);o._defferd.abort()},__doAjaxEvent:function(a,b,o,c){var d=STACK.AJAX_EVENTS,len=d.length,i=0,callFn,e;for(;i<len;i++){if(d[i][1]===a){d[i][2].call(d[i][3],new this.__AjaxFakeEvent(a,d[i][0],c,b,o));if(d[i][4]===true){d.splice(i,1)}}}},__AjaxFakeEvent:function(a,b,c,d,p){this.type=a;this.data=d;this.target=c;this.params=p;this.currentTarget=b;this.relatedTarget=null;this.keyCode=null;this.shiftKey=false;this.ctrlKey=false;this.which=null;this.button=0;this.propertyName=undefined;this.pageX=0;this.pageY=0;this.clientX=0;this.clientY=0;this.stopPropagation=returnFalse;this.preventDefault=returnFalse},toString:function(){return'[ Class Ajax ]'}};function Extends(a,b){var c;if(typeof a!=='string'){throw Error('Extend Class must be string!');return}c=a.toLowerCase();if(this[c]){this[c](b,c)}else{throw new TypeError('undefined extend Class on ClassExtend.');}}Extends.prototype={config:function(a){var p;if(ut.isObject(a)){for(p in a){if(!p.isPrototypeOf(a)&&!CORE_CONFIG[p]){CORE_CONFIG[p]=a[p]}}}},element:function(a){this.__extend(a,xElement.prototype)},nodelist:function(a){this.__extend(a,xNodeList.prototype)},elementlist:function(a){this.__extend(a,xNodeList.prototype)},effect:function(a){this.__extend(a.Animation)},__extend:function(a,b){var p;if(ut.isFunction(a)){a=new a()}if(ut.isObject(a)){for(p in a){if(!p.isPrototypeOf(a)){b[p]=a[p]}}}},controller:function(a){var b,i,Method;a.prototype=Controller;b=new a();H.CONTROLLER=b;if(CORE_CONFIG.routingMode==='none'){B[H.CONTROLLER_NAME]=b}if(b.hasOwnProperty('__construct')){b.__construct()}Method=b.router.fetchMethod();H.EXEC_METHOD=(Method==='none')?'index':Method;function startup(){if(b.hasOwnProperty('_remap')){b._remap(Method)}else if(b.hasOwnProperty(Method)&&/^[_]/.test(Method)===false){b[Method].call(b,H.METHOD_ARGUMENTS)}else{if(CORE_CONFIG.debugMode){throw Error(Method+' is undefined or private');}}H.START_CONTROLLER=null}if(!H.DOM_LOADED){H.START_CONTROLLER=startup}else{startup()}},language:function(a){H.languages=a}};Extends.prototype.model=Extends.prototype.library=function(b,c){var d=ut.getExecuteNames(b),tmp,i,a=STACK.API_READY_FUNC[d.bindName],len,CON=H.CONTROLLER||Controller;if(c==='model'){b.prototype=Model}tmp=STACK.INSTANCED_API[d.name]=new b();if(tmp.__construct){tmp.__construct()}tmp.parent=CON;CON[d.name]=tmp;STACK.API_READY[d.name]=true;if(a){for(i=0,len=a.length;i<len;i++){a[i]()}a=null}};function Router(){this._controllerName='';this._directoryName='';this._methodName='';this._conf=CORE_CONFIG;this._uri=loadClass('URI');this.__setRouting()}Router.prototype={__setRouting:function(){switch(this._conf.routingMode){case'none':this._controllerName=this._conf.globalNames.Controller;this._methodName='none';break;case'segment':var l,arg,argC=2,uri=this._uri.uri,base=this._conf.SITE_URL,point;l=uri.replace(base,'');arg=(l==='')?[this._conf.defaultController,'index']:l.split('/');while(ut.inArray(arg[0],this._conf.directoryList)){arg[0]=arg[0]+'/'+(arg[1]||'');arg.splice(1,1)}if(!arg[1]){arg[1]='index'}point=arg[0].lastIndexOf('/');if(point===-1){this._controllerName=arg[0];this._directoryName=''}else{this._directoryName=arg[0].slice(0,point)+'/';this._controllerName=arg[0].slice(point+1)}this._methodName=arg[1];while(arg[argC]){H.METHOD_ARGUMENTS[arg[argC-2]]=arg[argC];argC++}break;case'config':this._controllerName=this._conf.loadController||this._conf.defaultController;this._methodName=this._conf.execMethod||'index';break;default:break}},fetchDirectory:function(){return this._directoryName},fetchClass:function(){return this._controllerName},fetchMethod:function(){return this._methodName},toString:function(){return'[ Class Router ]'}};function FL_Base(){this.instance=this}FL_Base.prototype={getInstance:function(){return this.instance}};function _Controller(){this._flInitialize()}_Controller.prototype={_flInitialize:function(){var a={config:'Config',benchmark:'BenchMark',uri:'URI',lang:'Language',router:'Router',event:'Event',ut:'Utility',load:'Loader',image:'FL_Image',input:'Input',customEvent:'CustomEvent'},i;for(i in a){this[i]=loadClass(a[i])}this.ua=ua;this.ready=ready;this.union=union;this.alias=alias;this.DOM=DOM;this.Module=Module;this.system=H;this.Timer=Timer;this.json=B.JSON;this.Animation=Animation;this.defferd=DefferdInit},__load:function(a){var s;if(!H.DOM_LOADED){y.write('<script type="text\/javascript" src="'+a+'" charset="UTF-8"><\/script>')}else{apiLoad('script',a)}}};function _Model(){this.__construct()}_Model.prototype={__construct:function(){var a={config:'Config',benchmark:'BenchMark',uri:'URI',ajax:'AjaxInit',lang:'Language',router:'Router',event:'Event',ut:'Utility',load:'Loader',ua:'UserAgent'},i;for(i in a){this[i]=loadClass(a[i])}this.union=union;this.alias=alias;this.connect=connect;this.json=B.JSON;this.disConnect=disConnect}};function Module(a){var M=B[CORE_CONFIG.globalNames.Module],MM=M[a],ag=arguments,k=0,ind=-1,m=[];if(!MM){return}while(ag[++k]){m[++ind]=ag[k]}return MM.apply(MM,m)}Module.ready=function(a,b){var c=STACK.MODULE_READY,mrf=STACK.MODULE_READY_FUNC;if(c[a]&&c[a]===true){b()}else{if(!mrf[a]){mrf[a]=[b]}else{mrf[a].push(b)}}};Module.attach=function(a){var i;if(typeof a==='function'){Module[ut.getRealName(a)]=a}else if(typeof a==='object'){for(i in a){if(!i.isPrototypeOf(a)){Module[i]=a[i]}}}};Module.onReady=function(a){var b=STACK.MODULE_READY,mrf=STACK.MODULE_READY_FUNC,ind=-1;if(!b[a]||b[a]===false){b[a]=true}if(mrf[a]){if(ut.isArray(mrf[a])){while(mrf[a][++ind]){mrf[a][ind]()}mrf[a]=[]}else{mrf[a]()}}};function DefferdState(a,b){if(a instanceof _Defferd){a._appoint=b;return a}var c=(a instanceof AjaxInit||a instanceof Animation),state={success:!c,failed:!c,abort:!c};return new _Defferd(a,state,b||0)}DefferdState.prototype={};function _Defferd(a,b,c){this._state=b;this._instance=a;this.__isLocked=false;this._appoint=c;this._callbacks={success:[],failed:[],abort:[]}}_Defferd.prototype={success:function(a){return this.__registOrFire('success',a)},failed:function(a){return this.__registOrFire('failed',a)},abort:function(a){return this.__registOrFire('abort',a)},__registOrFire:function(a,b){var i=-1,c=this._callbacks[a];if(typeof b==='undefined'){this.__updateState(a)}else if(ut.isFunction(b)){c[c.length]=b}else if(ut.isArray(b)){while(b[++i]){c[c.length]=b[i]}}return this},isSuccess:function(){return isSuccess},isFailed:function(){return isFailed},isAbort:function(){return isAbort},__updateState:function(a){if(this.__isLocked){return}this.__isLocked=true;this._state[a]=true;var i=-1,c=this._callbacks[a];while(c[++i]){c[i]()}if(this._appoint>0){FL_Defferd.meet(this._appoint,a)}},toString:function(){return'[class DefferdState]'}};function FL_Defferd(a){var i=-1,ary=[],q=++DEFFERD_ID;while(a[++i]){ary[ary.length]=DefferdState(a[i],q)}this._callbacks={success:null,failed:null,abort:null};this.__locked=false;this._ary=ary;STACK.DEFFERD[q]=this;return this}FL_Defferd.meet=function(a,b){if(!(a in STACK.DEFFERD)||this.__locked===true){return}var D,flag,i=-1,SD=STACK.DEFFERD[a],st=SD._ary,cb=SD._callbacks;switch(b){case'success':flag=true;while(st[++i]){D=st[i]._state;if(D.success!==true){flag=false}}break;default:flag=false;while(st[++i]){D=st[i]._state;if(D[b]===true){flag=true;break}}break}if(flag===true&&ut.isFunction(cb[b])){cb[b]();this.__locked=true}};FL_Defferd.prototype={success:function(a){this._callbacks.success=a},failed:function(a){this._callbacks.failed=a},abort:function(a){this._callbacks.abort=a},toString:function(){return'[class FL_Defferd]'}};DOM=function(a,p){var e,i=-1,ret=[],SE=STACK.ELEMENTS;if(!a){body?STACK.ELEMENTS[body.__exid]||new xElement(body,null):null}else if(a===y||a===window||a instanceof xElement||a instanceof xNodeList){return a}else if(a.nodeType&&a.nodeType===1){a.__exid=a.__exid||++EXID;if(a.__exid&&SE[a.__exid]){return SE[a.__exid]}else{e=new xElement(a,p||null);SE[a.__exid]=e;return e}}else if(a.length&&a.item&&!a.slice){while(a[++i]){ret[i]=a[i]}return new xNodeList(ret,p||null)}else if(a.constructor===Array){while(++i){if(a[i].nodeType&&a[i].nodeType===1){ret[ret.length]=a[i]}}return new xNodeList(ret,p||null)}else if(typeof a==='string'){return new xNodeList(DOM.getElementsBySelector(a,p||null))}else{throw TypeError('invalid argument type called DOM.');}};DOM.id=function(a){var b;if(typeof a!=='string'){return null}b=y.getElementById(a);return b&&!b.__ignore?STACK.ELEMENTS[b.__exid]||new xElement(b):null};DOM.className=function(v,a){var b=y.getElementsByClassName(v),r=[],ind=-1,i=0;while(b[i]){if(b[i]&&!b[i].__ignore){r[++ind]=b[i]}++i}return new xNodeList(r)};if(!y.getElementsByClassName){DOM.className=function(v,a){var b=y.getElementsByTagName(a||'*'),r=[],ind=-1,i=0;if(enables.canASCall){r=Array.prototype.slice.call(b)}else{while(b[i]){if(b[i]&&b[i].nodeType&&b[i].nodeType===1&&!b[i].__ignore){r[++ind]=b[i]}++i}}return new xNodeList(DOM.hasClass(r,v))};DOM.hasClass=function(a,b){var c=[],len=a.length,cName=' '+b+' ',e,cl,ind=-1,i=0;for(;i<len;i++){e=a[i];cl=' '+e.className+' ';if(cl.indexOf(cName)!==-1){c[++ind]=e}}return c}}DOM.tag=function(a,b){var n=b||y,nl=n.getElementsByTagName(a||'*'),i=0,e,r=[],ind=-1;while(nl[i]){e=nl[i];if(e&&e.nodeType&&e.nodeType===1&&!e.__ignore){r[++ind]=e}++i}return new xNodeList(r)};DOM.byName=function(a){var b=y.getElementsByName(a),i=0,r=[],ind=-1,e;if(enables.canASCall){r=Array.prototype.slice.call(b)}else{while(b[i]){e=b[i];if(e&&e.nodeType&&e.nodeType===1&&!e.__ignore){r[++ind]=e}++i}}return new xNodeList(r)};DOM.css=function(a,b){var c=this.getElementsBySelector(a,y,!!b);return new xNodeList(c)};DOM.origCSS=function(a){var b=this.getElementsBySelector(a,y,true);return new xNodeList(b)};DOM.create=function(a,b){var e=new xElement(y.createElement(a)),i;if(b&&typeof b==='object'){for(i in b){e.attr(i,b[i])}}return e};DOM.fallbackQuery=function(e){if(e===y||e===B){return''}var a,id,q,ind=-1,resQ=[];do{q=[e.tagName.toLowerCase()];if(e.id){q[q.length]='#'+e.id}if(e.className){q[q.length]='.'+e.className.replace(' ','.')}resQ[++ind]=q.join('');e=e.parentNode}while(e!==y);return resQ.reverse().join(' > ')};DOM.getElementsBySelector=function(a,b){var c=b||y,tmp=c.querySelectorAll(a),len=tmp.length,i=0,ind=-1,ret=[];for(;i<len;i++){if(!tmp[i].__ignore){ret[++ind]=tmp[i]}}return ret};function xElement(e,a){if(e instanceof xElement){return e}this.element=e;this.tag=e.tagName?e.tagName.toLowerCase():'';this.__parent=a||null;e.normalize()}xElement.prototype={get:function(){return this.element},__getCID:function(){return this.element.__exid},rollBack:function(a){var n=0,t=a||1,e=this;while(n++<t){e=e.__parent;if(e===null){return null}}return e},ignore:function(){this.element.__ignore=++ignoreID;return this},recognize:function(){this.element.__ignore&&(this.element.__ignore=undefined);return this},absDimension:function(){var a=ut.getAbsPosition(this.element),w=this.readStyle('width',true),h=this.readStyle('height',true);w=(!w||w==='auto'||w===0)?this.element.offsetWidth:w;h=(!h||h==='auto'||h===0)?this.element.offsetHeight:h;return{top:a.y,left:a.x,right:a.x+w,bottom:a.y+h,width:w,height:h}},defaultSize:function(){return ut.getDefaultWH(this.element)},attr:function(a,b){var i,res;if(typeof a==='object'){for(i in a){this.attr(i,a[i])}}else if(typeof a==='string'){if(typeof this['__extendAttr'+a]==='function'){if(this['__extendAttr'+a](b)===true){return this}}this.element.setAttribute(a,b)}return this},readAttr:function(a){var i=-1,len,ret;if(typeof a==='string'){return this.element.getAttribute(a)}else if(ut.isArray(a)){ret={};while(a[++i]){ret[a[i]]=this.readAttr(a[++i])}return ret}},removeAttr:function(a){var i=-1,len;if(typeof a==='string'){this.element.removeAttribute(a)}else if(ut.isArray(a)){while(a[++i]){this.element.removeAttribute(a[i])}}return this},addClass:function(v){var c;if(!v||v===''){return this}c=this.element.className;if((' '+c+' ').indexOf(' '+v+' ')===-1){this.element.className=(c==='')?v:(c+' '+v)}return this},hasClass:function(v){return(' '+this.element.className+' ').indexOf(' '+v+' ')!==-1},removeClass:function(v){var a=this.element.className.split(' '),len=a.length,st=[],ind=-1,i=-1;while(a[++i]){if(a!==''&&a[i]!==v){st[++ind]=a[i]}}this.element.className=(st.length>0)?st.join(' '):'';return this},replaceClass:function(a,b){if(this.hasClass(a)){this.removeClass(a).addClass(b)}return this},toggleClass:function(c){return this[this.hasClass(c)?'removeClass':'addClass'](c)},event:function(a,b,c){Base.event.set(this.element,a,b,c||false);return this},hover:function(a,c,d){var b=d||false;if(a){Base.event.set('mouseover',a,b)}if(c){Base.event.set('mouseout',c,b)}return this},once:function(a,b,c){Base.event.once(this.element,a,b,c||false);return this},Cevent:function(a,b){Base.event.set(this.element,a,b,H.CONTROLLER);return this},unevent:function(a,b){var i=-1;if(ut.isArray(a)){while(a[++i]){this.unevent(a[i],b||undefined)}}else{if(a.indexOf(',')!==-1){a=a.replace(' ','').split(',');while(a[++i]){Base.event.remove(this.element,a[i])}}else{Base.event.remove(this.element,a,b||undefined)}}return this},customEvent:function(a,b,c){Base.event.custom(this.element,a,b,c||false);return this},unCustomEvent:function(a,b,c){Base.event.removeCustom(this.element,a,b,c||false);return this},fire:function(a,b,c){Base.event.fire(this.element,a,b||null,c||'null');return this},live:function(a,b,c){Base.event.live(this.element,a,b,c||false);return this},inText:function(a,b){if(b){if(this.element.innerText){this.element.innerText=a}else if(this.element.textContent){this.element.textContent=a}}else{this.element.appendChild(y.createTextNode(a))}this.element.normalize();return this},getText:function(){return this.element.textContent||this.element.innerText},html:function(a){this.element.innerHTML=a;return this},getHTML:function(){return this.element.innerHTML},appendTo:function(a,b){var p=b||'default',t=(!a)?body:(a instanceof xElement)?a.get():a;if(p==='before'){t.parentNode.insertBefore(this.element,t)}else if(p==='after'){if(t.parentNode.lastChild===t){t.parentNode.appendChild(this.element)}else{t.parentNode.insertBefore(this.element,t.nextSibling)}}else{t.appendChild(this.element)}return this},append:function(a){var d;if(a instanceof xElement){this.element.appendChild(a.get())}else if(a.nodeType&&(a.nodeType===1||a.nodeType===3)){this.element.appendChild(a)}else if(typeof a==='string'){d=y.createElement('div');d.innerHTML=a;while(d.childNodes.length>0){this.element.appendChild(d.firstChild)}d=null}return this},prependTo:function(a){var t=(!a)?body:(a instanceof xElement)?a.get():a;(t.firstChild)?t.insertBefore(this.element,t.firstChild):t.appendChild(this.element);return this},prepend:function(a){var d;if(a instanceof xElement){this.element.insertBefore(a.get(),this.element.firstChild)}else if(a.nodeType&&(a.nodeType===1||a.nodeType===3)){this.element.insertBefore(a,this.element.firstChild)}else if(typeof a==='string'){d=y.createElement('div');d.innerHTML=a;while(d.childNodes.length>0){this.element.insertBefore(d.lastChild,this.element,firstChild)}d=null}return this},wrap:function(a){var e=y.createElement(a),r;if(y.createRange){r=y.createRange();r.selectNode(this.element);r.surroundContents(e);r.detach()}else{throw Error('wrap method is not supported on your Browser.');return}return STACK.ELEMENTS[e.__exid]||new xElement(e,this)},unwrap:function(){var a=y.createDocumentFragment(),p=this.element.parentNode,c,len,i=-1;if(!p||p===y.body){throw Error('document.body cannnot remove!');return this}while(p.firstChild){a.appendChild(p.firstChild)}p.parentNode.removeChild(p);p.parentNode.appendChild(a);return this},copy:function(a){var b=a||false,e=this.element,c=e.cloneNode(b);if(e.id){c.id=e.id+'_clone'}e.__exID=++EXID;e.__ignore=undefined;return new xElement(c)},remove:function(){if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}return this},empty:function(){this.element.innerHTML='';return this},isEmpty:function(){return!this.element.hasChildNodes()},replace:function(a){var t=(a instanceof xElement)?a.get():a;this.element.parentNode.replaceChild(this.element,t);return this},replaceTo:function(a){var t=(a instanceof xElement)?a.get():a;t.parentNode.replaceChild(t,this.element);return this},hide:function(){this.element.style.display='none';return this},isHidden:function(){return this.readStyle('display')==='none'},isAnimate:function(){return!!this.element.__animate},show:function(a){var v=(a==='i')?'inline':(a==='ib')?'inline-block':'block';this.element.style.display=v;return this},toggleShow:function(){this[this.isHidden()?'show':'hide']();return this},visible:function(){this.element.style.visibility='visible';return this},invisible:function(){this.element.style.visibility='hidden';return this},isVisible:function(){return this.readStyle('visibility')!=='hidden'},toggeleV:function(){this[this.isVisible()?'invisible':'visible']();return this},getValue:function(){return('value'in this.element)?this.element.value:null},setValue:function(a){if('value'in this.element){this.element.value=a}return this},prop:function(a,b){if(typeof b==='undefined'){return this.element[a]}else{this.element[a]=b;return this}},getScroll:function(){return{x:this.element.scrollLeft,y:this.element.scrollTop}},method:function(a){if(a&&a in this.element){this.element[a]()}else{throw TypeError(a+' method is not defined.');}return this},getParentForm:function(){if(this.tag==='form'){return this}else if(this.element.form){return this.element.form}var e=this.element.parentNode,reg=/form/i;while(e&&e!==y.body){if(reg.test(e.tagName)){return STACK.ELEMENTS[e.__exid]||new xElement(e,this)}e=e.parentNode}return null},parent:function(a){var l=a||1,p=this.element,i=0;while(p&&++i<=l){p=p.parentNode}return p?STACK.ELEMENTS[p.__exid]||new xElement(p,this):null},children:function(a){var c=this.element.childNodes,ind=-1,ret=[],i=-1;while(c[++i]){if(c[i].nodeType===1){ret[++ind]=c[i]}}return(typeof a!=='undefined')?(ret[a])?STACK.ELEMENTS[ret[a].__exid]||new xElement(ret[a],this):null:new xNodeList(ret,this)},first:function(){var e=this.element.firstChild;while(e){if(e.nodeType===1){break}e=e.nextSibling}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},last:function(){var e=this.element.lastChild;while(e){if(e.nodeType===1){break}e=e.previousSibling}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},next:function(a){var e=this.element,s=a||1,i=0;while(e&&i<s){e=e.nextSibling;if(e&&e.nodeType===1){++i}}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},prev:function(a){var e=this.element,s=a||1,i=0;while(e&&i<s){e=e.previousSibling;if(e&&e.nodeType===1){++i}}return e?STACK.ELEMENTS[e.__exid]||new xElement(e,this):null},detect:function(a,b){var c=DOM.getElementsBySelector(a,this.element,!!b);return new xNodeList(c,this)},detectC:function(a){var b=DOM.getElementsBySelector(a,this.element,true);return new xNodeList(b,this)},getOne:function(a,b){var i=b||0,nl=DOM.getElementsBySelector(a,this.element);return nl[i]?STACK.ELEMENTS[nl[i].__exid]||new xElement(nl[i],this):null},isExpr:function(a){var b=DOM.getElementsBySelector(a),i=-1;while(b[++i]){if(this.element===b[i]){return true}}return false},isFirst:function(){return this.parent().first().get()===this.element},isLast:function(){return this.parent().last().get()===this.element},serialize:function(){return(this.tag==='form')?ut.serializeForm(this.element):false},getContext:function(a){var d=a||'2D';if(this.element.geContext){return this.element.getContext(d)}throw TypeError('Not support CanvasRenderingContext2D on this element or Browser.');},addStyle:function(a,b){var i,p;if(typeof a==='object'){for(i in a){this.addStyle(i,a[i])}}else{p=ut.camel(a);if(typeof this['_extendStyle'+p]==='function'){if(this['_extendStyle'+p](this.element,b)){return this}}switch(p){case'opacity':return this.setOpacity(b);case'filter':return this;case'float':p='cssFloat';break;case'backgroundImage':b=(!CSS_BG_REG.test(b))?'url('+b+')':b;break;default:break}this.element.style[p]=b}return this},readStyle:function(a,b){var c,e=this.element,i=-1,isP=b||false,val,now,ret,pr;if(ut.isArray(a)){ret={};while(a[++i]){ret[ut.camel(a[i])]=this.readStyle(a[i],isP)}return ret}c=ut.camel(a);if(c==='float'){c=p='cssFloat'}else if(c==='opacity'){return this.getOpacity()}if(e.style[c]){val=e.style[c]}else{if(!COMPUTED_STYLE){return null}now=COMPUTED_STYLE(e,'');val=now.getPropertyValue(ut.deCamel(a))}if(isP){if(c==='backgroundImage'){return val.replace(/url\(["']?(.+?)["']?\)/,'$1')}pr=pf(val);return(isNaN(pr))?val:pr}else{return val}},removeStyle:function(a){var i=-1,st,sp=[],pp;if(ut.isArray(a)){while(a[++i]){this.removeStyle(a[i])}}else{st=(this.element.style.cssText)?this.element.style.cssText.toLowerCase():(this.element.getAttribute('style'))?this.element.getAttribute('style').cssText.toLowerCase():undefined;if(!st){return this}pp=ut.deCamel(a);if(st.indexOf(pp)!==-1){sp=st.split(';');while(sp[++i]){if(sp[i].indexOf(pp)!==-1){sp.splice(i,1);break}}}if(this.element.style.cssText){this.element.style.cssText=sp.join(';')}else if(this.element.getAttribute('style')){this.element.getAttribute('style').cssText=sp.join(';')}}return this},setOpacity:function(a){this.element.style.opacity=a;return this},getOpacity:function(){var a,v;if(this.element.style.opacity){return pf(this.element.style.opacity)}if(!COMPUTED_STYLE){return null}a=COMPUTED_STYLE(this.element,'');return pf(a.getPropertyValue('opacity'))},animate:function(a,b){if(typeof a==='string'&&Animation[a]){Animation[a](this.element,b)}else if(typeof a==='object'){new Animation(this.element,a,b)}return this},isSame:function(a){return this.element===DOM(a).get()},toString:function(){return'[ Class xElement ]'}};function xNodeList(a,b){var c=a.length;this.nodeList=a;this.length=c;this.__first=a[0]||null;this.__last=a[c-1]||null;this.__parent=b||null;this.__with=false}xNodeList.prototype={is:function(){return this.length>0},foreach:function(a){var n=this.nodeList,len=this.length,i=-1;while(n[++i]){if(a.call(n[i],i)===false){break}}return this},each:function(a){var n=this.nodeList,len=this.length,i=-1;while(n[++i]){if(a(n[i],i)===false){break}}return this},get:function(a){return this.nodeList[a]?STACK.ELEMENTS[this.nodeList[a].__exid]||new xElement(this.nodeList[a],this):null},slice:function(a,b){var n=this.nodeList,len=this.length,i=a,ind=-1,res=[];if(!n[i]){return null}while(n[i]){res[++ind]=n[i];++i;if(b&&b===i){break}}return new xNodeList(res,this)},first:function(){return(this.__first!==null)?STACK.ELEMENTS[this.__first.__exid]||new xElement(this.__first):null},last:function(){return(this.__last!==null)?STACK.ELEMENTS[this.__last.__exid]||new xElement(this.__last):null},add:function(a){var p=DOM(a),n=this.nodeList;pn,len,len2,i=-1;if(p instanceof xNodeList){pn=p.nodeList;len=this.length;this.__length=len;len2=p.length;while(pn[++i]){n[len++]=pn[i];++this.length}}else if(p instanceof xElement){this.length=n.push(this.__parent.get())}return this},'with':function(){var p=this.__parent,n=this.nodeList;pn,len,len2,i=-1;if(p&&!this.__with){if(p instanceof xNodeList){pn=p.nodeList;len=this.length;this.__length=len;len2=p.length;while(pn[++i]){n[len++]=pn[i];++this.length}}else if(p instanceof xElement){this.length=n.push(this.__parent.get())}this.__with=true}return this},withOut:function(){if(this.__with){if(this.__length){this.nodeList=this.nodeList.slice(0,this.__length);this.length=this.__length}else{this.nodeList.pop();--this.length}this.__with=false}return this},rollBack:function(){return this.__parent},toString:function(){return'[ Class xNodeList ]'}};xNodeList.prototype.getRange=xNodeList.prototype.slice;(function(){var f=('click,mouseover,mouseout,dblclick,'+'mousedown,mouseup,submit,change,'+'blur,focus,keydown,keypress,keyup,select').split(','),xepProps=('ignore,attr,removeAttr,addClass,removeClass,'+'toggleClass,replaceClass,event,hover,once,'+'Cevent,unevent,inText,html,remove,empty,'+'hide,show,toggleShow,visible,invisible,'+'setValue,prop,addStyle').split(','),i=-1,j=-1,p,e,xep=xElement.prototype,xnp=xNodeList.prototype;while(xepProps[++j]){p=xepProps[j];if(typeof xep[p]==='function'&&typeof xnp[p]==='undefined'){(function(m){xnp[m]=function(a,b,c){var d=this.nodeList,i=-1;while(d[++i]){(STACK.ELEMENTS[d[i].__exid]||new xElement(d[i]))[m](a,b,c)}return this}})(p)}}while(f[++i]){e=f[i];(function(e){xep[e]=function(a,b){Base.event.set(this.element,e,a,b||false);return this};xep['un'+e]=function(a){Base.event.remove(this.element,e,a);return this};xnp[e]=function(a,b){var i=-1,n=this.nodeList;while(n[++i]){Base.event.set(n[i],e,a,b||n[i])}return this};xnp['un'+e]=function(a,b){var i=-1,n=this.nodeList;while(n[++i]){Base.event.remove(n[i],e,a)}return this}})(e)}})();INTERVAL_FPS=1000/60;function Timer(a){this.fn=this.__makeFunction(a);this.timerID=CoreTimer.pushStack(this);return this}Timer.prototype={stop:function(){CoreTimer.stop(this.timerID)},start:function(a){this.begin=a||0;CoreTimer.start()},exec:function(){this.fn()},__makeFunction:function(a){a.prototype.stop=this.stop;return a},isPlaying:function(){return CoreTimer.isPlaying}};CoreTimer={count:0,stack:[],play:false,globalTimerID:0,pushStack:function(a){var b=this.count;this.stack[b]=[a,b,false];++this.count;return b},isPlaying:function(){return this.play},start:function(){if(this.play===true){return}this.play=true;this.globalTimerID=interval(function(){var a=CoreTimer.stack,i=-1;while(a[++i]){if(a[i]&&a[i][2]===false){a[i][0].exec()}}},INTERVAL_FPS)},stop:function(a){if(!this.stack[a]){return}this.stack[a][2]=true;var b=this.stack,i=-1,f=true;while(b[++i]){if(b[i]&&b[i][2]===true){continue}else{f=false}}if(f===true){this.clear()}},clear:function(){unInterval(this.globalTimerID);this.play=false;this.stack=[];this.stackLength=0;this.count=0}};function Layer(a){var b;if(STACK.GLOBAL_LAYER){if(a===true){STACK.GLOBAL_LAYER.show()}b=union({},STACK.GLOBAL_LAYER);b.opacity=0.6;b.showFlag=!!a;if(b.showFlag===true){b.show()}return b}else{this.opacity=0.6;this.showFlag=!!a;STACK.GLOBAL_LAYER=this;this.__construct();if(this.showFlag===true){this.show()}return this}}Layer.prototype={__construct:function(){var z=H.CURRENT_ZINDEX;this.layer=DOM.create('div').attr('id','fl_layer').appendTo().addStyle({position:'fixed',width:'100%',height:'100%',backgroundColor:'#000',display:'none',margin:'0',top:'0px',left:'0px',zIndex:z>1000?z+1:1000});this.__lock=false},isHidden:function(){return!this.showFlag},setOpacity:function(a){this.layer.setOpacity(a);return this},lock:function(){this.__lock=true},unlock:function(){this.__lock=false},show:function(a,b){var c=this;if(a){Animation.appear(this.layer,{from:0,to:this.opacity,speed:0.1,easing:100,callback:function(){c.__show(b)}})}else{this.__show(b)}this.showFlag=true;return this},__show:function(a){this.layer.setOpacity(this.opacity);this.layer.show();if(typeof a==='function'){a()}},hide:function(a,b){var c=this;if(this.__lock===true){return this}if(a){Animation.fade(this.layer,{from:this.opacity,to:0,speed:0.1,easing:0,callback:function(){c.__hide(b)}})}else{this.__hide(b)}return this},__hide:function(a){this.layer.hide();if(typeof a==='function'){a()}},getLayerObject:function(){return this.layer},showLoading:function(a){if(a){this.layer.addClass(a)}else{this.layer.addStyle({backgroundImage:'url('+CORE_CONFIG.APPPATH+')',backgroundPosition:'center center',backgroundRepeat:'no-repeat'})}},hideLoading:function(a){if(a){this.layer.removeClass(a)}else{this.layer.removeStyle(['backgroundImage','backgroundPosition','backgroundRepeat'])}return this},toString:function(){return'[ Module Layer ]'}};MODULES.layer=Layer;function Animation(e,a,b){var d=(e instanceof xElement)?e.get():e,ee=DOM(e),opt=union({speed:30,easing:0,callback:null,delay:0},b||{}),obj={width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight,top:d.style.pixelTop||d.offsetTop,left:d.style.pixelLeft||d.offsetLeft,marginTop:Animation.__getStyle(ee,'marginTop'),marginLeft:Animation.__getStyle(ee,'marginLeft'),visibility:ee.readStyle('visibility'),display:ee.readStyle('display'),position:ee.readStyle('position'),opacity:ee.getOpacity()},cProp={},defs={},c=0,cEnd=opt.speed-1,o,step,k=0.8,deg,KE=k*opt.easing,A=100/k,p,i,t,tcp,tcpv,tcpvi,D;if(obj.position==='static'){d.style.position='relative'}if(obj.display==='none'){d.style.display=''}if(obj.visibility==='hidden'){d.style.visibility='visible'}d.__animate=true;for(p in a){tcp=ut.camel(p);tcpv=(tcp in obj)?obj[tcp]:ee.readStyle(tcp,true);tcpvi=pf(tcpv,10);if(NUMERIC_CSS.indexOf(tcp)!==-1){cProp[tcp]=[a[p],(a[p]>tcpv),true];defs[tcp]=tcpv}else if(!isNaN(tcpvi)){cProp[tcp]=[a[p],(a[p]>tcpvi),false];defs[tcp]=tcpvi}}D=new DefferdState(this);t=new Timer(function(){if(c++<=cEnd){step=c/cEnd;deg=(100+KE)*step/(2*KE*step+100-KE);for(i in cProp){o=defs[i]+(cProp[i][0]-defs[i])*deg;if((cProp[i][1]&&cProp[i][0]<o)||(!cProp[i][1]&&cProp[i][0]>o)){o=cProp[i][0]}ee.addStyle(i,o+(cProp[i][2]===true?'':'px'))}}else{this.stop();D.success();d.__animate=false;if(typeof opt.callback==='function'){opt.callback.call(d)}if(opt.afterHide===true){e.hide()}}});(opt.delay>0)?delay(t.start,opt.delay):t.start();return D}Animation.smoothly=function(e,b,c){var d=(e instanceof xElement)?e.get():e,ee=DOM(e),opt=union({duration:1,easing:'liner',callback:null,delay:0},c||{}),obj={width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight,top:d.style.pixelTop||d.offsetTop,left:d.style.pixelLeft||d.offsetLeft,marginTop:Animation.__getStyle(ee,'marginTop'),marginLeft:Animation.__getStyle(ee,'marginLeft'),visibility:ee.readStyle('visibility'),display:ee.readStyle('display'),position:ee.readStyle('position'),opacity:ee.getOpacity()},cProp={},defs={},p,i,t,tcp,tcpv,tcpvi,D,duration=opt.duration*1000,easing=opt.easing;if(obj.position==='static'){d.style.position='relative'}if(obj.display==='none'){d.style.display=''}if(obj.visibility==='hidden'){d.style.visibility='visible'}d.__animate=true;for(p in b){tcp=ut.camel(p);tcpv=(tcp in obj)?obj[tcp]:ee.readStyle(tcp,true);tcpvi=pf(tcpv,10);if(NUMERIC_CSS.indexOf(tcp)!==-1){cProp[tcp]=[b[p],(b[p]>tcpv),true];defs[tcp]=tcpv}else if(!isNaN(tcpvi)){cProp[tcp]=[b[p],(b[p]>tcpvi),false];defs[tcp]=tcpvi}}D=new DefferdState(this);t=new Timer(function(){var a=+new Date,time=a-this.begin,point;if(time<duration){for(i in cProp){point=Animation.easings[easing](time,defs[i],cProp[i][0],duration);e.addStyle(i,point+(cProp[i][2]===true?'':'px'))}}else{for(i in cProp){e.addStyle(i,cProp[i][0]+defs[i]+(cProp[i][2]===true?'':'px'))}this.stop();D.success();d.__animate=false;if(typeof opt.callback==='function'){opt.callback.call(d)}if(opt.afterHide===true){e.hide()}}});(opt.delay>0)?delay(function(){t.start(+new Date)},opt.delay):t.start(+new Date);return D};Animation.easings={liner:function(t,b,c,d){return c*t/d+b},easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(t,b,c,d){return((t/=d/2)<1)?c/2*t*t+b:-c/2*((--t)*(t-2)-1)+b},easeInCubic:function(t,b,c,d){return(t/d)*t*t+b},easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(t,b,c,d){return((t/=d/2)<1)?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeOutBack:function(t,b,c,d){var s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeOutBounce:function(t,b,c,d){return((t/=d)<(1/2.75))?c*(7.5625*t*t)+b:(t<(2/2.75))?c*(7.5625*(t-=(1.5/2.75))*t+.75)+b:(t<(2.5/2.75))?c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b:c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b}};Animation.__getStyle=function(e,a){var v=e.readStyle(a);return(v!=='auto')?pi(v,10):0};Animation.appear=function(a,b){var e=DOM(a),opt=union({speed:40,easing:0,callback:null},b||{});if(e.isHidden()){e.show()}if(!e.isVisible()){e.visible()}return new Animation(e.setOpacity(opt.from||0),{opacity:opt.to||1},opt)};Animation.fade=function(a,b){var e=DOM(a),opt=union({speed:40,easing:0,callback:null,afterHide:true},b||{});if(e.isHidden()){e.show()}if(!e.isVisible()){e.visible()}return new Animation(e,{opacity:opt.to||0},opt)};Animation.expand=function(a,b){var e=DOM(a),el=e.get(),w=el.offsetWidth,h=el.offsetHeight,opt=union({speed:40,mode:'wh',dest:'center',width:w,height:h,easing:0,callback:null},b||{}),defml=e.readStyle('marginLeft',true),defmt=e.readStyle('marginTop',true),ml,mt,prop;if(defml==='auto'){defml=el.offsetLeft}if(defmt==='auto'){defmt=el.offsetTop}ml=(opt.mode.indexOf('w')!==-1)?(opt.dest==='center')?-(opt.width/2-w/2):(opt.dest==='left')?-(opt.width-w):0:0;mt=(opt.mode.indexOf('h')!==-1)?(opt.dest==='center')?-(opt.height/2-h/2):(opt.dest==='left')?-(opt.height-h):0:0;prop=(opt.mode==='w')?{width:opt.width,marginLeft:defml-ml}:(opt.mode==='h')?{height:opt.height,marginTop:defmt-mt}:{width:opt.width,marginLeft:defml-ml,height:opt.height,marginTop:defmt-mt};return new Animation(e,prop,opt)};Animation.move=function(a,b){var e=DOM(a),ee=e.get(),defml=e.readStyle('marginLeft',true),defmt=e.readStyle('marginTop',true),opt=union({left:0,top:0,speed:40,easing:0,callback:null},b||{}),prop={};if(defml==='auto'){defml=ee.offsetLeft}if(defmt==='auto'){defmt=ee.offsetTop}prop.marginLeft=defml+opt.left;prop.marginTop=defmt+opt.top;return new Animation(e,prop,opt)};Animation.blindDown=function(a,b){var e=DOM(a),ee=e.get(),dim=e.defaultSize(),prop={},opt=union({mode:'y',speed:40,easing:0,from:0,callback:null},b||{});if(opt.mode.indexOf('x')!==-1){prop.width=opt.width||dim.width}if(opt.mode.indexOf('y')!==-1){prop.height=opt.height||dim.height}ee.style.overflow='hidden';ee.style.height=opt.from+'px';return new Animation(e,prop,opt)};Animation.blindUp=function(a,b){var e=DOM(a),ee=e.get(),prop={},opt=union({mode:'y',to:1,speed:40,easing:0,callback:null},b||{});if(opt.mode.indexOf('x')!==-1){prop.width=opt.to}if(opt.mode.indexOf('y')!==-1){prop.height=opt.to}ee.style.overflow='hidden';return new Animation(e,prop,opt)};Animation.centerize=function(a,b){var e=DOM(a),ee=e.get(),dim=e.absDimension(),prop={},opt=union({speed:40,easing:0,offsetX:0,offsetY:0,callback:null},b||{}),pos=e.readStyle('position'),p=ut.getCenterPosition((pos==='fixed')?false:true);if(opt.targetWidth){prop.width=opt.targetWidth;prop.marginLeft=mr(p.x-opt.targetWidth/2)-dim.left+e.readStyle('marginLeft',true)-(opt.offsetX||0)}else{}if(opt.targetHeight){prop.height=opt.targetHeight;prop.marginTop=mr(p.y-opt.targetHeight/2)-dim.top+e.readStyle('marginTop',true)-(opt.offsetY||0)}else{}return new Animation(e,prop,opt)};Animation.toString=function(){return'[ Module Animation ]'};ignite()})((new Date()).getTime(),document,this,location,navigator.userAgent.toLowerCase()):alert('Undefined Configure Object!');